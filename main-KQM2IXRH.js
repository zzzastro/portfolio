var Lp=Object.defineProperty,Im=Object.defineProperties;var Am=Object.getOwnPropertyDescriptors;var Sp=Object.getOwnPropertySymbols,Sm=Object.getPrototypeOf,Em=Object.prototype.hasOwnProperty,Lm=Object.prototype.propertyIsEnumerable,_m=Reflect.get;var Zc=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i);var Ep=(i,e,t)=>e in i?Lp(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,D=(i,e)=>{for(var t in e||={})Em.call(e,t)&&Ep(i,t,e[t]);if(Sp)for(var t of Sp(e))Lm.call(e,t)&&Ep(i,t,e[t]);return i},re=(i,e)=>Im(i,Am(e));var _p=(i,e)=>{for(var t in e)Lp(i,t,{get:e[t],enumerable:!0})};var pi=(i,e,t)=>_m(Sm(i),t,e);var A=(i,e,t)=>new Promise((n,a)=>{var s=c=>{try{o(t.next(c))}catch(l){a(l)}},r=c=>{try{o(t.throw(c))}catch(l){a(l)}},o=c=>c.done?n(c.value):Promise.resolve(c.value).then(s,r);o((t=t.apply(i,e)).next())}),Rs=function(i,e){this[0]=i,this[1]=e},Kc=(i,e,t)=>{var n=(r,o,c,l)=>{try{var d=t[r](o),h=(o=d.value)instanceof Rs,u=d.done;Promise.resolve(h?o[0]:o).then(p=>h?n(r==="return"?r:"next",o[1]?{done:p.done,value:p.value}:p,c,l):c({value:p,done:u})).catch(p=>n("throw",p,c,l))}catch(p){l(p)}},a=r=>s[r]=o=>new Promise((c,l)=>n(r,o,c,l)),s={};return t=t.apply(i,e),s[Zc("asyncIterator")]=()=>s,a("next"),a("throw"),a("return"),s};var Dp=(i,e,t)=>(e=i[Zc("asyncIterator")])?e.call(i):(i=i[Zc("iterator")](),e={},t=(n,a)=>(a=i[n])&&(e[n]=s=>new Promise((r,o,c)=>(s=a.call(i,s),c=s.done,Promise.resolve(s.value).then(l=>r({value:l,done:c}),o)))),t("next"),t("return"),e);var Yc=null;var Tp=1;var fi=Symbol("SIGNAL");function F(i){let e=Yc;return Yc=i,e}function Os(){return Yc}var Jc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Pp(i){if(!(Ns(i)&&!i.dirty)&&!(!i.dirty&&i.lastCleanEpoch===Tp)){if(!i.producerMustRecompute(i)&&!tl(i)){Qc(i);return}i.producerRecomputeValue(i),Qc(i)}}function Qc(i){i.dirty=!1,i.lastCleanEpoch=Tp}function el(i){return i&&Rp(i),F(i)}function Rp(i){i.producersTail=void 0,i.recomputing=!0}function Op(i,e){F(e),i&&Fp(i)}function Fp(i){i.recomputing=!1;let e=i.producersTail,t=e!==void 0?e.nextProducer:i.producers;if(t!==void 0){if(Ns(i))do t=nl(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:i.producers=void 0}}function tl(i){for(let e=i.producers;e!==void 0;e=e.nextProducer){let t=e.producer,n=e.lastReadVersion;if(n!==t.version||(Pp(t),n!==t.version))return!0}return!1}function Fs(i){if(Ns(i)){let e=i.producers;for(;e!==void 0;)e=nl(e)}i.producers=void 0,i.producersTail=void 0,i.consumers=void 0,i.consumersTail=void 0}function nl(i){let e=i.producer,t=i.nextProducer,n=i.nextConsumer,a=i.prevConsumer;if(i.nextConsumer=void 0,i.prevConsumer=void 0,n!==void 0?n.prevConsumer=a:e.consumersTail=a,a!==void 0)a.nextConsumer=n;else if(e.consumers=n,!Ns(e)){let s=e.producers;for(;s!==void 0;)s=nl(s)}return t}function Ns(i){return i.consumerIsAlwaysLive||i.consumers!==void 0}function Dm(){throw new Error}var Tm=Dm;function il(i){Tm=i}function q(i){return typeof i=="function"}function Hs(i){let t=i(n=>{Error.call(n),n.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var js=Hs(i=>function(t){i(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((n,a)=>`${a+1}) ${n.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function xn(i,e){if(i){let t=i.indexOf(e);0<=t&&i.splice(t,1)}}var De=class i{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:n}=this;if(q(n))try{n()}catch(s){e=s instanceof js?s.errors:[s]}let{_finalizers:a}=this;if(a){this._finalizers=null;for(let s of a)try{Np(s)}catch(r){e=e??[],r instanceof js?e=[...e,...r.errors]:e.push(r)}}if(e)throw new js(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Np(e);else{if(e instanceof i){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&xn(t,e)}remove(e){let{_finalizers:t}=this;t&&xn(t,e),e instanceof i&&e._removeParent(this)}};De.EMPTY=(()=>{let i=new De;return i.closed=!0,i})();var al=De.EMPTY;function Bs(i){return i instanceof De||i&&"closed"in i&&q(i.remove)&&q(i.add)&&q(i.unsubscribe)}function Np(i){q(i)?i():i.unsubscribe()}var mt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var gi={setTimeout(i,e,...t){let{delegate:n}=gi;return n?.setTimeout?n.setTimeout(i,e,...t):setTimeout(i,e,...t)},clearTimeout(i){let{delegate:e}=gi;return(e?.clearTimeout||clearTimeout)(i)},delegate:void 0};function Vs(i){gi.setTimeout(()=>{let{onUnhandledError:e}=mt;if(e)e(i);else throw i})}function oa(){}var Hp=sl("C",void 0,void 0);function jp(i){return sl("E",void 0,i)}function Bp(i){return sl("N",i,void 0)}function sl(i,e,t){return{kind:i,value:e,error:t}}var In=null;function yi(i){if(mt.useDeprecatedSynchronousErrorHandling){let e=!In;if(e&&(In={errorThrown:!1,error:null}),i(),e){let{errorThrown:t,error:n}=In;if(In=null,t)throw n}}else i()}function Vp(i){mt.useDeprecatedSynchronousErrorHandling&&In&&(In.errorThrown=!0,In.error=i)}var An=class extends De{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Bs(e)&&e.add(this)):this.destination=Om}static create(e,t,n){return new mi(e,t,n)}next(e){this.isStopped?ol(Bp(e),this):this._next(e)}error(e){this.isStopped?ol(jp(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ol(Hp,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Pm=Function.prototype.bind;function rl(i,e){return Pm.call(i,e)}var cl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(n){zs(n)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(n){zs(n)}else zs(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){zs(t)}}},mi=class extends An{constructor(e,t,n){super();let a;if(q(e)||!e)a={next:e??void 0,error:t??void 0,complete:n??void 0};else{let s;this&&mt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),a={next:e.next&&rl(e.next,s),error:e.error&&rl(e.error,s),complete:e.complete&&rl(e.complete,s)}):a=e}this.destination=new cl(a)}};function zs(i){mt.useDeprecatedSynchronousErrorHandling?Vp(i):Vs(i)}function Rm(i){throw i}function ol(i,e){let{onStoppedNotification:t}=mt;t&&gi.setTimeout(()=>t(i,e))}var Om={closed:!0,next:oa,error:Rm,complete:oa};var ki=typeof Symbol=="function"&&Symbol.observable||"@@observable";function zp(i){return i}function qp(i){return i.length===0?zp:i.length===1?i[0]:function(t){return i.reduce((n,a)=>a(n),t)}}var Ie=(()=>{class i{constructor(t){t&&(this._subscribe=t)}lift(t){let n=new i;return n.source=this,n.operator=t,n}subscribe(t,n,a){let s=Nm(t)?t:new mi(t,n,a);return yi(()=>{let{operator:r,source:o}=this;s.add(r?r.call(s,o):o?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return n=Up(n),new n((a,s)=>{let r=new mi({next:o=>{try{t(o)}catch(c){s(c),r.unsubscribe()}},error:s,complete:a});this.subscribe(r)})}_subscribe(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)}[ki](){return this}pipe(...t){return qp(t)(this)}toPromise(t){return t=Up(t),new t((n,a)=>{let s;this.subscribe(r=>s=r,r=>a(r),()=>n(s))})}}return i.create=e=>new i(e),i})();function Up(i){var e;return(e=i??mt.Promise)!==null&&e!==void 0?e:Promise}function Fm(i){return i&&q(i.next)&&q(i.error)&&q(i.complete)}function Nm(i){return i&&i instanceof An||Fm(i)&&Bs(i)}function Hm(i){return q(i?.lift)}function Ge(i){return e=>{if(Hm(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ye(i,e,t,n,a){return new ll(i,e,t,n,a)}var ll=class extends An{constructor(e,t,n,a,s,r){super(e),this.onFinalize=s,this.shouldUnsubscribe=r,this._next=t?function(o){try{t(o)}catch(c){e.error(c)}}:super._next,this._error=a?function(o){try{a(o)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(o){e.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Wp=Hs(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var kt=(()=>{class i extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let n=new qs(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new Wp}next(t){yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let n of this.currentObservers)n.next(t)}})}error(t){yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:n}=this;for(;n.length;)n.shift().error(t)}})}complete(){yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:n,isStopped:a,observers:s}=this;return n||a?al:(this.currentObservers=null,s.push(t),new De(()=>{this.currentObservers=null,xn(s,t)}))}_checkFinalizedStatuses(t){let{hasError:n,thrownError:a,isStopped:s}=this;n?t.error(a):s&&t.complete()}asObservable(){let t=new Ie;return t.source=this,t}}return i.create=(e,t)=>new qs(e,t),i})(),qs=class extends kt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.next)===null||n===void 0||n.call(t,e)}error(e){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.error)===null||n===void 0||n.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,n;return(n=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&n!==void 0?n:al}};var Sn=class extends kt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}};var dl={now(){return(dl.delegate||Date).now()},delegate:void 0};var Us=class extends De{constructor(e,t){super()}schedule(e,t=0){return this}};var ca={setInterval(i,e,...t){let{delegate:n}=ca;return n?.setInterval?n.setInterval(i,e,...t):setInterval(i,e,...t)},clearInterval(i){let{delegate:e}=ca;return(e?.clearInterval||clearInterval)(i)},delegate:void 0};var Ws=class extends Us{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var n;if(this.closed)return this;this.state=e;let a=this.id,s=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(s,a,t)),this.pending=!0,this.delay=t,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,n=0){return ca.setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(n!=null&&this.delay===n&&this.pending===!1)return t;t!=null&&ca.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let n=this._execute(e,t);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,a;try{this.work(e)}catch(s){n=!0,a=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),a}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,xn(n,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var vi=class i{constructor(e,t=i.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,n){return new this.schedulerActionCtor(this,e).schedule(n,t)}};vi.now=dl.now;var $s=class extends vi{constructor(e,t=vi.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let n;this._active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}};var $p=new $s(Ws);function Xp(i,e,t,n){function a(s){return s instanceof t?s:new t(function(r){r(s)})}return new(t||(t=Promise))(function(s,r){function o(d){try{l(n.next(d))}catch(h){r(h)}}function c(d){try{l(n.throw(d))}catch(h){r(h)}}function l(d){d.done?s(d.value):a(d.value).then(o,c)}l((n=n.apply(i,e||[])).next())})}function Gp(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function En(i){return this instanceof En?(this.v=i,this):new En(i)}function Zp(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",r),a[Symbol.asyncIterator]=function(){return this},a;function r(p){return function(f){return Promise.resolve(f).then(p,h)}}function o(p,f){n[p]&&(a[p]=function(g){return new Promise(function(m,y){s.push([p,g,m,y])>1||c(p,g)})},f&&(a[p]=f(a[p])))}function c(p,f){try{l(n[p](f))}catch(g){u(s[0][3],g)}}function l(p){p.value instanceof En?Promise.resolve(p.value.v).then(d,h):u(s[0][2],p)}function d(p){c("next",p)}function h(p){c("throw",p)}function u(p,f){p(f),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Kp(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Gp=="function"?Gp(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(r){return new Promise(function(o,c){r=i[s](r),a(o,c,r.done,r.value)})}}function a(s,r,o,c){Promise.resolve(c).then(function(l){s({value:l,done:o})},r)}}var Mi=i=>i&&typeof i.length=="number"&&typeof i!="function";function Gs(i){return q(i?.then)}function Xs(i){return q(i[ki])}function Zs(i){return Symbol.asyncIterator&&q(i?.[Symbol.asyncIterator])}function Ks(i){return new TypeError(`You provided ${i!==null&&typeof i=="object"?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function jm(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ys=jm();function Qs(i){return q(i?.[Ys])}function Js(i){return Zp(this,arguments,function*(){let t=i.getReader();try{for(;;){let{value:n,done:a}=yield En(t.read());if(a)return yield En(void 0);yield yield En(n)}}finally{t.releaseLock()}})}function er(i){return q(i?.getReader)}function Xe(i){if(i instanceof Ie)return i;if(i!=null){if(Xs(i))return Bm(i);if(Mi(i))return Vm(i);if(Gs(i))return zm(i);if(Zs(i))return Yp(i);if(Qs(i))return qm(i);if(er(i))return Um(i)}throw Ks(i)}function Bm(i){return new Ie(e=>{let t=i[ki]();if(q(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Vm(i){return new Ie(e=>{for(let t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}function zm(i){return new Ie(e=>{i.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Vs)})}function qm(i){return new Ie(e=>{for(let t of i)if(e.next(t),e.closed)return;e.complete()})}function Yp(i){return new Ie(e=>{Wm(i,e).catch(t=>e.error(t))})}function Um(i){return Yp(Js(i))}function Wm(i,e){var t,n,a,s;return Xp(this,void 0,void 0,function*(){try{for(t=Kp(i);n=yield t.next(),!n.done;){let r=n.value;if(e.next(r),e.closed)return}}catch(r){a={error:r}}finally{try{n&&!n.done&&(s=t.return)&&(yield s.call(t))}finally{if(a)throw a.error}}e.complete()})}function ot(i,e,t,n=0,a=!1){let s=e.schedule(function(){t(),a?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!a)return s}function tr(i,e=0){return Ge((t,n)=>{t.subscribe(Ye(n,a=>ot(n,i,()=>n.next(a),e),()=>ot(n,i,()=>n.complete(),e),a=>ot(n,i,()=>n.error(a),e)))})}function nr(i,e=0){return Ge((t,n)=>{n.add(i.schedule(()=>t.subscribe(n),e))})}function Qp(i,e){return Xe(i).pipe(nr(e),tr(e))}function Jp(i,e){return Xe(i).pipe(nr(e),tr(e))}function e0(i,e){return new Ie(t=>{let n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}function t0(i,e){return new Ie(t=>{let n;return ot(t,e,()=>{n=i[Ys](),ot(t,e,()=>{let a,s;try{({value:a,done:s}=n.next())}catch(r){t.error(r);return}s?t.complete():t.next(a)},0,!0)}),()=>q(n?.return)&&n.return()})}function ir(i,e){if(!i)throw new Error("Iterable cannot be null");return new Ie(t=>{ot(t,e,()=>{let n=i[Symbol.asyncIterator]();ot(t,e,()=>{n.next().then(a=>{a.done?t.complete():t.next(a.value)})},0,!0)})})}function n0(i,e){return ir(Js(i),e)}function i0(i,e){if(i!=null){if(Xs(i))return Qp(i,e);if(Mi(i))return e0(i,e);if(Gs(i))return Jp(i,e);if(Zs(i))return ir(i,e);if(Qs(i))return t0(i,e);if(er(i))return n0(i,e)}throw Ks(i)}function ar(i,e){return e?i0(i,e):Xe(i)}function Ln(i,e){return Ge((t,n)=>{let a=0;t.subscribe(Ye(n,s=>{n.next(i.call(e,s,a++))}))})}var{isArray:$m}=Array;function Gm(i,e){return $m(e)?i(...e):i(e)}function a0(i){return Ln(e=>Gm(i,e))}function s0(i,e,t,n,a,s,r,o){let c=[],l=0,d=0,h=!1,u=()=>{h&&!c.length&&!l&&e.complete()},p=g=>l<n?f(g):c.push(g),f=g=>{s&&e.next(g),l++;let m=!1;Xe(t(g,d++)).subscribe(Ye(e,y=>{a?.(y),s?p(y):e.next(y)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<n;){let y=c.shift();r?ot(e,r,()=>f(y)):f(y)}u()}catch(y){e.error(y)}}))};return i.subscribe(Ye(e,p,()=>{h=!0,u()})),()=>{o?.()}}function hl(i,e,t=1/0){return q(e)?hl((n,a)=>Ln((s,r)=>e(n,s,a,r))(Xe(i(n,a))),t):(typeof e=="number"&&(t=e),Ge((n,a)=>s0(n,a,i,t)))}var Xm=["addListener","removeListener"],Zm=["addEventListener","removeEventListener"],Km=["on","off"];function pe(i,e,t,n){if(q(t)&&(n=t,t=void 0),n)return pe(i,e,t).pipe(a0(n));let[a,s]=Jm(i)?Zm.map(r=>o=>i[r](e,o,t)):Ym(i)?Xm.map(r0(i,e)):Qm(i)?Km.map(r0(i,e)):[];if(!a&&Mi(i))return hl(r=>pe(r,e,t))(Xe(i));if(!a)throw new TypeError("Invalid event target");return new Ie(r=>{let o=(...c)=>r.next(1<c.length?c:c[0]);return a(o),()=>s(o)})}function r0(i,e){return t=>n=>i[t](e,n)}function Ym(i){return q(i.addListener)&&q(i.removeListener)}function Qm(i){return q(i.on)&&q(i.off)}function Jm(i){return q(i.addEventListener)&&q(i.removeEventListener)}function ul(i,e){return Ge((t,n)=>{let a=0;t.subscribe(Ye(n,s=>i.call(e,s,a++)&&n.next(s)))})}function pl(i,e=$p){return Ge((t,n)=>{let a=null,s=null,r=null,o=()=>{if(a){a.unsubscribe(),a=null;let l=s;s=null,n.next(l)}};function c(){let l=r+i,d=e.now();if(d<l){a=this.schedule(void 0,l-d),n.add(a);return}o()}t.subscribe(Ye(n,l=>{s=l,r=e.now(),a||(a=e.schedule(c,i),n.add(a))},()=>{o(),n.complete()},void 0,()=>{s=a=null}))})}function fe(i){return Ge((e,t)=>{Xe(i).subscribe(Ye(t,()=>t.complete(),oa)),!t.closed&&e.subscribe(t)})}var fl;function sr(){return fl}function Lt(i){let e=fl;return fl=i,e}var o0=Symbol("NotFound");function wi(i){return i===o0||i?.name==="\u0275NotFound"}var hr="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Z=class extends Error{code;constructor(e,t){super(ur(e,t)),this.code=e}};function sk(i){return`NG0${Math.abs(i)}`}function ur(i,e){return`${sk(i)}${e?": "+e:""}`}function oe(i){for(let e in i)if(i[e]===oe)return e;throw Error("")}function an(i){if(typeof i=="string")return i;if(Array.isArray(i))return`[${i.map(an).join(", ")}]`;if(i==null)return""+i;let e=i.overriddenName||i.name;if(e)return`${e}`;let t=i.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n>=0?t.slice(0,n):t}function Dl(i,e){return i?e?`${i} ${e}`:i:e||""}var rk=oe({__forward_ref__:oe});function pr(i){return i.__forward_ref__=pr,i.toString=function(){return an(this())},i}function Je(i){return u0(i)?i():i}function u0(i){return typeof i=="function"&&i.hasOwnProperty(rk)&&i.__forward_ref__===pr}function le(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function zt(i){return{providers:i.providers||[],imports:i.imports||[]}}function fr(i){return ok(i,gr)}function ok(i,e){return i.hasOwnProperty(e)&&i[e]||null}function ck(i){let e=i?.[gr]??null;return e||null}function yl(i){return i&&i.hasOwnProperty(or)?i[or]:null}var gr=oe({\u0275prov:oe}),or=oe({\u0275inj:oe}),K=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Tl(i){return i&&!!i.\u0275providers}var Pl=oe({\u0275cmp:oe}),Rl=oe({\u0275dir:oe}),Ol=oe({\u0275pipe:oe});var ml=oe({\u0275fac:oe}),On=oe({__NG_ELEMENT_ID__:oe}),c0=oe({__NG_ENV_ID__:oe});function Fn(i){return Nl(i,"@Component"),i[Pl]||null}function Fl(i){return Nl(i,"@Directive"),i[Rl]||null}function p0(i){return Nl(i,"@Pipe"),i[Ol]||null}function Nl(i,e){if(i==null)throw new Z(-919,!1)}function pa(i){return typeof i=="string"?i:i==null?"":String(i)}function f0(i){return typeof i=="function"?i.name||i.toString():typeof i=="object"&&i!=null&&typeof i.type=="function"?i.type.name||i.type.toString():pa(i)}var g0=oe({ngErrorCode:oe}),lk=oe({ngErrorMessage:oe}),dk=oe({ngTokenPath:oe});function Hl(i,e){return y0("",-200,e)}function yr(i,e){throw new Z(-201,!1)}function y0(i,e,t){let n=new Z(e,i);return n[g0]=e,n[lk]=i,t&&(n[dk]=t),n}function hk(i){return i[g0]}var kl;function m0(){return kl}function Qe(i){let e=kl;return kl=i,e}function jl(i,e,t){let n=fr(i);if(n&&n.providedIn=="root")return n.value===void 0?n.value=n.factory():n.value;if(t&8)return null;if(e!==void 0)return e;yr(i,"")}var uk={},_n=uk,vl="__NG_DI_FLAG__",Ml=class{injector;constructor(e){this.injector=e}retrieve(e,t){let n=Dn(t)||0;try{return this.injector.get(e,n&8?null:_n,n)}catch(a){if(wi(a))return a;throw a}}};function pk(i,e=0){let t=sr();if(t===void 0)throw new Z(-203,!1);if(t===null)return jl(i,void 0,e);{let n=fk(e),a=t.retrieve(i,n);if(wi(a)){if(n.optional)return null;throw a}return a}}function ie(i,e=0){return(m0()||pk)(Je(i),e)}function G(i,e){return ie(i,Dn(e))}function Dn(i){return typeof i>"u"||typeof i=="number"?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function fk(i){return{optional:!!(i&8),host:!!(i&1),self:!!(i&2),skipSelf:!!(i&4)}}function wl(i){let e=[];for(let t=0;t<i.length;t++){let n=Je(i[t]);if(Array.isArray(n)){if(n.length===0)throw new Z(900,!1);let a,s=0;for(let r=0;r<n.length;r++){let o=n[r],c=gk(o);typeof c=="number"?c===-1?a=o.token:s|=c:a=o}e.push(ie(a,s))}else e.push(ie(n))}return e}function k0(i,e){return i[vl]=e,i.prototype[vl]=e,i}function gk(i){return i[vl]}function Ci(i,e){let t=i.hasOwnProperty(ml);return t?i[ml]:null}function v0(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){let a=i[n],s=e[n];if(t&&(a=t(a),s=t(s)),s!==a)return!1}return!0}function M0(i){return i.flat(Number.POSITIVE_INFINITY)}function mr(i,e){i.forEach(t=>Array.isArray(t)?mr(t,e):e(t))}function Bl(i,e,t){e>=i.length?i.push(t):i.splice(e,0,t)}function fa(i,e){return e>=i.length-1?i.pop():i.splice(e,1)[0]}function w0(i,e){let t=[];for(let n=0;n<i;n++)t.push(e);return t}function b0(i,e,t,n){let a=i.length;if(a==e)i.push(t,n);else if(a===1)i.push(n,i[0]),i[0]=t;else{for(a--,i.push(i[a-1],i[a]);a>e;){let s=a-2;i[a]=i[s],a--}i[e]=t,i[e+1]=n}}function C0(i,e,t){let n=xi(i,e);return n>=0?i[n|1]=t:(n=~n,b0(i,n,e,t)),n}function kr(i,e){let t=xi(i,e);if(t>=0)return i[t|1]}function xi(i,e){return yk(i,e,1)}function yk(i,e,t){let n=0,a=i.length>>t;for(;a!==n;){let s=n+(a-n>>1),r=i[s<<t];if(e===r)return s<<t;r>e?a=s:n=s+1}return~(a<<t)}var Nn={},ct=[],Hn=new K(""),Vl=new K("",-1),zl=new K(""),da=class{get(e,t=_n){if(t===_n){let a=y0("",-201);throw a.name="\u0275NotFound",a}return t}};function ql(i){return{\u0275providers:i}}function x0(...i){return{\u0275providers:Ul(!0,i),\u0275fromNgModule:!0}}function Ul(i,...e){let t=[],n=new Set,a,s=r=>{t.push(r)};return mr(e,r=>{let o=r;cr(o,s,[],n)&&(a||=[],a.push(o))}),a!==void 0&&I0(a,s),t}function I0(i,e){for(let t=0;t<i.length;t++){let{ngModule:n,providers:a}=i[t];Wl(a,s=>{e(s,n)})}}function cr(i,e,t,n){if(i=Je(i),!i)return!1;let a=null,s=yl(i),r=!s&&Fn(i);if(!s&&!r){let c=i.ngModule;if(s=yl(c),s)a=c;else return!1}else{if(r&&!r.standalone)return!1;a=i}let o=n.has(a);if(r){if(o)return!1;if(n.add(a),r.dependencies){let c=typeof r.dependencies=="function"?r.dependencies():r.dependencies;for(let l of c)cr(l,e,t,n)}}else if(s){if(s.imports!=null&&!o){n.add(a);let l;mr(s.imports,d=>{cr(d,e,t,n)&&(l||=[],l.push(d))}),l!==void 0&&I0(l,e)}if(!o){let l=Ci(a)||(()=>new a);e({provide:a,useFactory:l,deps:ct},a),e({provide:zl,useValue:a,multi:!0},a),e({provide:Hn,useValue:()=>ie(a),multi:!0},a)}let c=s.providers;if(c!=null&&!o){let l=i;Wl(c,d=>{e(d,l)})}}else return!1;return a!==i&&i.providers!==void 0}function Wl(i,e){for(let t of i)Tl(t)&&(t=t.\u0275providers),Array.isArray(t)?Wl(t,e):e(t)}var mk=oe({provide:String,useValue:oe});function A0(i){return i!==null&&typeof i=="object"&&mk in i}function kk(i){return!!(i&&i.useExisting)}function vk(i){return!!(i&&i.useFactory)}function lr(i){return typeof i=="function"}var ga=new K(""),rr={},l0={},gl;function ya(){return gl===void 0&&(gl=new da),gl}var lt=class{},Tn=class extends lt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,n,a){super(),this.parent=t,this.source=n,this.scopes=a,Cl(e,r=>this.processProvider(r)),this.records.set(Vl,bi(void 0,this)),a.has("environment")&&this.records.set(lt,bi(void 0,this));let s=this.records.get(ga);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(zl,ct,{self:!0}))}retrieve(e,t){let n=Dn(t)||0;try{return this.get(e,_n,n)}catch(a){if(wi(a))return a;throw a}}destroy(){la(this),this._destroyed=!0;let e=F(null);try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),F(e)}}onDestroy(e){return la(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){la(this);let t=Lt(this),n=Qe(void 0),a;try{return e()}finally{Lt(t),Qe(n)}}get(e,t=_n,n){if(la(this),e.hasOwnProperty(c0))return e[c0](this);let a=Dn(n),s,r=Lt(this),o=Qe(void 0);try{if(!(a&4)){let l=this.records.get(e);if(l===void 0){let d=xk(e)&&fr(e);d&&this.injectableDefInScope(d)?l=bi(bl(e),rr):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,a)}let c=a&2?ya():this.parent;return t=a&8&&t===_n?null:t,c.get(e,t)}catch(c){let l=hk(c);throw l===-200||l===-201?new Z(l,null):c}finally{Qe(o),Lt(r)}}resolveInjectorInitializers(){let e=F(null),t=Lt(this),n=Qe(void 0),a;try{let s=this.get(Hn,ct,{self:!0});for(let r of s)r()}finally{Lt(t),Qe(n),F(e)}}toString(){let e=[],t=this.records;for(let n of t.keys())e.push(an(n));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Je(e);let t=lr(e)?e:Je(e&&e.provide),n=wk(e);if(!lr(e)&&e.multi===!0){let a=this.records.get(t);a||(a=bi(void 0,rr,!0),a.factory=()=>wl(a.multi),this.records.set(t,a)),t=e,a.multi.push(e)}this.records.set(t,n)}hydrate(e,t,n){let a=F(null);try{if(t.value===l0)throw Hl(an(e));return t.value===rr&&(t.value=l0,t.value=t.factory(void 0,n)),typeof t.value=="object"&&t.value&&Ck(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{F(a)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Je(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function bl(i){let e=fr(i),t=e!==null?e.factory:Ci(i);if(t!==null)return t;if(i instanceof K)throw new Z(204,!1);if(i instanceof Function)return Mk(i);throw new Z(204,!1)}function Mk(i){if(i.length>0)throw new Z(204,!1);let t=ck(i);return t!==null?()=>t.factory(i):()=>new i}function wk(i){if(A0(i))return bi(void 0,i.useValue);{let e=S0(i);return bi(e,rr)}}function S0(i,e,t){let n;if(lr(i)){let a=Je(i);return Ci(a)||bl(a)}else if(A0(i))n=()=>Je(i.useValue);else if(vk(i))n=()=>i.useFactory(...wl(i.deps||[]));else if(kk(i))n=(a,s)=>ie(Je(i.useExisting),s!==void 0&&s&8?8:void 0);else{let a=Je(i&&(i.useClass||i.provide));if(bk(i))n=()=>new a(...wl(i.deps));else return Ci(a)||bl(a)}return n}function la(i){if(i.destroyed)throw new Z(205,!1)}function bi(i,e,t=!1){return{factory:i,value:e,multi:t?[]:void 0}}function bk(i){return!!i.deps}function Ck(i){return i!==null&&typeof i=="object"&&typeof i.ngOnDestroy=="function"}function xk(i){return typeof i=="function"||typeof i=="object"&&i.ngMetadataName==="InjectionToken"}function Cl(i,e){for(let t of i)Array.isArray(t)?Cl(t,e):t&&Tl(t)?Cl(t.\u0275providers,e):e(t)}function vr(i,e){let t;i instanceof Tn?(la(i),t=i):t=new Ml(i);let n,a=Lt(t),s=Qe(void 0);try{return e()}finally{Lt(a),Qe(s)}}function E0(){return m0()!==void 0||sr()!=null}var vt=0,O=1,H=2,Pe=3,dt=4,qe=5,jn=6,Ii=7,Ae=8,qt=9,_t=10,me=11,Ai=12,$l=13,Bn=14,Ue=15,rn=16,Vn=17,Dt=18,Ut=19,Gl=20,Bt=21,Mr=22,ma=23,et=24,wr=25,zn=26,Le=27,L0=1,Xl=6,on=7,ka=8,qn=9,be=10;function Tt(i){return Array.isArray(i)&&typeof i[L0]=="object"}function Mt(i){return Array.isArray(i)&&i[L0]===!0}function Zl(i){return(i.flags&4)!==0}function cn(i){return i.componentOffset>-1}function va(i){return(i.flags&1)===1}function Un(i){return!!i.template}function Si(i){return(i[H]&512)!==0}function Wn(i){return(i[H]&256)===256}var Kl="svg",_0="math";function ht(i){for(;Array.isArray(i);)i=i[vt];return i}function Yl(i,e){return ht(e[i])}function wt(i,e){return ht(e[i.index])}function Ma(i,e){return i.data[e]}function ut(i,e){let t=e[i];return Tt(t)?t:t[vt]}function D0(i){return(i[H]&4)===4}function br(i){return(i[H]&128)===128}function T0(i){return Mt(i[Pe])}function pt(i,e){return e==null?null:i[e]}function Ql(i){i[Vn]=0}function Jl(i){i[H]&1024||(i[H]|=1024,br(i)&&ba(i))}function P0(i,e){for(;i>0;)e=e[Bn],i--;return e}function wa(i){return!!(i[H]&9216||i[et]?.dirty)}function Cr(i){i[_t].changeDetectionScheduler?.notify(8),i[H]&64&&(i[H]|=1024),wa(i)&&ba(i)}function ba(i){i[_t].changeDetectionScheduler?.notify(0);let e=sn(i);for(;e!==null&&!(e[H]&8192||(e[H]|=8192,!br(e)));)e=sn(e)}function ed(i,e){if(Wn(i))throw new Z(911,!1);i[Bt]===null&&(i[Bt]=[]),i[Bt].push(e)}function R0(i,e){if(i[Bt]===null)return;let t=i[Bt].indexOf(e);t!==-1&&i[Bt].splice(t,1)}function sn(i){let e=i[Pe];return Mt(e)?e[Pe]:e}function td(i){return i[Ii]??=[]}function nd(i){return i.cleanup??=[]}function O0(i,e,t,n){let a=td(e);a.push(t),i.firstCreatePass&&nd(i).push(n,a.length-1)}var U={lFrame:$0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var xl=!1;function F0(){return U.lFrame.elementDepthCount}function N0(){U.lFrame.elementDepthCount++}function id(){U.lFrame.elementDepthCount--}function ad(){return U.bindingsEnabled}function sd(){return U.skipHydrationRootTNode!==null}function rd(i){return U.skipHydrationRootTNode===i}function od(){U.skipHydrationRootTNode=null}function X(){return U.lFrame.lView}function je(){return U.lFrame.tView}function Ei(i){return U.lFrame.contextLView=i,i[Ae]}function Li(i){return U.lFrame.contextLView=null,i}function tt(){let i=cd();for(;i!==null&&i.type===64;)i=i.parent;return i}function cd(){return U.lFrame.currentTNode}function H0(){let i=U.lFrame,e=i.currentTNode;return i.isParent?e:e.parent}function _i(i,e){let t=U.lFrame;t.currentTNode=i,t.isParent=e}function ld(){return U.lFrame.isParent}function dd(){U.lFrame.isParent=!1}function hd(){return xl}function ud(i){let e=xl;return xl=i,e}function j0(i){return U.lFrame.bindingIndex=i}function Di(){return U.lFrame.bindingIndex++}function B0(i){let e=U.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+i,t}function V0(){return U.lFrame.inI18n}function z0(i,e){let t=U.lFrame;t.bindingIndex=t.bindingRootIndex=i,xr(e)}function q0(){return U.lFrame.currentDirectiveIndex}function xr(i){U.lFrame.currentDirectiveIndex=i}function U0(i){let e=U.lFrame.currentDirectiveIndex;return e===-1?null:i[e]}function pd(){return U.lFrame.currentQueryIndex}function Ir(i){U.lFrame.currentQueryIndex=i}function Ik(i){let e=i[O];return e.type===2?e.declTNode:e.type===1?i[qe]:null}function fd(i,e,t){if(t&4){let a=e,s=i;for(;a=a.parent,a===null&&!(t&1);)if(a=Ik(s),a===null||(s=s[Bn],a.type&10))break;if(a===null)return!1;e=a,i=s}let n=U.lFrame=W0();return n.currentTNode=e,n.lView=i,!0}function Ar(i){let e=W0(),t=i[O];U.lFrame=e,e.currentTNode=t.firstChild,e.lView=i,e.tView=t,e.contextLView=i,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function W0(){let i=U.lFrame,e=i===null?null:i.child;return e===null?$0(i):e}function $0(i){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return i!==null&&(i.child=e),e}function G0(){let i=U.lFrame;return U.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}var gd=G0;function Sr(){let i=G0();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function X0(i){return(U.lFrame.contextLView=P0(i,U.lFrame.contextLView))[Ae]}function ln(){return U.lFrame.selectedIndex}function dn(i){U.lFrame.selectedIndex=i}function yd(){let i=U.lFrame;return Ma(i.tView,i.selectedIndex)}function Er(){U.lFrame.currentNamespace=Kl}function Z0(){return U.lFrame.currentNamespace}var K0=!0;function Lr(){return K0}function _r(i){K0=i}function Il(i,e=null,t=null,n){let a=Y0(i,e,t,n);return a.resolveInjectorInitializers(),a}function Y0(i,e=null,t=null,n,a=new Set){let s=[t||ct,x0(i)];return n=n||(typeof i=="object"?void 0:an(i)),new Tn(s,e||ya(),n||null,a)}var Pn=class i{static THROW_IF_NOT_FOUND=_n;static NULL=new da;static create(e,t){if(Array.isArray(e))return Il({name:""},t,e,"");{let n=e.name??"";return Il({name:n},e.parent,e.providers,n)}}static \u0275prov=le({token:i,providedIn:"any",factory:()=>ie(Vl)});static __NG_ELEMENT_ID__=-1},bt=new K(""),Dr=(()=>{class i{static __NG_ELEMENT_ID__=Ak;static __NG_ENV_ID__=t=>t}return i})(),Al=class extends Dr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Wn(this._lView)}onDestroy(e){let t=this._lView;return ed(t,e),()=>R0(t,e)}};function Ak(){return new Al(X())}var md=!1,Q0=new K(""),$n=(()=>{class i{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Sn(!1);debugTaskTracker=G(Q0,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ie(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),this.debugTaskTracker?.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.debugTaskTracker?.remove(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=le({token:i,providedIn:"root",factory:()=>new i})}return i})(),Sl=class extends kt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,E0()&&(this.destroyRef=G(Dr,{optional:!0})??void 0,this.pendingTasks=G($n,{optional:!0})??void 0)}emit(e){let t=F(null);try{super.next(e)}finally{F(t)}}subscribe(e,t,n){let a=e,s=t||(()=>null),r=n;if(e&&typeof e=="object"){let c=e;a=c.next?.bind(c),s=c.error?.bind(c),r=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),a&&(a=this.wrapInTimeout(a)),r&&(r=this.wrapInTimeout(r)));let o=super.subscribe({next:a,error:s,complete:r});return e instanceof De&&e.add(o),o}wrapInTimeout(e){return t=>{let n=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{n!==void 0&&this.pendingTasks?.remove(n)}})}}},Te=Sl;function dr(...i){}function kd(i){let e,t;function n(){i=dr;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{i(),n()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{i(),n()})),()=>n()}function J0(i){return queueMicrotask(()=>i()),()=>{i=dr}}var vd="isAngularZone",ha=vd+"_ID",Sk=0,ye=class i{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Te(!1);onMicrotaskEmpty=new Te(!1);onStable=new Te(!1);onError=new Te(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:a=!1,scheduleInRootZone:s=md}=e;if(typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!a&&n,r.shouldCoalesceRunChangeDetection=a,r.callbackScheduled=!1,r.scheduleInRootZone=s,_k(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(vd)===!0}static assertInAngularZone(){if(!i.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(i.isInAngularZone())throw new Z(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,a){let s=this._inner,r=s.scheduleEventTask("NgZoneEvent: "+a,e,Ek,dr,dr);try{return s.runTask(r,t,n)}finally{s.cancelTask(r)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}},Ek={};function Md(i){if(i._nesting==0&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Lk(i){if(i.isCheckStableRunning||i.callbackScheduled)return;i.callbackScheduled=!0;function e(){kd(()=>{i.callbackScheduled=!1,El(i),i.isCheckStableRunning=!0,Md(i),i.isCheckStableRunning=!1})}i.scheduleInRootZone?Zone.root.run(()=>{e()}):i._outer.run(()=>{e()}),El(i)}function _k(i){let e=()=>{Lk(i)},t=Sk++;i._inner=i._inner.fork({name:"angular",properties:{[vd]:!0,[ha]:t,[ha+t]:!0},onInvokeTask:(n,a,s,r,o,c)=>{if(Dk(c))return n.invokeTask(s,r,o,c);try{return d0(i),n.invokeTask(s,r,o,c)}finally{(i.shouldCoalesceEventChangeDetection&&r.type==="eventTask"||i.shouldCoalesceRunChangeDetection)&&e(),h0(i)}},onInvoke:(n,a,s,r,o,c,l)=>{try{return d0(i),n.invoke(s,r,o,c,l)}finally{i.shouldCoalesceRunChangeDetection&&!i.callbackScheduled&&!Tk(c)&&e(),h0(i)}},onHasTask:(n,a,s,r)=>{n.hasTask(s,r),a===s&&(r.change=="microTask"?(i._hasPendingMicrotasks=r.microTask,El(i),Md(i)):r.change=="macroTask"&&(i.hasPendingMacrotasks=r.macroTask))},onHandleError:(n,a,s,r)=>(n.handleError(s,r),i.runOutsideAngular(()=>i.onError.emit(r)),!1)})}function El(i){i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&i.callbackScheduled===!0?i.hasPendingMicrotasks=!0:i.hasPendingMicrotasks=!1}function d0(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function h0(i){i._nesting--,Md(i)}var ua=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Te;onMicrotaskEmpty=new Te;onStable=new Te;onError=new Te;run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,a){return e.apply(t,n)}};function Dk(i){return e2(i,"__ignore_ng_zone__")}function Tk(i){return e2(i,"__scheduler_tick__")}function e2(i,e){return!Array.isArray(i)||i.length!==1?!1:i[0]?.data?.[e]===!0}var Vt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},hn=new K("",{factory:()=>{let i=G(ye),e=G(lt),t;return n=>{i.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw n}):(t??=e.get(Vt),t.handleError(n))})}}}),t2={provide:Hn,useValue:()=>{let i=G(Vt,{optional:!0})},multi:!0};var Rn=class{},Ti=new K("",{factory:()=>!0});var Tr=new K("");var wd=(()=>{class i{static \u0275prov=le({token:i,providedIn:"root",factory:()=>new Ll})}return i})(),Ll=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,n=this.queues.get(t);n.has(e)&&(n.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let n=this.queues.get(t);n.has(e)||n.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,n]of this.queues)t===null?e||=this.flushQueue(n):e||=t.run(()=>this.flushQueue(n));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let n of e)n.dirty&&(this.dirtyEffectCount--,t=!0,n.run());return t}},_l=class{[fi];constructor(e){this[fi]=e}destroy(){this[fi].destroy()}};function Pa(i){return{toString:i}.toString()}var Pr="__parameters__";function Wk(i){return function(...t){if(i){let n=i(...t);for(let a in n)this[a]=n[a]}}}function $k(i,e,t){return Pa(()=>{let n=Wk(e);function a(...s){if(this instanceof a)return n.apply(this,s),this;let r=new a(...s);return o.annotation=r,o;function o(c,l,d){let h=c.hasOwnProperty(Pr)?c[Pr]:Object.defineProperty(c,Pr,{value:[]})[Pr];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(r),c}}return a.prototype.ngMetadataName=i,a.annotationCls=a,a})}var Jd=k0($k("Optional"),8);function Gk(i){return typeof i=="function"}function _2(i,e,t,n){e!==null?e.applyValueToInputSignal(e,n):i[t]=n}var Br=class{previousValue;currentValue;firstChange;constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}},Hi=(()=>{let i=()=>D2;return i.ngInherit=!0,i})();function D2(i){return i.type.prototype.ngOnChanges&&(i.setInput=Zk),Xk}function Xk(){let i=P2(this),e=i?.current;if(e){let t=i.previous;if(t===Nn)i.previous=e;else for(let n in e)t[n]=e[n];i.current=null,this.ngOnChanges(e)}}function Zk(i,e,t,n,a){let s=this.declaredInputs[n],r=P2(i)||Kk(i,{previous:Nn,current:null}),o=r.current||(r.current={}),c=r.previous,l=c[s];o[s]=new Br(l&&l.currentValue,t,c===Nn),_2(i,e,a,t)}var T2="__ngSimpleChanges__";function P2(i){return i[T2]||null}function Kk(i,e){return i[T2]=e}var n2=[];var ce=function(i,e=null,t){for(let n=0;n<n2.length;n++){let a=n2[n];a(i,e,t)}},te=(function(i){return i[i.TemplateCreateStart=0]="TemplateCreateStart",i[i.TemplateCreateEnd=1]="TemplateCreateEnd",i[i.TemplateUpdateStart=2]="TemplateUpdateStart",i[i.TemplateUpdateEnd=3]="TemplateUpdateEnd",i[i.LifecycleHookStart=4]="LifecycleHookStart",i[i.LifecycleHookEnd=5]="LifecycleHookEnd",i[i.OutputStart=6]="OutputStart",i[i.OutputEnd=7]="OutputEnd",i[i.BootstrapApplicationStart=8]="BootstrapApplicationStart",i[i.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",i[i.BootstrapComponentStart=10]="BootstrapComponentStart",i[i.BootstrapComponentEnd=11]="BootstrapComponentEnd",i[i.ChangeDetectionStart=12]="ChangeDetectionStart",i[i.ChangeDetectionEnd=13]="ChangeDetectionEnd",i[i.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",i[i.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",i[i.AfterRenderHooksStart=16]="AfterRenderHooksStart",i[i.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",i[i.ComponentStart=18]="ComponentStart",i[i.ComponentEnd=19]="ComponentEnd",i[i.DeferBlockStateStart=20]="DeferBlockStateStart",i[i.DeferBlockStateEnd=21]="DeferBlockStateEnd",i[i.DynamicComponentStart=22]="DynamicComponentStart",i[i.DynamicComponentEnd=23]="DynamicComponentEnd",i[i.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",i[i.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",i})(te||{});function Yk(i,e,t){let{ngOnChanges:n,ngOnInit:a,ngDoCheck:s}=e.type.prototype;if(n){let r=D2(e);(t.preOrderHooks??=[]).push(i,r),(t.preOrderCheckHooks??=[]).push(i,r)}a&&(t.preOrderHooks??=[]).push(0-i,a),s&&((t.preOrderHooks??=[]).push(i,s),(t.preOrderCheckHooks??=[]).push(i,s))}function R2(i,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){let s=i.data[t].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:o,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;r&&(i.contentHooks??=[]).push(-t,r),o&&((i.contentHooks??=[]).push(t,o),(i.contentCheckHooks??=[]).push(t,o)),c&&(i.viewHooks??=[]).push(-t,c),l&&((i.viewHooks??=[]).push(t,l),(i.viewCheckHooks??=[]).push(t,l)),d!=null&&(i.destroyHooks??=[]).push(t,d)}}function Or(i,e,t){O2(i,e,3,t)}function Fr(i,e,t,n){(i[H]&3)===t&&O2(i,e,t,n)}function bd(i,e){let t=i[H];(t&3)===e&&(t&=16383,t+=1,i[H]=t)}function O2(i,e,t,n){let a=n!==void 0?i[Vn]&65535:0,s=n??-1,r=e.length-1,o=0;for(let c=a;c<r;c++)if(typeof e[c+1]=="number"){if(o=e[c],n!=null&&o>=n)break}else e[c]<0&&(i[Vn]+=65536),(o<s||s==-1)&&(Qk(i,t,e,c),i[Vn]=(i[Vn]&4294901760)+c+2),c++}function i2(i,e){ce(te.LifecycleHookStart,i,e);let t=F(null);try{e.call(i)}finally{F(t),ce(te.LifecycleHookEnd,i,e)}}function Qk(i,e,t,n){let a=t[n]<0,s=t[n+1],r=a?-t[n]:t[n],o=i[r];a?i[H]>>14<i[Vn]>>16&&(i[H]&3)===e&&(i[H]+=16384,i2(o,s)):i2(o,s)}var Ri=-1,Ia=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,n,a){this.factory=e,this.name=a,this.canSeeViewProviders=t,this.injectImpl=n}};function Jk(i){return(i.flags&8)!==0}function ev(i){return(i.flags&16)!==0}function tv(i,e,t){let n=0;for(;n<t.length;){let a=t[n];if(typeof a=="number"){if(a!==0)break;n++;let s=t[n++],r=t[n++],o=t[n++];i.setAttribute(e,r,o,s)}else{let s=a,r=t[++n];iv(s)?i.setProperty(e,s,r):i.setAttribute(e,s,r),n++}}return n}function nv(i){return i===3||i===4||i===6}function iv(i){return i.charCodeAt(0)===64}function Jr(i,e){if(!(e===null||e.length===0))if(i===null||i.length===0)i=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){let a=e[n];typeof a=="number"?t=a:t===0||(t===-1||t===2?a2(i,t,a,null,e[++n]):a2(i,t,a,null,null))}}return i}function a2(i,e,t,n,a){let s=0,r=i.length;if(e===-1)r=-1;else for(;s<i.length;){let o=i[s++];if(typeof o=="number"){if(o===e){r=-1;break}else if(o>e){r=s-1;break}}}for(;s<i.length;){let o=i[s];if(typeof o=="number")break;if(o===t){a!==null&&(i[s+1]=a);return}s++,a!==null&&s++}r!==-1&&(i.splice(r,0,e),s=r+1),i.splice(s++,0,t),a!==null&&i.splice(s++,0,a)}function F2(i){return i!==Ri}function Vr(i){return i&32767}function av(i){return i>>16}function zr(i,e){let t=av(i),n=e;for(;t>0;)n=n[Bn],t--;return n}var Ld=!0;function s2(i){let e=Ld;return Ld=i,e}var sv=256,N2=sv-1,H2=5,rv=0,Pt={};function ov(i,e,t){let n;typeof t=="string"?n=t.charCodeAt(0)||0:t.hasOwnProperty(On)&&(n=t[On]),n==null&&(n=t[On]=rv++);let a=n&N2,s=1<<a;e.data[i+(a>>H2)]|=s}function j2(i,e){let t=B2(i,e);if(t!==-1)return t;let n=e[O];n.firstCreatePass&&(i.injectorIndex=e.length,Cd(n.data,i),Cd(e,null),Cd(n.blueprint,null));let a=eh(i,e),s=i.injectorIndex;if(F2(a)){let r=Vr(a),o=zr(a,e),c=o[O].data;for(let l=0;l<8;l++)e[s+l]=o[r+l]|c[r+l]}return e[s+8]=a,s}function Cd(i,e){i.push(0,0,0,0,0,0,0,0,e)}function B2(i,e){return i.injectorIndex===-1||i.parent&&i.parent.injectorIndex===i.injectorIndex||e[i.injectorIndex+8]===null?-1:i.injectorIndex}function eh(i,e){if(i.parent&&i.parent.injectorIndex!==-1)return i.parent.injectorIndex;let t=0,n=null,a=e;for(;a!==null;){if(n=W2(a),n===null)return Ri;if(t++,a=a[Bn],n.injectorIndex!==-1)return n.injectorIndex|t<<16}return Ri}function cv(i,e,t){ov(i,e,t)}function V2(i,e,t){if(t&8||i!==void 0)return i;yr(e,"NodeInjector")}function z2(i,e,t,n){if(t&8&&n===void 0&&(n=null),(t&3)===0){let a=i[qt],s=Qe(void 0);try{return a?a.get(e,n,t&8):jl(e,n,t&8)}finally{Qe(s)}}return V2(n,e,t)}function q2(i,e,t,n=0,a){if(i!==null){if(e[H]&2048&&!(n&2)){let r=uv(i,e,t,n,Pt);if(r!==Pt)return r}let s=U2(i,e,t,n,Pt);if(s!==Pt)return s}return z2(e,t,n,a)}function U2(i,e,t,n,a){let s=dv(t);if(typeof s=="function"){if(!fd(e,i,n))return n&1?V2(a,t,n):z2(e,t,n,a);try{let r;if(r=s(n),r==null&&!(n&8))yr(t);else return r}finally{gd()}}else if(typeof s=="number"){let r=null,o=B2(i,e),c=Ri,l=n&1?e[Ue][qe]:null;for((o===-1||n&4)&&(c=o===-1?eh(i,e):e[o+8],c===Ri||!o2(n,!1)?o=-1:(r=e[O],o=Vr(c),e=zr(c,e)));o!==-1;){let d=e[O];if(r2(s,o,d.data)){let h=lv(o,e,t,r,n,l);if(h!==Pt)return h}c=e[o+8],c!==Ri&&o2(n,e[O].data[o+8]===l)&&r2(s,o,e)?(r=d,o=Vr(c),e=zr(c,e)):o=-1}}return a}function lv(i,e,t,n,a,s){let r=e[O],o=r.data[i+8],c=n==null?cn(o)&&Ld:n!=r&&(o.type&3)!==0,l=a&1&&s===o,d=Nr(o,r,t,c,l);return d!==null?qr(e,r,d,o,a):Pt}function Nr(i,e,t,n,a){let s=i.providerIndexes,r=e.data,o=s&1048575,c=i.directiveStart,l=i.directiveEnd,d=s>>20,h=n?o:o+d,u=a?o+d:l;for(let p=h;p<u;p++){let f=r[p];if(p<c&&t===f||p>=c&&f.type===t)return p}if(a){let p=r[c];if(p&&Un(p)&&p.type===t)return c}return null}function qr(i,e,t,n,a){let s=i[t],r=e.data;if(s instanceof Ia){let o=s;if(o.resolving){let p=f0(r[t]);throw Hl(p)}let c=s2(o.canSeeViewProviders);o.resolving=!0;let l=r[t].type||r[t],d,h=o.injectImpl?Qe(o.injectImpl):null,u=fd(i,n,0);try{s=i[t]=o.factory(void 0,a,r,i,n),e.firstCreatePass&&t>=n.directiveStart&&Yk(t,r[t],e)}finally{h!==null&&Qe(h),s2(c),o.resolving=!1,gd()}}return s}function dv(i){if(typeof i=="string")return i.charCodeAt(0)||0;let e=i.hasOwnProperty(On)?i[On]:void 0;return typeof e=="number"?e>=0?e&N2:hv:e}function r2(i,e,t){let n=1<<i;return!!(t[e+(i>>H2)]&n)}function o2(i,e){return!(i&2)&&!(i&1&&e)}var Gn=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return q2(this._tNode,this._lView,e,Dn(n),t)}};function hv(){return new Gn(tt(),X())}function uv(i,e,t,n,a){let s=i,r=e;for(;s!==null&&r!==null&&r[H]&2048&&!Si(r);){let o=U2(s,r,t,n|2,Pt);if(o!==Pt)return o;let c=s.parent;if(!c){let l=r[Gl];if(l){let d=l.get(t,Pt,n);if(d!==Pt)return d}c=W2(r),r=r[Bn]}s=c}return a}function W2(i){let e=i[O],t=e.type;return t===2?e.declTNode:t===1?i[qe]:null}function pv(){return ji(tt(),X())}function ji(i,e){return new ft(wt(i,e))}var ft=(()=>{class i{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=pv}return i})();function fv(i){return i instanceof ft?i.nativeElement:i}function gv(){return this._results[Symbol.iterator]()}var Ur=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new kt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let n=M0(e);(this._changesDetected=!v0(this._results,n,t))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=gv};function $2(i){return(i.flags&128)===128}var th=(function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i})(th||{}),G2=new Map,yv=0;function mv(){return yv++}function kv(i){G2.set(i[Ut],i)}function _d(i){G2.delete(i[Ut])}var c2="__ngContext__";function Oi(i,e){Tt(e)?(i[c2]=e[Ut],kv(e)):i[c2]=e}function X2(i){return K2(i[Ai])}function Z2(i){return K2(i[dt])}function K2(i){for(;i!==null&&!Mt(i);)i=i[dt];return i}var vv;function nh(i){vv=i}var eo=new K("",{factory:()=>Mv}),Mv="ng";var to=new K(""),Ra=new K("",{providedIn:"platform",factory:()=>"unknown"});var no=new K("",{factory:()=>G(bt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Y2="r";var Q2="di";var J2=!1,ef=new K("",{factory:()=>J2});var wv=(i,e,t,n)=>{};function bv(i,e,t,n){wv(i,e,t,n)}function io(i){return(i.flags&32)===32}var Cv=()=>null;function tf(i,e,t=!1){return Cv(i,e,t)}function nf(i,e){let t=i.contentQueries;if(t!==null){let n=F(null);try{for(let a=0;a<t.length;a+=2){let s=t[a],r=t[a+1];if(r!==-1){let o=i.data[r];Ir(s),o.contentQueries(2,e[r],r)}}}finally{F(n)}}}function Dd(i,e,t){Ir(0);let n=F(null);try{e(i,t)}finally{F(n)}}function af(i,e,t){if(Zl(e)){let n=F(null);try{let a=e.directiveStart,s=e.directiveEnd;for(let r=a;r<s;r++){let o=i.data[r];if(o.contentQueries){let c=t[r];o.contentQueries(1,c,r)}}}finally{F(n)}}}var xt=(function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i[i.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",i})(xt||{});var Wr=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hr})`}};function ih(i){return i instanceof Wr?i.changingThisBreaksApplicationSecurity:i}function sf(i,e){let t=rf(i);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${hr})`)}return t===e}function rf(i){return i instanceof Wr&&i.getTypeName()||null}var xv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function of(i){return i=String(i),i.match(xv)?i:"unsafe:"+i}function Iv(i,e){return i.createText(e)}function Av(i,e,t){i.setValue(e,t)}function cf(i,e,t){return i.createElement(e,t)}function $r(i,e,t,n,a){i.insertBefore(e,t,n,a)}function lf(i,e,t){i.appendChild(e,t)}function l2(i,e,t,n,a){n!==null?$r(i,e,t,n,a):lf(i,e,t)}function df(i,e,t,n){i.removeChild(null,e,t,n)}function Sv(i,e,t){i.setAttribute(e,"style",t)}function Ev(i,e,t){t===""?i.removeAttribute(e,"class"):i.setAttribute(e,"class",t)}function hf(i,e,t){let{mergedAttrs:n,classes:a,styles:s}=t;n!==null&&tv(i,e,n),a!==null&&Ev(i,e,a),s!==null&&Sv(i,e,s)}var ah=(function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i})(ah||{});function Bi(i){let e=Lv();return e?e.sanitize(ah.URL,i)||"":sf(i,"URL")?ih(i):of(pa(i))}function Lv(){let i=X();return i&&i[_t].sanitizer}function sh(i){return i.ownerDocument.defaultView}function _v(i,e,t){let n=i.length;for(;;){let a=i.indexOf(e,t);if(a===-1)return a;if(a===0||i.charCodeAt(a-1)<=32){let s=e.length;if(a+s===n||i.charCodeAt(a+s)<=32)return a}t=a+1}}var uf="ng-template";function Dv(i,e,t,n){let a=0;if(n){for(;a<e.length&&typeof e[a]=="string";a+=2)if(e[a]==="class"&&_v(e[a+1].toLowerCase(),t,0)!==-1)return!0}else if(rh(i))return!1;if(a=e.indexOf(1,a),a>-1){let s;for(;++a<e.length&&typeof(s=e[a])=="string";)if(s.toLowerCase()===t)return!0}return!1}function rh(i){return i.type===4&&i.value!==uf}function Tv(i,e,t){let n=i.type===4&&!t?uf:i.value;return e===n}function Pv(i,e,t){let n=4,a=i.attrs,s=a!==null?Fv(a):0,r=!1;for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number"){if(!r&&!Ct(n)&&!Ct(c))return!1;if(r&&Ct(c))continue;r=!1,n=c|n&1;continue}if(!r)if(n&4){if(n=2|n&1,c!==""&&!Tv(i,c,t)||c===""&&e.length===1){if(Ct(n))return!1;r=!0}}else if(n&8){if(a===null||!Dv(i,a,c,t)){if(Ct(n))return!1;r=!0}}else{let l=e[++o],d=Rv(c,a,rh(i),t);if(d===-1){if(Ct(n))return!1;r=!0;continue}if(l!==""){let h;if(d>s?h="":h=a[d+1].toLowerCase(),n&2&&l!==h){if(Ct(n))return!1;r=!0}}}}return Ct(n)||r}function Ct(i){return(i&1)===0}function Rv(i,e,t,n){if(e===null)return-1;let a=0;if(n||!t){let s=!1;for(;a<e.length;){let r=e[a];if(r===i)return a;if(r===3||r===6)s=!0;else if(r===1||r===2){let o=e[++a];for(;typeof o=="string";)o=e[++a];continue}else{if(r===4)break;if(r===0){a+=4;continue}}a+=s?1:2}return-1}else return Nv(e,i)}function pf(i,e,t=!1){for(let n=0;n<e.length;n++)if(Pv(i,e[n],t))return!0;return!1}function Ov(i){let e=i.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function Fv(i){for(let e=0;e<i.length;e++){let t=i[e];if(nv(t))return e}return i.length}function Nv(i,e){let t=i.indexOf(4);if(t>-1)for(t++;t<i.length;){let n=i[t];if(typeof n=="number")return-1;if(n===e)return t;t++}return-1}function Hv(i,e){e:for(let t=0;t<e.length;t++){let n=e[t];if(i.length===n.length){for(let a=0;a<i.length;a++)if(i[a]!==n[a])continue e;return!0}}return!1}function d2(i,e){return i?":not("+e.trim()+")":e}function jv(i){let e=i[0],t=1,n=2,a="",s=!1;for(;t<i.length;){let r=i[t];if(typeof r=="string")if(n&2){let o=i[++t];a+="["+r+(o.length>0?'="'+o+'"':"")+"]"}else n&8?a+="."+r:n&4&&(a+=" "+r);else a!==""&&!Ct(r)&&(e+=d2(s,a),a=""),n=r,s=s||!Ct(n);t++}return a!==""&&(e+=d2(s,a)),e}function Bv(i){return i.map(jv).join(",")}function Vv(i){let e=[],t=[],n=1,a=2;for(;n<i.length;){let s=i[n];if(typeof s=="string")a===2?s!==""&&e.push(s,i[++n]):a===8&&t.push(s);else{if(!Ct(a))break;a=s}n++}return t.length&&e.push(1,...t),e}var Wt={};function oh(i,e,t,n,a,s,r,o,c,l,d){let h=Le+n,u=h+a,p=zv(h,u),f=typeof l=="function"?l():l;return p[O]={type:i,blueprint:p,template:t,queries:null,viewQuery:o,declTNode:e,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:u,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof r=="function"?r():r,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1,ssrId:d}}function zv(i,e){let t=[];for(let n=0;n<e;n++)t.push(n<i?null:Wt);return t}function qv(i){let e=i.tView;return e===null||e.incompleteFirstPass?i.tView=oh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):e}function ch(i,e,t,n,a,s,r,o,c,l,d){let h=e.blueprint.slice();return h[vt]=a,h[H]=n|4|128|8|64|1024,(l!==null||i&&i[H]&2048)&&(h[H]|=2048),Ql(h),h[Pe]=h[Bn]=i,h[Ae]=t,h[_t]=r||i&&i[_t],h[me]=o||i&&i[me],h[qt]=c||i&&i[qt]||null,h[qe]=s,h[Ut]=mv(),h[jn]=d,h[Gl]=l,h[Ue]=e.type==2?i[Ue]:h,h}function Uv(i,e,t){let n=wt(e,i),a=qv(t),s=i[_t].rendererFactory,r=lh(i,ch(i,a,null,ff(t),n,e,null,s.createRenderer(n,t),null,null,null));return i[e.index]=r}function ff(i){let e=16;return i.signals?e=4096:i.onPush&&(e=64),e}function gf(i,e,t,n){if(t===0)return-1;let a=e.length;for(let s=0;s<t;s++)e.push(n),i.blueprint.push(n),i.data.push(null);return a}function lh(i,e){return i[Ai]?i[$l][dt]=e:i[Ai]=e,i[$l]=e,e}function ge(i=1){yf(je(),X(),ln()+i,!1)}function yf(i,e,t,n){if(!n)if((e[H]&3)===3){let s=i.preOrderCheckHooks;s!==null&&Or(e,s,t)}else{let s=i.preOrderHooks;s!==null&&Fr(e,s,0,t)}dn(t)}var ao=(function(i){return i[i.None=0]="None",i[i.SignalBased=1]="SignalBased",i[i.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",i})(ao||{});function Td(i,e,t,n){let a=F(null);try{let[s,r,o]=i.inputs[t],c=null;(r&ao.SignalBased)!==0&&(c=e[s][fi]),c!==null&&c.transformFn!==void 0?n=c.transformFn(n):o!==null&&(n=o.call(e,n)),i.setInput!==null?i.setInput(e,c,n,t,s):_2(e,c,s,n)}finally{F(a)}}var Rt=(function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i})(Rt||{}),Wv;function dh(i,e){return Wv(i,e)}var Xn=new Set,hh=(function(i){return i[i.CHANGE_DETECTION=0]="CHANGE_DETECTION",i[i.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",i})(hh||{}),Oa=new K(""),h2=new Set;function Qn(i){h2.has(i)||(h2.add(i),performance?.mark?.("mark_feature_usage",{detail:{feature:i}}))}var mf=(()=>{class i{impl=null;execute(){this.impl?.execute()}static \u0275prov=le({token:i,providedIn:"root",factory:()=>new i})}return i})();var kf=new K("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:G(lt)})});function vf(i,e,t){let n=i.get(kf);if(Array.isArray(e))for(let a of e)n.queue.add(a),t?.detachedLeaveAnimationFns?.push(a);else n.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);n.scheduler&&n.scheduler(i)}function $v(i,e){let t=i.get(kf);if(e.detachedLeaveAnimationFns){for(let n of e.detachedLeaveAnimationFns)t.queue.delete(n);e.detachedLeaveAnimationFns=void 0}}function Gv(i,e){for(let[t,n]of e)vf(i,n.animateFns)}function u2(i,e,t,n){let a=i?.[zn]?.enter;e!==null&&a&&a.has(t.index)&&Gv(n,a)}function Pi(i,e,t,n,a,s,r,o){if(a!=null){let c,l=!1;Mt(a)?c=a:Tt(a)&&(l=!0,a=a[vt]);let d=ht(a);i===0&&n!==null?(u2(o,n,s,t),r==null?lf(e,n,d):$r(e,n,d,r||null,!0)):i===1&&n!==null?(u2(o,n,s,t),$r(e,n,d,r||null,!0)):i===2?p2(o,s,t,h=>{df(e,d,l,h)}):i===3&&p2(o,s,t,()=>{e.destroyNode(d)}),c!=null&&a4(e,i,t,c,s,n,r)}}function Xv(i,e){Mf(i,e),e[vt]=null,e[qe]=null}function Zv(i,e,t,n,a,s){n[vt]=a,n[qe]=e,ro(i,n,t,1,a,s)}function Mf(i,e){e[_t].changeDetectionScheduler?.notify(9),ro(i,e,e[me],2,null,null)}function Kv(i){let e=i[Ai];if(!e)return xd(i[O],i);for(;e;){let t=null;if(Tt(e))t=e[Ai];else{let n=e[be];n&&(t=n)}if(!t){for(;e&&!e[dt]&&e!==i;)Tt(e)&&xd(e[O],e),e=e[Pe];e===null&&(e=i),Tt(e)&&xd(e[O],e),t=e&&e[dt]}e=t}}function uh(i,e){let t=i[qn],n=t.indexOf(e);t.splice(n,1)}function so(i,e){if(Wn(e))return;let t=e[me];t.destroyNode&&ro(i,e,t,3,null,null),Kv(e)}function xd(i,e){if(Wn(e))return;let t=F(null);try{e[H]&=-129,e[H]|=256,e[et]&&Fs(e[et]),Jv(i,e),Qv(i,e),e[O].type===1&&e[me].destroy();let n=e[rn];if(n!==null&&Mt(e[Pe])){n!==e[Pe]&&uh(n,e);let a=e[Dt];a!==null&&a.detachView(i)}_d(e)}finally{F(t)}}function p2(i,e,t,n){let a=i?.[zn];if(a==null||a.leave==null||!a.leave.has(e.index))return n(!1);i&&Xn.add(i[Ut]),vf(t,()=>{if(a.leave&&a.leave.has(e.index)){let r=a.leave.get(e.index),o=[];if(r){for(let c=0;c<r.animateFns.length;c++){let l=r.animateFns[c],{promise:d}=l();o.push(d)}a.detachedLeaveAnimationFns=void 0}a.running=Promise.allSettled(o),Yv(i,n)}else i&&Xn.delete(i[Ut]),n(!1)},a)}function Yv(i,e){let t=i[zn]?.running;if(t){t.then(()=>{i[zn].running=void 0,Xn.delete(i[Ut]),e(!0)});return}e(!1)}function Qv(i,e){let t=i.cleanup,n=e[Ii];if(t!==null)for(let r=0;r<t.length-1;r+=2)if(typeof t[r]=="string"){let o=t[r+3];o>=0?n[o]():n[-o].unsubscribe(),r+=2}else{let o=n[t[r+1]];t[r].call(o)}n!==null&&(e[Ii]=null);let a=e[Bt];if(a!==null){e[Bt]=null;for(let r=0;r<a.length;r++){let o=a[r];o()}}let s=e[ma];if(s!==null){e[ma]=null;for(let r of s)r.destroy()}}function Jv(i,e){let t;if(i!=null&&(t=i.destroyHooks)!=null)for(let n=0;n<t.length;n+=2){let a=e[t[n]];if(!(a instanceof Ia)){let s=t[n+1];if(Array.isArray(s))for(let r=0;r<s.length;r+=2){let o=a[s[r]],c=s[r+1];ce(te.LifecycleHookStart,o,c);try{c.call(o)}finally{ce(te.LifecycleHookEnd,o,c)}}else{ce(te.LifecycleHookStart,a,s);try{s.call(a)}finally{ce(te.LifecycleHookEnd,a,s)}}}}}function wf(i,e,t){return e4(i,e.parent,t)}function e4(i,e,t){let n=e;for(;n!==null&&n.type&168;)e=n,n=e.parent;if(n===null)return t[vt];if(cn(n)){let{encapsulation:a}=i.data[n.directiveStart+n.componentOffset];if(a===xt.None||a===xt.Emulated)return null}return wt(n,t)}function bf(i,e,t){return n4(i,e,t)}function t4(i,e,t){return i.type&40?wt(i,t):null}var n4=t4,f2;function ph(i,e,t,n){let a=wf(i,n,e),s=e[me],r=n.parent||e[qe],o=bf(r,n,e);if(a!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)l2(s,a,t[c],o,!1);else l2(s,a,t,o,!1);f2!==void 0&&f2(s,n,e,t,a)}function Ca(i,e){if(e!==null){let t=e.type;if(t&3)return wt(e,i);if(t&4)return Pd(-1,i[e.index]);if(t&8){let n=e.child;if(n!==null)return Ca(i,n);{let a=i[e.index];return Mt(a)?Pd(-1,a):ht(a)}}else{if(t&128)return Ca(i,e.next);if(t&32)return dh(e,i)()||ht(i[e.index]);{let n=Cf(i,e);if(n!==null){if(Array.isArray(n))return n[0];let a=sn(i[Ue]);return Ca(a,n)}else return Ca(i,e.next)}}}return null}function Cf(i,e){if(e!==null){let n=i[Ue][qe],a=e.projection;return n.projection[a]}return null}function Pd(i,e){let t=be+i+1;if(t<e.length){let n=e[t],a=n[O].firstChild;if(a!==null)return Ca(n,a)}return e[on]}function fh(i,e,t,n,a,s,r){for(;t!=null;){let o=n[qt];if(t.type===128){t=t.next;continue}let c=n[t.index],l=t.type;if(r&&e===0&&(c&&Oi(ht(c),n),t.flags|=2),!io(t))if(l&8)fh(i,e,t.child,n,a,s,!1),Pi(e,i,o,a,c,t,s,n);else if(l&32){let d=dh(t,n),h;for(;h=d();)Pi(e,i,o,a,h,t,s,n);Pi(e,i,o,a,c,t,s,n)}else l&16?xf(i,e,n,t,a,s):Pi(e,i,o,a,c,t,s,n);t=r?t.projectionNext:t.next}}function ro(i,e,t,n,a,s){fh(t,n,i.firstChild,e,a,s,!1)}function i4(i,e,t){let n=e[me],a=wf(i,t,e),s=t.parent||e[qe],r=bf(s,t,e);xf(n,0,e,t,a,r)}function xf(i,e,t,n,a,s){let r=t[Ue],c=r[qe].projection[n.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Pi(e,i,t[qt],a,d,n,s,t)}else{let l=c,d=r[Pe];$2(n)&&(l.flags|=128),fh(i,e,l,d,a,s,!0)}}function a4(i,e,t,n,a,s,r){let o=n[on],c=ht(n);o!==c&&Pi(e,i,t,s,o,a,r);for(let l=be;l<n.length;l++){let d=n[l];ro(d[O],d,i,e,s,o)}}function s4(i,e,t,n,a){if(e)a?i.addClass(t,n):i.removeClass(t,n);else{let s=n.indexOf("-")===-1?void 0:Rt.DashCase;a==null?i.removeStyle(t,n,s):(typeof a=="string"&&a.endsWith("!important")&&(a=a.slice(0,-10),s|=Rt.Important),i.setStyle(t,n,a,s))}}function If(i,e,t,n,a){let s=ln(),r=n&2;try{dn(-1),r&&e.length>Le&&yf(i,e,Le,!1);let o=r?te.TemplateUpdateStart:te.TemplateCreateStart;ce(o,a,t),t(n,a)}finally{dn(s);let o=r?te.TemplateUpdateEnd:te.TemplateCreateEnd;ce(o,a,t)}}function gh(i,e,t){p4(i,e,t),(t.flags&64)===64&&f4(i,e,t)}function oo(i,e,t=wt){let n=e.localNames;if(n!==null){let a=e.index+1;for(let s=0;s<n.length;s+=2){let r=n[s+1],o=r===-1?t(e,i):i[r];i[a++]=o}}}function r4(i,e,t,n){let s=n.get(ef,J2)||t===xt.ShadowDom||t===xt.ExperimentalIsolatedShadowDom,r=i.selectRootElement(e,s);return o4(r),r}function o4(i){c4(i)}var c4=()=>null;function l4(i){return i==="class"?"className":i==="for"?"htmlFor":i==="formaction"?"formAction":i==="innerHtml"?"innerHTML":i==="readonly"?"readOnly":i==="tabindex"?"tabIndex":i}function d4(i,e,t,n,a,s){let r=e[O];if(yh(i,r,e,t,n)){cn(i)&&u4(e,i.index);return}i.type&3&&(t=l4(t)),h4(i,e,t,n,a,s)}function h4(i,e,t,n,a,s){if(i.type&3){let r=wt(i,e);n=s!=null?s(n,i.value||"",t):n,a.setProperty(r,t,n)}else i.type&12}function u4(i,e){let t=ut(e,i);t[H]&16||(t[H]|=64)}function p4(i,e,t){let n=t.directiveStart,a=t.directiveEnd;cn(t)&&Uv(e,t,i.data[n+t.componentOffset]),i.firstCreatePass||j2(t,e);let s=t.initialInputs;for(let r=n;r<a;r++){let o=i.data[r],c=qr(e,i,r,t);if(Oi(c,e),s!==null&&k4(e,r-n,c,o,t,s),Un(o)){let l=ut(t.index,e);l[Ae]=qr(e,i,r,t)}}}function f4(i,e,t){let n=t.directiveStart,a=t.directiveEnd,s=t.index,r=q0();try{dn(s);for(let o=n;o<a;o++){let c=i.data[o],l=e[o];xr(o),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&g4(c,l)}}finally{dn(-1),xr(r)}}function g4(i,e){i.hostBindings!==null&&i.hostBindings(1,e)}function Af(i,e){let t=i.directiveRegistry,n=null;if(t)for(let a=0;a<t.length;a++){let s=t[a];pf(e,s.selectors,!1)&&(n??=[],Un(s)?n.unshift(s):n.push(s))}return n}function y4(i,e,t,n,a,s){let r=wt(i,e);m4(e[me],r,s,i.value,t,n,a)}function m4(i,e,t,n,a,s,r){if(s==null)i.removeAttribute(e,a,t);else{let o=r==null?pa(s):r(s,n||"",a);i.setAttribute(e,a,o,t)}}function k4(i,e,t,n,a,s){let r=s[e];if(r!==null)for(let o=0;o<r.length;o+=2){let c=r[o],l=r[o+1];Td(n,t,c,l)}}function Sf(i,e,t,n,a){let s=Le+t,r=e[O],o=a(r,e,i,n,t);e[s]=o,_i(i,!0);let c=i.type===2;return c?(hf(e[me],o,i),(F0()===0||va(i))&&Oi(o,e),N0()):Oi(o,e),Lr()&&(!c||!io(i))&&ph(r,e,o,i),i}function Ef(i){let e=i;return ld()?dd():(e=e.parent,_i(e,!1)),e}function v4(i,e){let t=i[qt];if(!t)return;let n;try{n=t.get(hn,null)}catch{n=null}n?.(e)}function yh(i,e,t,n,a){let s=i.inputs?.[n],r=i.hostDirectiveInputs?.[n],o=!1;if(r)for(let c=0;c<r.length;c+=2){let l=r[c],d=r[c+1],h=e.data[l];Td(h,t[l],d,a),o=!0}if(s)for(let c of s){let l=t[c],d=e.data[c];Td(d,l,n,a),o=!0}return o}function M4(i,e){let t=ut(e,i),n=t[O];w4(n,t);let a=t[vt];a!==null&&t[jn]===null&&(t[jn]=tf(a,t[qt])),ce(te.ComponentStart);try{mh(n,t,t[Ae])}finally{ce(te.ComponentEnd,t[Ae])}}function w4(i,e){for(let t=e.length;t<i.blueprint.length;t++)e.push(i.blueprint[t])}function mh(i,e,t){Ar(e);try{let n=i.viewQuery;n!==null&&Dd(1,n,t);let a=i.template;a!==null&&If(i,e,a,1,t),i.firstCreatePass&&(i.firstCreatePass=!1),e[Dt]?.finishViewCreation(i),i.staticContentQueries&&nf(i,e),i.staticViewQueries&&Dd(2,i.viewQuery,t);let s=i.components;s!==null&&b4(e,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{e[H]&=-5,Sr()}}function b4(i,e){for(let t=0;t<e.length;t++)M4(i,e[t])}function Fa(i,e,t,n){let a=F(null);try{let s=e.tView,o=i[H]&4096?4096:16,c=ch(i,s,t,o,null,e,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null),l=i[e.index];c[rn]=l;let d=i[Dt];return d!==null&&(c[Dt]=d.createEmbeddedView(s)),mh(s,c,t),c}finally{F(a)}}function Fi(i,e){return!e||e.firstChild===null||$2(i)}function Aa(i,e,t,n,a=!1){for(;t!==null;){if(t.type===128){t=a?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&n.push(ht(s)),Mt(s)&&Lf(s,n);let r=t.type;if(r&8)Aa(i,e,t.child,n);else if(r&32){let o=dh(t,e),c;for(;c=o();)n.push(c)}else if(r&16){let o=Cf(e,t);if(Array.isArray(o))n.push(...o);else{let c=sn(e[Ue]);Aa(c[O],c,o,n,!0)}}t=a?t.projectionNext:t.next}return n}function Lf(i,e){for(let t=be;t<i.length;t++){let n=i[t],a=n[O].firstChild;a!==null&&Aa(n[O],n,a,e)}i[on]!==i[vt]&&e.push(i[on])}function _f(i){if(i[wr]!==null){for(let e of i[wr])e.impl.addSequence(e);i[wr].length=0}}var Df=[];function C4(i){return i[et]??x4(i)}function x4(i){let e=Df.pop()??Object.create(A4);return e.lView=i,e}function I4(i){i.lView[et]!==i&&(i.lView=null,Df.push(i))}var A4=re(D({},Jc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:i=>{ba(i.lView)},consumerOnSignalRead(){this.lView[et]=this}});function S4(i){let e=i[et]??Object.create(E4);return e.lView=i,e}var E4=re(D({},Jc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:i=>{let e=sn(i.lView);for(;e&&!Tf(e[O]);)e=sn(e);e&&Jl(e)},consumerOnSignalRead(){this.lView[et]=this}});function Tf(i){return i.type!==2}function Pf(i){if(i[ma]===null)return;let e=!0;for(;e;){let t=!1;for(let n of i[ma])n.dirty&&(t=!0,n.zone===null||Zone.current===n.zone?n.run():n.zone.run(()=>n.run()));e=t&&!!(i[H]&8192)}}var L4=100;function Rf(i,e=0){let n=i[_t].rendererFactory,a=!1;a||n.begin?.();try{_4(i,e)}finally{a||n.end?.()}}function _4(i,e){let t=hd();try{ud(!0),Rd(i,e);let n=0;for(;wa(i);){if(n===L4)throw new Z(103,!1);n++,Rd(i,1)}}finally{ud(t)}}function D4(i,e,t,n){if(Wn(e))return;let a=e[H],s=!1,r=!1;Ar(e);let o=!0,c=null,l=null;s||(Tf(i)?(l=C4(e),c=el(l)):Os()===null?(o=!1,l=S4(e),c=el(l)):e[et]&&(Fs(e[et]),e[et]=null));try{Ql(e),j0(i.bindingStartIndex),t!==null&&If(i,e,t,2,n);let d=(a&3)===3;if(!s)if(d){let p=i.preOrderCheckHooks;p!==null&&Or(e,p,null)}else{let p=i.preOrderHooks;p!==null&&Fr(e,p,0,null),bd(e,0)}if(r||T4(e),Pf(e),Of(e,0),i.contentQueries!==null&&nf(i,e),!s)if(d){let p=i.contentCheckHooks;p!==null&&Or(e,p)}else{let p=i.contentHooks;p!==null&&Fr(e,p,1),bd(e,1)}R4(i,e);let h=i.components;h!==null&&Nf(e,h,0);let u=i.viewQuery;if(u!==null&&Dd(2,u,n),!s)if(d){let p=i.viewCheckHooks;p!==null&&Or(e,p)}else{let p=i.viewHooks;p!==null&&Fr(e,p,2),bd(e,2)}if(i.firstUpdatePass===!0&&(i.firstUpdatePass=!1),e[Mr]){for(let p of e[Mr])p();e[Mr]=null}s||(_f(e),e[H]&=-73)}catch(d){throw s||ba(e),d}finally{l!==null&&(Op(l,c),o&&I4(l)),Sr()}}function Of(i,e){for(let t=X2(i);t!==null;t=Z2(t))for(let n=be;n<t.length;n++){let a=t[n];Ff(a,e)}}function T4(i){for(let e=X2(i);e!==null;e=Z2(e)){if(!(e[H]&2))continue;let t=e[qn];for(let n=0;n<t.length;n++){let a=t[n];Jl(a)}}}function P4(i,e,t){ce(te.ComponentStart);let n=ut(e,i);try{Ff(n,t)}finally{ce(te.ComponentEnd,n[Ae])}}function Ff(i,e){br(i)&&Rd(i,e)}function Rd(i,e){let n=i[O],a=i[H],s=i[et],r=!!(e===0&&a&16);if(r||=!!(a&64&&e===0),r||=!!(a&1024),r||=!!(s?.dirty&&tl(s)),r||=!1,s&&(s.dirty=!1),i[H]&=-9217,r)D4(n,i,n.template,i[Ae]);else if(a&8192){let o=F(null);try{Pf(i),Of(i,1);let c=n.components;c!==null&&Nf(i,c,1),_f(i)}finally{F(o)}}}function Nf(i,e,t){for(let n=0;n<e.length;n++)P4(i,e[n],t)}function R4(i,e){let t=i.hostBindingOpCodes;if(t!==null)try{for(let n=0;n<t.length;n++){let a=t[n];if(a<0)dn(~a);else{let s=a,r=t[++n],o=t[++n];z0(r,s);let c=e[s];ce(te.HostBindingsUpdateStart,c);try{o(2,c)}finally{ce(te.HostBindingsUpdateEnd,c)}}}}finally{dn(-1)}}function kh(i,e){let t=hd()?64:1088;for(i[_t].changeDetectionScheduler?.notify(e);i;){i[H]|=t;let n=sn(i);if(Si(i)&&!n)return i;i=n}return null}function Hf(i,e,t,n){return[i,!0,0,e,null,n,null,t,null,null]}function jf(i,e){let t=be+e;if(t<i.length)return i[t]}function Na(i,e,t,n=!0){let a=e[O];if(O4(a,e,i,t),n){let r=Pd(t,i),o=e[me],c=o.parentNode(i[on]);c!==null&&Zv(a,i[qe],o,e,c,r)}let s=e[jn];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Bf(i,e){let t=Sa(i,e);return t!==void 0&&so(t[O],t),t}function Sa(i,e){if(i.length<=be)return;let t=be+e,n=i[t];if(n){let a=n[rn];a!==null&&a!==i&&uh(a,n),e>0&&(i[t-1][dt]=n[dt]);let s=fa(i,be+e);Xv(n[O],n);let r=s[Dt];r!==null&&r.detachView(s[O]),n[Pe]=null,n[dt]=null,n[H]&=-129}return n}function O4(i,e,t,n){let a=be+n,s=t.length;n>0&&(t[a-1][dt]=e),n<s-be?(e[dt]=t[a],Bl(t,be+n,e)):(t.push(e),e[dt]=null),e[Pe]=t;let r=e[rn];r!==null&&t!==r&&Vf(r,e);let o=e[Dt];o!==null&&o.insertView(i),Cr(e),e[H]|=128}function Vf(i,e){let t=i[qn],n=e[Pe];if(Tt(n))i[H]|=2;else{let a=n[Pe][Ue];e[Ue]!==a&&(i[H]|=2)}t===null?i[qn]=[e]:t.push(e)}var un=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[O];return Aa(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ae]}set context(e){this._lView[Ae]=e}get destroyed(){return Wn(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Pe];if(Mt(e)){let t=e[ka],n=t?t.indexOf(this):-1;n>-1&&(Sa(e,n),fa(t,n))}this._attachedToViewContainer=!1}so(this._lView[O],this._lView)}onDestroy(e){ed(this._lView,e)}markForCheck(){kh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[H]&=-129}reattach(){Cr(this._lView),this._lView[H]|=128}detectChanges(){this._lView[H]|=1024,Rf(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Si(this._lView),t=this._lView[rn];t!==null&&!e&&uh(t,this._lView),Mf(this._lView[O],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e;let t=Si(this._lView),n=this._lView[rn];n!==null&&!t&&Vf(n,this._lView),Cr(this._lView)}};var Zn=(()=>{class i{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=F4;constructor(t,n,a){this._declarationLView=t,this._declarationTContainer=n,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,a){let s=Fa(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:a});return new un(s)}}return i})();function F4(){return vh(tt(),X())}function vh(i,e){return i.type&4?new Zn(e,i,ji(i,e)):null}function Vi(i,e,t,n,a){let s=i.data[e];if(s===null)s=N4(i,e,t,n,a),V0()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=n,s.attrs=a;let r=H0();s.injectorIndex=r===null?-1:r.injectorIndex}return _i(s,!0),s}function N4(i,e,t,n,a){let s=cd(),r=ld(),o=r?s:s&&s.parent,c=i.data[e]=j4(i,o,t,e,n,a);return H4(i,c,s,r),c}function H4(i,e,t,n){i.firstChild===null&&(i.firstChild=e),t!==null&&(n?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function j4(i,e,t,n,a,s){let r=e?e.injectorIndex:-1,o=0;return sd()&&(o|=128),{type:t,index:n,insertBeforeIndex:null,injectorIndex:r,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:o,providerIndexes:0,value:a,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function B4(i){let e=i[Xl]??[],n=i[Pe][me],a=[];for(let s of e)s.data[Q2]!==void 0?a.push(s):V4(s,n);i[Xl]=a}function V4(i,e){let t=0,n=i.firstChild;if(n){let a=i.data[Y2];for(;t<a;){let s=n.nextSibling;df(e,n,!1),n=s,t++}}}var z4=()=>null,q4=()=>null;function Gr(i,e){return z4(i,e)}function zf(i,e,t){return q4(i,e,t)}var qf=class{},co=class{},Od=class{resolveComponentFactory(e){throw new Z(917,!1)}},lo=class{static NULL=new Od},Kn=class{},zi=(()=>{class i{destroyNode=null;static __NG_ELEMENT_ID__=()=>U4()}return i})();function U4(){let i=X(),e=tt(),t=ut(e.index,i);return(Tt(t)?t:i)[me]}var Uf=(()=>{class i{static \u0275prov=le({token:i,providedIn:"root",factory:()=>null})}return i})();var Hr={},Fd=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){let a=this.injector.get(e,Hr,n);return a!==Hr||t===Hr?a:this.parentInjector.get(e,t,n)}};function Xr(i,e,t){let n=t?i.styles:null,a=t?i.classes:null,s=0;if(e!==null)for(let r=0;r<e.length;r++){let o=e[r];if(typeof o=="number")s=o;else if(s==1)a=Dl(a,o);else if(s==2){let c=o,l=e[++r];n=Dl(n,c+": "+l+";")}}t?i.styles=n:i.stylesWithoutHost=n,t?i.classes=a:i.classesWithoutHost=a}function de(i,e=0){let t=X();if(t===null)return ie(i,e);let n=tt();return q2(n,t,Je(i),e)}function Wf(i,e,t,n,a){let s=n===null?null:{"":-1},r=a(i,t);if(r!==null){let o=r,c=null,l=null;for(let d of r)if(d.resolveHostDirectives!==null){[o,c,l]=d.resolveHostDirectives(r);break}G4(i,e,t,o,s,c,l)}s!==null&&n!==null&&W4(t,n,s)}function W4(i,e,t){let n=i.localNames=[];for(let a=0;a<e.length;a+=2){let s=t[e[a+1]];if(s==null)throw new Z(-301,!1);n.push(e[a],s)}}function $4(i,e,t){e.componentOffset=t,(i.components??=[]).push(e.index)}function G4(i,e,t,n,a,s,r){let o=n.length,c=null;for(let u=0;u<o;u++){let p=n[u];c===null&&Un(p)&&(c=p,$4(i,t,u)),cv(j2(t,e),i,p.type)}J4(t,i.data.length,o),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let u=0;u<o;u++){let p=n[u];p.providersResolver&&p.providersResolver(p)}let l=!1,d=!1,h=gf(i,e,o,null);o>0&&(t.directiveToIndex=new Map);for(let u=0;u<o;u++){let p=n[u];if(t.mergedAttrs=Jr(t.mergedAttrs,p.hostAttrs),Z4(i,t,e,h,p),Q4(h,p,a),r!==null&&r.has(p)){let[g,m]=r.get(p);t.directiveToIndex.set(p.type,[h,g+t.directiveStart,m+t.directiveStart])}else(s===null||!s.has(p))&&t.directiveToIndex.set(p.type,h);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let f=p.type.prototype;!l&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((i.preOrderHooks??=[]).push(t.index),l=!0),!d&&(f.ngOnChanges||f.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(t.index),d=!0),h++}X4(i,t,s)}function X4(i,e,t){for(let n=e.directiveStart;n<e.directiveEnd;n++){let a=i.data[n];if(t===null||!t.has(a))g2(0,e,a,n),g2(1,e,a,n),m2(e,n,!1);else{let s=t.get(a);y2(0,e,s,n),y2(1,e,s,n),m2(e,n,!0)}}}function g2(i,e,t,n){let a=i===0?t.inputs:t.outputs;for(let s in a)if(a.hasOwnProperty(s)){let r;i===0?r=e.inputs??={}:r=e.outputs??={},r[s]??=[],r[s].push(n),$f(e,s)}}function y2(i,e,t,n){let a=i===0?t.inputs:t.outputs;for(let s in a)if(a.hasOwnProperty(s)){let r=a[s],o;i===0?o=e.hostDirectiveInputs??={}:o=e.hostDirectiveOutputs??={},o[r]??=[],o[r].push(n,s),$f(e,r)}}function $f(i,e){e==="class"?i.flags|=8:e==="style"&&(i.flags|=16)}function m2(i,e,t){let{attrs:n,inputs:a,hostDirectiveInputs:s}=i;if(n===null||!t&&a===null||t&&s===null||rh(i)){i.initialInputs??=[],i.initialInputs.push(null);return}let r=null,o=0;for(;o<n.length;){let c=n[o];if(c===0){o+=4;continue}else if(c===5){o+=2;continue}else if(typeof c=="number")break;if(!t&&a.hasOwnProperty(c)){let l=a[c];for(let d of l)if(d===e){r??=[],r.push(c,n[o+1]);break}}else if(t&&s.hasOwnProperty(c)){let l=s[c];for(let d=0;d<l.length;d+=2)if(l[d]===e){r??=[],r.push(l[d+1],n[o+1]);break}}o+=2}i.initialInputs??=[],i.initialInputs.push(r)}function Z4(i,e,t,n,a){i.data[n]=a;let s=a.factory||(a.factory=Ci(a.type,!0)),r=new Ia(s,Un(a),de,null);i.blueprint[n]=r,t[n]=r,K4(i,e,n,gf(i,t,a.hostVars,Wt),a)}function K4(i,e,t,n,a){let s=a.hostBindings;if(s){let r=i.hostBindingOpCodes;r===null&&(r=i.hostBindingOpCodes=[]);let o=~e.index;Y4(r)!=o&&r.push(o),r.push(t,n,s)}}function Y4(i){let e=i.length;for(;e>0;){let t=i[--e];if(typeof t=="number"&&t<0)return t}return 0}function Q4(i,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=i;Un(e)&&(t[""]=i)}}function J4(i,e,t){i.flags|=1,i.directiveStart=e,i.directiveEnd=e+t,i.providerIndexes=e}function Gf(i,e,t,n,a,s,r,o){let c=e[O],l=c.consts,d=pt(l,r),h=Vi(c,i,t,n,d);return s&&Wf(c,e,h,pt(l,o),a),h.mergedAttrs=Jr(h.mergedAttrs,h.attrs),h.attrs!==null&&Xr(h,h.attrs,!1),h.mergedAttrs!==null&&Xr(h,h.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,h),h}function Xf(i,e){R2(i,e),Zl(e)&&i.queries.elementEnd(e)}function e5(i,e,t,n,a,s){let r=e.consts,o=pt(r,a),c=Vi(e,i,t,n,o);if(c.mergedAttrs=Jr(c.mergedAttrs,c.attrs),s!=null){let l=pt(r,s);c.localNames=[];for(let d=0;d<l.length;d+=2)c.localNames.push(l[d],-1)}return c.attrs!==null&&Xr(c,c.attrs,!1),c.mergedAttrs!==null&&Xr(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function qi(i,e,t){if(t===Wt)return!1;let n=i[e];return Object.is(n,t)?!1:(i[e]=t,!0)}function jr(i,e,t){return function n(a){let s=cn(i)?ut(i.index,e):e;kh(s,5);let r=e[Ae],o=k2(e,r,t,a),c=n.__ngNextListenerFn__;for(;c;)o=k2(e,r,c,a)&&o,c=c.__ngNextListenerFn__;return o}}function k2(i,e,t,n){let a=F(null);try{return ce(te.OutputStart,e,t),t(n)!==!1}catch(s){return v4(i,s),!1}finally{ce(te.OutputEnd,e,t),F(a)}}function Zf(i,e,t,n,a,s,r,o){let c=va(i),l=!1,d=null;if(!n&&c&&(d=n5(e,t,s,i.index)),d!==null){let h=d.__ngLastListenerFn__||d;h.__ngNextListenerFn__=r,d.__ngLastListenerFn__=r,l=!0}else{let h=wt(i,t),u=n?n(h):h;bv(t,u,s,o);let p=a.listen(u,s,o);if(!t5(s)){let f=n?g=>n(ht(g[i.index])):i.index;Kf(f,e,t,s,o,p,!1)}}return l}function t5(i){return i.startsWith("animation")||i.startsWith("transition")}function n5(i,e,t,n){let a=i.cleanup;if(a!=null)for(let s=0;s<a.length-1;s+=2){let r=a[s];if(r===t&&a[s+1]===n){let o=e[Ii],c=a[s+2];return o&&o.length>c?o[c]:null}typeof r=="string"&&(s+=2)}return null}function Kf(i,e,t,n,a,s,r){let o=e.firstCreatePass?nd(e):null,c=td(t),l=c.length;c.push(a,s),o&&o.push(n,i,l,(l+1)*(r?-1:1))}function v2(i,e,t,n,a,s){let r=e[t],o=e[O],l=o.data[t].outputs[n],h=r[l].subscribe(s);Kf(i.index,o,e,a,s,h,!0)}var Nd=Symbol("BINDING");var Hd=class extends lo{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Fn(e);return new Ea(t,this.ngModule)}};function i5(i){return Object.keys(i).map(e=>{let[t,n,a]=i[e],s={propName:t,templateName:e,isSignal:(n&ao.SignalBased)!==0};return a&&(s.transform=a),s})}function a5(i){return Object.keys(i).map(e=>({propName:i[e],templateName:e}))}function s5(i,e,t){let n=e instanceof lt?e:e?.injector;return n&&i.getStandaloneInjector!==null&&(n=i.getStandaloneInjector(n)||n),n?new Fd(t,n):t}function r5(i){let e=i.get(Kn,null);if(e===null)throw new Z(407,!1);let t=i.get(Uf,null),n=i.get(Rn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:n,ngReflect:!1}}function o5(i,e){let t=Yf(i);return cf(e,t,t==="svg"?Kl:t==="math"?_0:null)}function Yf(i){return(i.selectors[0][0]||"div").toLowerCase()}var Ea=class extends co{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=i5(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=a5(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Bv(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,n,a,s,r){ce(te.DynamicComponentStart);let o=F(null);try{let c=this.componentDef,l=c5(n,c,r,s),d=s5(c,a||this.ngModule,e),h=r5(d),u=h.rendererFactory.createRenderer(null,c),p=n?r4(u,n,c.encapsulation,d):o5(c,u),f=r?.some(M2)||s?.some(y=>typeof y!="function"&&y.bindings.some(M2)),g=ch(null,l,null,512|ff(c),null,null,h,u,d,null,tf(p,d,!0));g[Le]=p,Ar(g);let m=null;try{let y=Gf(Le,g,2,"#host",()=>l.directiveRegistry,!0,0);hf(u,p,y),Oi(p,g),gh(l,g,y),af(l,y,g),Xf(l,y),t!==void 0&&d5(y,this.ngContentSelectors,t),m=ut(y.index,g),g[Ae]=m[Ae],mh(l,g,null)}catch(y){throw m!==null&&_d(m),_d(g),y}finally{ce(te.DynamicComponentEnd),Sr()}return new Zr(this.componentType,g,!!f)}finally{F(o)}}};function c5(i,e,t,n){let a=i?["ng-version","21.1.0"]:Vv(e.selectors[0]),s=null,r=null,o=0;if(t)for(let d of t)o+=d[Nd].requiredVars,d.create&&(d.targetIdx=0,(s??=[]).push(d)),d.update&&(d.targetIdx=0,(r??=[]).push(d));if(n)for(let d=0;d<n.length;d++){let h=n[d];if(typeof h!="function")for(let u of h.bindings){o+=u[Nd].requiredVars;let p=d+1;u.create&&(u.targetIdx=p,(s??=[]).push(u)),u.update&&(u.targetIdx=p,(r??=[]).push(u))}}let c=[e];if(n)for(let d of n){let h=typeof d=="function"?d:d.type,u=Fl(h);c.push(u)}return oh(0,null,l5(s,r),1,o,c,null,null,null,[a],null)}function l5(i,e){return!i&&!e?null:t=>{if(t&1&&i)for(let n of i)n.create();if(t&2&&e)for(let n of e)n.update()}}function M2(i){let e=i[Nd].kind;return e==="input"||e==="twoWay"}var Zr=class extends qf{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,n){super(),this._rootLView=t,this._hasInputBindings=n,this._tNode=Ma(t[O],Le),this.location=ji(this._tNode,t),this.instance=ut(this._tNode.index,t)[Ae],this.hostView=this.changeDetectorRef=new un(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let n=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let a=this._rootLView,s=yh(n,a[O],a,e,t);this.previousInputValues.set(e,t);let r=ut(n.index,a);kh(r,1)}get injector(){return new Gn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function d5(i,e,t){let n=i.projection=[];for(let a=0;a<e.length;a++){let s=t[a];n.push(s!=null&&s.length?Array.from(s):null)}}var Ui=(()=>{class i{static __NG_ELEMENT_ID__=h5}return i})();function h5(){let i=tt();return Jf(i,X())}var u5=Ui,Qf=class extends u5{_lContainer;_hostTNode;_hostLView;constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return ji(this._hostTNode,this._hostLView)}get injector(){return new Gn(this._hostTNode,this._hostLView)}get parentInjector(){let e=eh(this._hostTNode,this._hostLView);if(F2(e)){let t=zr(e,this._hostLView),n=Vr(e),a=t[O].data[n+8];return new Gn(a,t)}else return new Gn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=w2(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-be}createEmbeddedView(e,t,n){let a,s;typeof n=="number"?a=n:n!=null&&(a=n.index,s=n.injector);let r=Gr(this._lContainer,e.ssrId),o=e.createEmbeddedViewImpl(t||{},s,r);return this.insertImpl(o,a,Fi(this._hostTNode,r)),o}createComponent(e,t,n,a,s,r,o){let c=e&&!Gk(e),l;if(c)l=t;else{let m=t||{};l=m.index,n=m.injector,a=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef,r=m.directives,o=m.bindings}let d=c?e:new Ea(Fn(e)),h=n||this.parentInjector;if(!s&&d.ngModule==null){let y=(c?h:this.parentInjector).get(lt,null);y&&(s=y)}let u=Fn(d.componentType??{}),p=Gr(this._lContainer,u?.id??null),f=p?.firstChild??null,g=d.create(h,a,f,s,r,o);return this.insertImpl(g.hostView,l,Fi(this._hostTNode,p)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,n){let a=e._lView;if(T0(a)){let o=this.indexOf(e);if(o!==-1)this.detach(o);else{let c=a[Pe],l=new Qf(c,c[qe],c[Pe]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),r=this._lContainer;return Na(r,a,s,n),e.attachToViewContainerRef(),Bl(Id(r),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=w2(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),n=Sa(this._lContainer,t);n&&(fa(Id(this._lContainer),t),so(n[O],n))}detach(e){let t=this._adjustIndex(e,-1),n=Sa(this._lContainer,t);return n&&fa(Id(this._lContainer),t)!=null?new un(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function w2(i){return i[ka]}function Id(i){return i[ka]||(i[ka]=[])}function Jf(i,e){let t,n=e[i.index];return Mt(n)?t=n:(t=Hf(n,e,null,i),e[i.index]=t,lh(e,t)),f5(t,e,i,n),new Qf(t,i,e)}function p5(i,e){let t=i[me],n=t.createComment(""),a=wt(e,i),s=t.parentNode(a);return $r(t,s,n,t.nextSibling(a),!1),n}var f5=m5,g5=()=>!1;function y5(i,e,t){return g5(i,e,t)}function m5(i,e,t,n){if(i[on])return;let a;t.type&8?a=ht(n):a=p5(e,t),i[on]=a}var jd=class i{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new i(this.queryList)}setDirty(){this.queryList.setDirty()}},Bd=class i{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let n=e.contentQueries!==null?e.contentQueries[0]:t.length,a=[];for(let s=0;s<n;s++){let r=t.getByIndex(s),o=this.queries[r.indexInDeclarationView];a.push(o.clone())}return new i(a)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Mh(e,t).matches!==null&&this.queries[t].setDirty()}},Vd=class{flags;read;predicate;constructor(e,t,n=null){this.flags=t,this.read=n,typeof e=="string"?this.predicate=I5(e):this.predicate=e}},zd=class i{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){let a=t!==null?t.length:0,s=this.getByIndex(n).embeddedTView(e,a);s&&(s.indexInDeclarationView=n,t!==null?t.push(s):t=[s])}return t!==null?new i(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},qd=class i{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new i(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,n=e.parent;for(;n!==null&&n.type&8&&n.index!==t;)n=n.parent;return t===(n!==null?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let n=this.metadata.predicate;if(Array.isArray(n))for(let a=0;a<n.length;a++){let s=n[a];this.matchTNodeWithReadOption(e,t,k5(t,s)),this.matchTNodeWithReadOption(e,t,Nr(t,e,s,!1,!1))}else n===Zn?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Nr(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(n!==null){let a=this.metadata.read;if(a!==null)if(a===ft||a===Ui||a===Zn&&t.type&4)this.addMatch(t.index,-2);else{let s=Nr(t,e,a,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,n)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function k5(i,e){let t=i.localNames;if(t!==null){for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1]}return null}function v5(i,e){return i.type&11?ji(i,e):i.type&4?vh(i,e):null}function M5(i,e,t,n){return t===-1?v5(e,i):t===-2?w5(i,e,n):qr(i,i[O],t,e)}function w5(i,e,t){if(t===ft)return ji(e,i);if(t===Zn)return vh(e,i);if(t===Ui)return Jf(e,i)}function eg(i,e,t,n){let a=e[Dt].queries[n];if(a.matches===null){let s=i.data,r=t.matches,o=[];for(let c=0;r!==null&&c<r.length;c+=2){let l=r[c];if(l<0)o.push(null);else{let d=s[l];o.push(M5(e,d,r[c+1],t.metadata.read))}}a.matches=o}return a.matches}function Ud(i,e,t,n){let a=i.queries.getByIndex(t),s=a.matches;if(s!==null){let r=eg(i,e,a,t);for(let o=0;o<s.length;o+=2){let c=s[o];if(c>0)n.push(r[o/2]);else{let l=s[o+1],d=e[-c];for(let h=be;h<d.length;h++){let u=d[h];u[rn]===u[Pe]&&Ud(u[O],u,l,n)}if(d[qn]!==null){let h=d[qn];for(let u=0;u<h.length;u++){let p=h[u];Ud(p[O],p,l,n)}}}}}return n}function b5(i,e){return i[Dt].queries[e].queryList}function C5(i,e,t){let n=new Ur((t&4)===4);return O0(i,e,n,n.destroy),(e[Dt]??=new Bd).queries.push(new jd(n))-1}function x5(i,e,t){let n=je();return n.firstCreatePass&&(A5(n,new Vd(i,e,t),-1),(e&2)===2&&(n.staticViewQueries=!0)),C5(n,X(),e)}function I5(i){return i.split(",").map(e=>e.trim())}function A5(i,e,t){i.queries===null&&(i.queries=new zd),i.queries.track(new qd(e,t))}function Mh(i,e){return i.queries.getByIndex(e)}function S5(i,e){let t=i[O],n=Mh(t,e);return n.crossesNgTemplate?Ud(t,i,e,[]):eg(t,i,n,e)}var La=class{};var _a=class extends La{injector;componentFactoryResolver=new Hd(this);instance=null;constructor(e){super();let t=new Tn([...e.providers,{provide:La,useValue:this},{provide:lo,useValue:this.componentFactoryResolver}],e.parent||ya(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function tg(i,e,t=null){return new _a({providers:i,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var E5=(()=>{class i{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let n=Ul(!1,t.type),a=n.length>0?tg([n],this._injector,""):null;this.cachedInjectors.set(t,a)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=le({token:i,providedIn:"environment",factory:()=>new i(ie(lt))})}return i})();function We(i){return Pa(()=>{let e=ng(i),t=re(D({},e),{decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===th.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&i.dependencies||null,getStandaloneInjector:e.standalone?a=>a.get(E5).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||xt.Emulated,styles:i.styles||ct,_:null,schemas:i.schemas||null,tView:null,id:""});e.standalone&&Qn("NgStandalone"),ig(t);let n=i.dependencies;return t.directiveDefs=b2(n,L5),t.pipeDefs=b2(n,p0),t.id=T5(t),t})}function L5(i){return Fn(i)||Fl(i)}function pn(i){return Pa(()=>({type:i.type,bootstrap:i.bootstrap||ct,declarations:i.declarations||ct,imports:i.imports||ct,exports:i.exports||ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function _5(i,e){if(i==null)return Nn;let t={};for(let n in i)if(i.hasOwnProperty(n)){let a=i[n],s,r,o,c;Array.isArray(a)?(o=a[0],s=a[1],r=a[2]??s,c=a[3]||null):(s=a,r=a,o=ao.None,c=null),t[s]=[n,o,c],e[s]=r}return t}function D5(i){if(i==null)return Nn;let e={};for(let t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function wh(i){return Pa(()=>{let e=ng(i);return ig(e),e})}function ng(i){let e={};return{type:i.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:e,inputConfig:i.inputs||Nn,exportAs:i.exportAs||null,standalone:i.standalone??!0,signals:i.signals===!0,selectors:i.selectors||ct,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:_5(i.inputs,e),outputs:D5(i.outputs),debugInfo:null}}function ig(i){i.features?.forEach(e=>e(i))}function b2(i,e){return i?()=>{let t=typeof i=="function"?i():i,n=[];for(let a of t){let s=e(a);s!==null&&n.push(s)}return n}:null}function T5(i){let e=0,t=typeof i.consts=="function"?"":i.consts,n=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,t,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery];for(let s of n.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ag(i,e,t,n,a,s,r,o){if(t.firstCreatePass){i.mergedAttrs=Jr(i.mergedAttrs,i.attrs);let d=i.tView=oh(2,i,a,s,r,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,i),d.queries=t.queries.embeddedTView(i))}o&&(i.flags|=o),_i(i,!1);let c=R5(t,e,i,n);Lr()&&ph(t,e,c,i),Oi(c,e);let l=Hf(c,e,c,i);e[n+Le]=l,lh(e,l),y5(l,i,e)}function P5(i,e,t,n,a,s,r,o,c,l,d){let h=t+Le,u;return e.firstCreatePass?(u=Vi(e,h,4,r||null,o||null),ad()&&Wf(e,i,u,pt(e.consts,l),Af),R2(e,u)):u=e.data[h],ag(u,i,e,t,n,a,s,c),va(u)&&gh(e,i,u),l!=null&&oo(i,u,d),u}function Da(i,e,t,n,a,s,r,o,c,l,d){let h=t+Le,u;if(e.firstCreatePass){if(u=Vi(e,h,4,r||null,o||null),l!=null){let p=pt(e.consts,l);u.localNames=[];for(let f=0;f<p.length;f+=2)u.localNames.push(p[f],-1)}}else u=e.data[h];return ag(u,i,e,t,n,a,s,c),l!=null&&oo(i,u,d),u}function ho(i,e,t,n,a,s,r,o){let c=X(),l=je(),d=pt(l.consts,s);return P5(c,l,i,e,t,n,a,d,void 0,r,o),ho}var R5=O5;function O5(i,e,t,n){return _r(!0),e[me].createComment("")}var bh=new K("");function uo(i){return!!i&&typeof i.then=="function"}function Ch(i){return!!i&&typeof i.subscribe=="function"}var sg=new K("");var xh=(()=>{class i{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,n)=>{this.resolve=t,this.reject=n});appInits=G(sg,{optional:!0})??[];injector=G(Pn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let a of this.appInits){let s=vr(this.injector,a);if(uo(s))t.push(s);else if(Ch(s)){let r=new Promise((o,c)=>{s.subscribe({complete:o,error:c})});t.push(r)}}let n=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{n()}).catch(a=>{this.reject(a)}),t.length===0&&n(),this.initialized=!0}static \u0275fac=function(n){return new(n||i)};static \u0275prov=le({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),rg=new K("");function og(){il(()=>{let i="";throw new Z(600,i)})}function cg(i){return i.isBoundToModule}var F5=10;var Ha=(()=>{class i{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=G(hn);afterRenderManager=G(mf);zonelessEnabled=G(Ti);rootEffectScheduler=G(wd);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new kt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=G($n);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ln(t=>!t))}constructor(){G(Oa,{optional:!0})}whenStable(){let t;return new Promise(n=>{t=this.isStable.subscribe({next:a=>{a&&n()}})}).finally(()=>{t.unsubscribe()})}_injector=G(lt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,n){return this.bootstrapImpl(t,n)}bootstrapImpl(t,n,a=Pn.NULL){return this._injector.get(ye).run(()=>{ce(te.BootstrapComponentStart);let r=t instanceof co;if(!this._injector.get(xh).done){let f="";throw new Z(405,f)}let c;r?c=t:c=this._injector.get(lo).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=cg(c)?void 0:this._injector.get(La),d=n||c.selector,h=c.create(a,[],d,l),u=h.location.nativeElement,p=h.injector.get(bh,null);return p?.registerApplication(u),h.onDestroy(()=>{this.detachView(h.hostView),xa(this.components,h),p?.unregisterApplication(u)}),this._loadComponent(h),ce(te.BootstrapComponentEnd,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ce(te.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(hh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ce(te.ChangeDetectionEnd),new Z(101,!1);let t=F(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,F(t),this.afterTick.next(),ce(te.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Kn,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<F5;){ce(te.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ce(te.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:a}of this.allViews){if(!n&&!wa(a))continue;let s=n&&!this.zonelessEnabled?0:1;Rf(a,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>wa(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let n=t;this._views.push(n),n.attachToAppRef(this)}detachView(t){let n=t;xa(this._views,n),n.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(a){this.internalErrorHandler(a)}this.components.push(t),this._injector.get(rg,[]).forEach(a=>a(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>xa(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(n){return new(n||i)};static \u0275prov=le({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function xa(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function Wi(i,e,t,n){let a=X(),s=Di();if(qi(a,s,e)){let r=je(),o=yd();y4(o,a,i,e,t,n)}return Wi}var jS=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Wd=class{destroy(e){}updateValue(e,t){}swap(e,t){let n=Math.min(e,t),a=Math.max(e,t),s=this.detach(a);if(a-n>1){let r=this.detach(n);this.attach(n,s),this.attach(a,r)}else this.attach(n,s)}move(e,t){this.attach(t,this.detach(e))}};function Ad(i,e,t,n,a){return i===t&&Object.is(e,n)?1:Object.is(a(i,e),a(t,n))?-1:0}function N5(i,e,t,n){let a,s,r=0,o=i.length-1,c=void 0;if(Array.isArray(e)){F(n);let l=e.length-1;for(F(null);r<=o&&r<=l;){let d=i.at(r),h=e[r],u=Ad(r,d,r,h,t);if(u!==0){u<0&&i.updateValue(r,h),r++;continue}let p=i.at(o),f=e[l],g=Ad(o,p,l,f,t);if(g!==0){g<0&&i.updateValue(o,f),o--,l--;continue}let m=t(r,d),y=t(o,p),v=t(r,h);if(Object.is(v,y)){let M=t(l,f);Object.is(M,m)?(i.swap(r,o),i.updateValue(o,f),l--,o--):i.move(o,r),i.updateValue(r,h),r++;continue}if(a??=new Kr,s??=x2(i,r,o,t),$d(i,a,r,v))i.updateValue(r,h),r++,o++;else if(s.has(v))a.set(m,i.detach(r)),o--;else{let M=i.create(r,e[r]);i.attach(r,M),r++,o++}}for(;r<=l;)C2(i,a,t,r,e[r]),r++}else if(e!=null){F(n);let l=e[Symbol.iterator]();F(null);let d=l.next();for(;!d.done&&r<=o;){let h=i.at(r),u=d.value,p=Ad(r,h,r,u,t);if(p!==0)p<0&&i.updateValue(r,u),r++,d=l.next();else{a??=new Kr,s??=x2(i,r,o,t);let f=t(r,u);if($d(i,a,r,f))i.updateValue(r,u),r++,o++,d=l.next();else if(!s.has(f))i.attach(r,i.create(r,u)),r++,o++,d=l.next();else{let g=t(r,h);a.set(g,i.detach(r)),o--}}}for(;!d.done;)C2(i,a,t,i.length,d.value),d=l.next()}for(;r<=o;)i.destroy(i.detach(o--));a?.forEach(l=>{i.destroy(l)})}function $d(i,e,t,n){return e!==void 0&&e.has(n)?(i.attach(t,e.get(n)),e.delete(n),!0):!1}function C2(i,e,t,n,a){if($d(i,e,n,t(n,a)))i.updateValue(n,a);else{let s=i.create(n,a);i.attach(n,s)}}function x2(i,e,t,n){let a=new Set;for(let s=e;s<=t;s++)a.add(n(s,i.at(s)));return a}var Kr=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let n=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let a=this._vMap;for(;a.has(n);)n=a.get(n);a.set(n,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,n]of this.kvMap)if(e(n,t),this._vMap!==void 0){let a=this._vMap;for(;a.has(n);)n=a.get(n),e(n,t)}}};function po(i,e,t,n,a,s,r,o){Qn("NgControlFlow");let c=X(),l=je(),d=pt(l.consts,s);return Da(c,l,i,e,t,n,a,d,256,r,o),Ih}function Ih(i,e,t,n,a,s,r,o){Qn("NgControlFlow");let c=X(),l=je(),d=pt(l.consts,s);return Da(c,l,i,e,t,n,a,d,512,r,o),Ih}function fo(i,e){Qn("NgControlFlow");let t=X(),n=Di(),a=t[n]!==Wt?t[n]:-1,s=a!==-1?Yr(t,Le+a):void 0,r=0;if(qi(t,n,i)){let o=F(null);try{if(s!==void 0&&Bf(s,r),i!==-1){let c=Le+i,l=Yr(t,c),d=Kd(t[O],c),h=zf(l,d,t),u=Fa(t,d,e,{dehydratedView:h});Na(l,u,r,Fi(d,h))}}finally{F(o)}}else if(s!==void 0){let o=jf(s,r);o!==void 0&&(o[Ae]=e)}}var Gd=class{lContainer;$implicit;$index;constructor(e,t,n){this.lContainer=e,this.$implicit=t,this.$index=n}get $count(){return this.lContainer.length-be}};function Ah(i,e){return e}var Xd=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,n){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=n}};function Sh(i,e,t,n,a,s,r,o,c,l,d,h,u){Qn("NgControlFlow");let p=X(),f=je(),g=c!==void 0,m=X(),y=o?r.bind(m[Ue][Ae]):r,v=new Xd(g,y);m[Le+i]=v,Da(p,f,i+1,e,t,n,a,pt(f.consts,s),256),g&&Da(p,f,i+2,c,l,d,h,pt(f.consts,u),512)}var Zd=class extends Wd{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,n){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=n}get length(){return this.lContainer.length-be}at(e){return this.getLView(e)[Ae].$implicit}attach(e,t){let n=t[jn];this.needsIndexUpdate||=e!==this.length,Na(this.lContainer,t,e,Fi(this.templateTNode,n)),H5(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,j5(this.lContainer,e),B5(this.lContainer,e)}create(e,t){let n=Gr(this.lContainer,this.templateTNode.tView.ssrId);return Fa(this.hostLView,this.templateTNode,new Gd(this.lContainer,t,e),{dehydratedView:n})}destroy(e){so(e[O],e)}updateValue(e,t){this.getLView(e)[Ae].$implicit=t}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ae].$index=e}getLView(e){return V5(this.lContainer,e)}};function Eh(i){let e=F(null),t=ln();try{let n=X(),a=n[O],s=n[t],r=t+1,o=Yr(n,r);if(s.liveCollection===void 0){let l=Kd(a,r);s.liveCollection=new Zd(o,n,l)}else s.liveCollection.reset();let c=s.liveCollection;if(N5(c,i,s.trackByFn,e),c.updateIndexes(),s.hasEmptyBlock){let l=Di(),d=c.length===0;if(qi(n,l,d)){let h=t+2,u=Yr(n,h);if(d){let p=Kd(a,h),f=zf(u,p,n),g=Fa(n,p,void 0,{dehydratedView:f});Na(u,g,0,Fi(p,f))}else a.firstUpdatePass&&B4(u),Bf(u,0)}}}finally{F(e)}}function Yr(i,e){return i[e]}function H5(i,e){if(i.length<=be)return;let t=be+e,n=i[t],a=n?n[zn]:void 0;if(n&&a&&a.detachedLeaveAnimationFns&&a.detachedLeaveAnimationFns.length>0){let s=n[qt];$v(s,a),Xn.delete(n[Ut]),a.detachedLeaveAnimationFns=void 0}}function j5(i,e){if(i.length<=be)return;let t=be+e,n=i[t],a=n?n[zn]:void 0;a&&a.leave&&a.leave.size>0&&(a.detachedLeaveAnimationFns=[])}function B5(i,e){return Sa(i,e)}function V5(i,e){return jf(i,e)}function Kd(i,e){return Ma(i,e)}function Ne(i,e,t){let n=X(),a=Di();if(qi(n,a,e)){let s=je(),r=yd();d4(r,n,i,e,n[me],t)}return Ne}function I2(i,e,t,n,a){yh(e,i,t,a?"class":"style",n)}function _(i,e,t,n){let a=X(),s=a[O],r=i+Le,o=s.firstCreatePass?Gf(r,a,2,e,Af,ad(),t,n):s.data[r];if(Sf(o,a,i,e,lg),va(o)){let c=a[O];gh(c,a,o),af(c,o,a)}return n!=null&&oo(a,o),_}function P(){let i=je(),e=tt(),t=Ef(e);return i.firstCreatePass&&Xf(i,t),rd(t)&&od(),id(),t.classesWithoutHost!=null&&Jk(t)&&I2(i,t,X(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&ev(t)&&I2(i,t,X(),t.stylesWithoutHost,!1),P}function W(i,e,t,n){return _(i,e,t,n),P(),W}function fn(i,e,t,n){let a=X(),s=a[O],r=i+Le,o=s.firstCreatePass?e5(r,s,2,e,t,n):s.data[r];return Sf(o,a,i,e,lg),n!=null&&oo(a,o),fn}function Jn(){let i=tt(),e=Ef(i);return rd(e)&&od(),id(),Jn}function $i(i,e,t,n){return fn(i,e,t,n),Jn(),$i}var lg=(i,e,t,n,a)=>(_r(!0),cf(e[me],n,Z0()));function ja(){return X()}var Ba="en-US";var z5=Ba;function dg(i){typeof i=="string"&&(z5=i.toLowerCase().replace(/_/g,"-"))}function ne(i,e,t){let n=X(),a=je(),s=tt();return q5(a,n,n[me],s,i,e,t),ne}function go(i,e,t){let n=X(),a=je(),s=tt();return(s.type&3||t)&&Zf(s,a,n,t,n[me],i,e,jr(s,n,e)),go}function q5(i,e,t,n,a,s,r){let o=!0,c=null;if((n.type&3||r)&&(c??=jr(n,e,s),Zf(n,i,e,r,t,a,s,c)&&(o=!1)),o){let l=n.outputs?.[a],d=n.hostDirectiveOutputs?.[a];if(d&&d.length)for(let h=0;h<d.length;h+=2){let u=d[h],p=d[h+1];c??=jr(n,e,s),v2(n,e,u,p,a,c)}if(l&&l.length)for(let h of l)c??=jr(n,e,s),v2(n,e,h,a,a,c)}}function gn(i=1){return X0(i)}function U5(i,e){let t=null,n=Ov(i);for(let a=0;a<e.length;a++){let s=e[a];if(s==="*"){t=a;continue}if(n===null?pf(i,s,!0):Hv(n,s))return a}return t}function ei(i){let e=X()[Ue][qe];if(!e.projection){let t=i?i.length:1,n=e.projection=w0(t,null),a=n.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let r=i?U5(s,i):0;r!==null&&(a[r]?a[r].projectionNext=s:n[r]=s,a[r]=s)}s=s.next}}}function ti(i,e=0,t,n,a,s){let r=X(),o=je(),c=n?i+1:null;c!==null&&Da(r,o,c,n,a,s,null,t);let l=Vi(o,Le+i,16,null,t||null);l.projection===null&&(l.projection=e),dd();let h=!r[jn]||sd();r[Ue][qe].projection[l.projection]===null&&c!==null?W5(r,o,c):h&&!io(l)&&i4(o,r,l)}function W5(i,e,t){let n=Le+t,a=e.data[n],s=i[n],r=Gr(s,a.tView.ssrId),o=Fa(i,a,void 0,{dehydratedView:r});Na(s,o,0,Fi(a,r))}function Gi(i,e,t){return x5(i,e,t),Gi}function Xi(i){let e=X(),t=je(),n=pd();Ir(n+1);let a=Mh(t,n);if(i.dirty&&D0(e)===((a.metadata.flags&2)===2)){if(a.matches===null)i.reset([]);else{let s=S5(e,n);i.reset(s,fv),i.notifyOnChanges()}return!0}return!1}function Zi(){return b5(X(),pd())}function Rr(i,e){return i<<17|e<<2}function Yn(i){return i>>17&32767}function $5(i){return(i&2)==2}function G5(i,e){return i&131071|e<<17}function Yd(i){return i|2}function Ni(i){return(i&131068)>>2}function Sd(i,e){return i&-131069|e<<2}function X5(i){return(i&1)===1}function Qd(i){return i|1}function Z5(i,e,t,n,a,s){let r=s?e.classBindings:e.styleBindings,o=Yn(r),c=Ni(r);i[n]=t;let l=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||xi(h,d)>0)&&(l=!0)}else d=t;if(a)if(c!==0){let u=Yn(i[o+1]);i[n+1]=Rr(u,o),u!==0&&(i[u+1]=Sd(i[u+1],n)),i[o+1]=G5(i[o+1],n)}else i[n+1]=Rr(o,0),o!==0&&(i[o+1]=Sd(i[o+1],n)),o=n;else i[n+1]=Rr(c,0),o===0?o=n:i[c+1]=Sd(i[c+1],n),c=n;l&&(i[n+1]=Yd(i[n+1])),A2(i,d,n,!0),A2(i,d,n,!1),K5(e,d,i,n,s),r=Rr(o,c),s?e.classBindings=r:e.styleBindings=r}function K5(i,e,t,n,a){let s=a?i.residualClasses:i.residualStyles;s!=null&&typeof e=="string"&&xi(s,e)>=0&&(t[n+1]=Qd(t[n+1]))}function A2(i,e,t,n){let a=i[t+1],s=e===null,r=n?Yn(a):Ni(a),o=!1;for(;r!==0&&(o===!1||s);){let c=i[r],l=i[r+1];Y5(c,e)&&(o=!0,i[r+1]=n?Qd(l):Yd(l)),r=n?Yn(l):Ni(l)}o&&(i[t+1]=n?Yd(a):Qd(a))}function Y5(i,e){return i===null||e==null||(Array.isArray(i)?i[1]:i)===e?!0:Array.isArray(i)&&typeof e=="string"?xi(i,e)>=0:!1}function Ki(i,e){return Q5(i,e,null,!0),Ki}function Q5(i,e,t,n){let a=X(),s=je(),r=B0(2);if(s.firstUpdatePass&&eM(s,i,r,n),e!==Wt&&qi(a,r,e)){let o=s.data[ln()];sM(s,o,a,a[me],i,a[r+1]=rM(e,t),n,r)}}function J5(i,e){return e>=i.expandoStartIndex}function eM(i,e,t,n){let a=i.data;if(a[t+1]===null){let s=a[ln()],r=J5(i,t);oM(s,n)&&e===null&&!r&&(e=!1),e=tM(a,s,e,n),Z5(a,s,e,t,r,n)}}function tM(i,e,t,n){let a=U0(i),s=n?e.residualClasses:e.residualStyles;if(a===null)(n?e.classBindings:e.styleBindings)===0&&(t=Ed(null,i,e,t,n),t=Ta(t,e.attrs,n),s=null);else{let r=e.directiveStylingLast;if(r===-1||i[r]!==a)if(t=Ed(a,i,e,t,n),s===null){let c=nM(i,e,n);c!==void 0&&Array.isArray(c)&&(c=Ed(null,i,e,c[1],n),c=Ta(c,e.attrs,n),iM(i,e,n,c))}else s=aM(i,e,n)}return s!==void 0&&(n?e.residualClasses=s:e.residualStyles=s),t}function nM(i,e,t){let n=t?e.classBindings:e.styleBindings;if(Ni(n)!==0)return i[Yn(n)]}function iM(i,e,t,n){let a=t?e.classBindings:e.styleBindings;i[Yn(a)]=n}function aM(i,e,t){let n,a=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<a;s++){let r=i[s].hostAttrs;n=Ta(n,r,t)}return Ta(n,e.attrs,t)}function Ed(i,e,t,n,a){let s=null,r=t.directiveEnd,o=t.directiveStylingLast;for(o===-1?o=t.directiveStart:o++;o<r&&(s=e[o],n=Ta(n,s.hostAttrs,a),s!==i);)o++;return i!==null&&(t.directiveStylingLast=o),n}function Ta(i,e,t){let n=t?1:2,a=-1;if(e!==null)for(let s=0;s<e.length;s++){let r=e[s];typeof r=="number"?a=r:a===n&&(Array.isArray(i)||(i=i===void 0?[]:["",i]),C0(i,r,t?!0:e[++s]))}return i===void 0?null:i}function sM(i,e,t,n,a,s,r,o){if(!(e.type&3))return;let c=i.data,l=c[o+1],d=X5(l)?S2(c,e,t,a,Ni(l),r):void 0;if(!Qr(d)){Qr(s)||$5(l)&&(s=S2(c,null,t,a,o,r));let h=Yl(ln(),t);s4(n,r,h,a,s)}}function S2(i,e,t,n,a,s){let r=e===null,o;for(;a>0;){let c=i[a],l=Array.isArray(c),d=l?c[1]:c,h=d===null,u=t[a+1];u===Wt&&(u=h?ct:void 0);let p=h?kr(u,n):d===n?u:void 0;if(l&&!Qr(p)&&(p=kr(c,n)),Qr(p)&&(o=p,r))return o;let f=i[a+1];a=r?Yn(f):Ni(f)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(o=kr(c,n))}return o}function Qr(i){return i!==void 0}function rM(i,e){return i==null||i===""||(typeof e=="string"?i=i+e:typeof i=="object"&&(i=an(ih(i)))),i}function oM(i,e){return(i.flags&(e?8:16))!==0}function ke(i,e=""){let t=X(),n=je(),a=i+Le,s=n.firstCreatePass?Vi(n,a,1,e,null):n.data[a],r=cM(n,t,s,e,i);t[a]=r,Lr()&&ph(n,t,r,s),_i(s,!1)}var cM=(i,e,t,n,a)=>(_r(!0),Iv(e[me],n));function lM(i,e,t,n=""){return qi(i,Di(),t)?e+pa(t)+n:Wt}function Va(i){return ni("",i),Va}function ni(i,e,t){let n=X(),a=lM(n,i,e,t);return a!==Wt&&dM(n,ln(),a),ni}function dM(i,e,t){let n=Yl(e,i);Av(i[me],n,t)}var hg=(()=>{class i{applicationErrorHandler=G(hn);appRef=G(Ha);taskService=G($n);ngZone=G(ye);zonelessEnabled=G(Ti);tracing=G(Oa,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new De;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ha):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(G(Tr,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let t=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(t);return}this.switchToMicrotaskScheduler(),this.taskService.remove(t)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let t=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})})}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let n=this.useMicrotaskScheduler?J0:kd;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>n(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>n(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ha+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(n){this.applicationErrorHandler(n)}finally{this.taskService.remove(t),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(n){return new(n||i)};static \u0275prov=le({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function ug(){return[{provide:Rn,useExisting:hg},{provide:ye,useClass:ua},{provide:Ti,useValue:!0}]}function hM(){return typeof $localize<"u"&&$localize.locale||Ba}var yo=new K("",{factory:()=>G(yo,{optional:!0,skipSelf:!0})||hM()});var IM=(()=>{class i{zone=G(ye);changeDetectionScheduler=G(Rn);applicationRef=G(Ha);applicationErrorHandler=G(hn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(n){return new(n||i)};static \u0275prov=le({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),AM=new K("",{factory:()=>!1});function SM({ngZoneFactory:i,scheduleInRootZone:e}){return i??=()=>new ye(re(D({},fg()),{scheduleInRootZone:e})),[{provide:Ti,useValue:!1},{provide:ye,useFactory:i},{provide:Hn,multi:!0,useFactory:()=>{let t=G(IM,{optional:!0});return()=>t.initialize()}},{provide:Hn,multi:!0,useFactory:()=>{let t=G(EM);return()=>{t.initialize()}}},{provide:Tr,useValue:e??md}]}function pg(i){let e=i?.scheduleInRootZone,t=SM({ngZoneFactory:()=>{let n=fg(i);return n.scheduleInRootZone=e,n.shouldCoalesceEventChangeDetection&&Qn("NgZone_CoalesceEvent"),new ye(n)},scheduleInRootZone:e});return ql([{provide:AM,useValue:!0},t])}function fg(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}var EM=(()=>{class i{subscription=new De;initialized=!1;zone=G(ye);pendingTasks=G($n);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)};static \u0275prov=le({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Lh=new K(""),LM=new K("");function za(i){return!i.moduleRef}function _M(i){let e=za(i)?i.r3Injector:i.moduleRef.injector,t=e.get(ye);return t.run(()=>{za(i)?i.r3Injector.resolveInjectorInitializers():i.moduleRef.resolveInjectorInitializers();let n=e.get(hn),a;if(t.runOutsideAngular(()=>{a=t.onError.subscribe({next:n})}),za(i)){let s=()=>e.destroy(),r=i.platformInjector.get(Lh);r.add(s),e.onDestroy(()=>{a.unsubscribe(),r.delete(s)})}else{let s=()=>i.moduleRef.destroy(),r=i.platformInjector.get(Lh);r.add(s),i.moduleRef.onDestroy(()=>{xa(i.allPlatformModules,i.moduleRef),a.unsubscribe(),r.delete(s)})}return TM(n,t,()=>{let s=e.get($n),r=s.add(),o=e.get(xh);return o.runInitializers(),o.donePromise.then(()=>{let c=e.get(yo,Ba);if(dg(c||Ba),!e.get(LM,!0))return za(i)?e.get(Ha):(i.allPlatformModules.push(i.moduleRef),i.moduleRef);if(za(i)){let d=e.get(Ha);return i.rootComponent!==void 0&&d.bootstrap(i.rootComponent),d}else return DM?.(i.moduleRef,i.allPlatformModules),i.moduleRef}).finally(()=>{s.remove(r)})})})}var DM;function TM(i,e,t){try{let n=t();return uo(n)?n.catch(a=>{throw e.runOutsideAngular(()=>i(a)),a}):n}catch(n){throw e.runOutsideAngular(()=>i(n)),n}}var mo=null;function PM(i=[],e){return Pn.create({name:e,providers:[{provide:ga,useValue:"platform"},{provide:Lh,useValue:new Set([()=>mo=null])},...i]})}function RM(i=[]){if(mo)return mo;let e=PM(i);return mo=e,og(),OM(e),e}function OM(i){let e=i.get(to,null);vr(i,()=>{e?.forEach(t=>t())})}var FM=1e4;var wP=FM-1e3;var _h=(()=>{class i{static __NG_ELEMENT_ID__=NM}return i})();function NM(i){return HM(tt(),X(),(i&16)===16)}function HM(i,e,t){if(cn(i)&&!t){let n=ut(i.index,e);return new un(n,n)}else if(i.type&175){let n=e[Ue];return new un(n,e)}return null}function gg(i){let{rootComponent:e,appProviders:t,platformProviders:n,platformRef:a}=i;ce(te.BootstrapApplicationStart);try{let s=a?.injector??RM(n),r=[ug(),t2,...t||[]],o=new _a({providers:r,parent:s,debugName:"",runEnvironmentInitializers:!1});return _M({r3Injector:o.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{ce(te.BootstrapApplicationEnd)}}var yg=null;function Wa(){return yg}function Dh(i){yg??=i}var Ua=class{};var Th=(()=>{class i{_viewContainer;_context=new ko;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,n){this._viewContainer=t,this._thenTemplateRef=n}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){mg(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){mg(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,n){return!0}static \u0275fac=function(n){return new(n||i)(de(Ui),de(Zn))};static \u0275dir=wh({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return i})(),ko=class{$implicit=null;ngIf=null};function mg(i,e){if(i&&!i.createEmbeddedView)throw new Z(2020,!1)}var yn=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=pn({type:i});static \u0275inj=zt({})}return i})();function Ph(i,e){e=encodeURIComponent(e);for(let t of i.split(";")){let n=t.indexOf("="),[a,s]=n==-1?[t,""]:[t.slice(0,n),t.slice(n+1)];if(a.trim()===e)return decodeURIComponent(s)}return null}var $a=class{};var kg="browser";var Ga=class{_doc;constructor(e){this._doc=e}manager},vo=(()=>{class i extends Ga{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,a,s){return t.addEventListener(n,a,s),()=>this.removeEventListener(t,n,a,s)}removeEventListener(t,n,a,s){return t.removeEventListener(n,a,s)}static \u0275fac=function(n){return new(n||i)(ie(bt))};static \u0275prov=le({token:i,factory:i.\u0275fac})}return i})(),bo=new K(""),Nh=(()=>{class i{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,n){this._zone=n,t.forEach(r=>{r.manager=this});let a=t.filter(r=>!(r instanceof vo));this._plugins=a.slice().reverse();let s=t.find(r=>r instanceof vo);s&&this._plugins.push(s)}addEventListener(t,n,a,s){return this._findPluginFor(n).addEventListener(t,n,a,s)}getZone(){return this._zone}_findPluginFor(t){let n=this._eventNameToPlugin.get(t);if(n)return n;if(n=this._plugins.find(s=>s.supports(t)),!n)throw new Z(5101,!1);return this._eventNameToPlugin.set(t,n),n}static \u0275fac=function(n){return new(n||i)(ie(bo),ie(ye))};static \u0275prov=le({token:i,factory:i.\u0275fac})}return i})(),Rh="ng-app-id";function vg(i){for(let e of i)e.remove()}function Mg(i,e){let t=e.createElement("style");return t.textContent=i,t}function VM(i,e,t,n){let a=i.head?.querySelectorAll(`style[${Rh}="${e}"],link[${Rh}="${e}"]`);if(a)for(let s of a)s.removeAttribute(Rh),s instanceof HTMLLinkElement?n.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function Fh(i,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",i),t}var Hh=(()=>{class i{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,n,a,s={}){this.doc=t,this.appId=n,this.nonce=a,VM(t,n,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,n){for(let a of t)this.addUsage(a,this.inline,Mg);n?.forEach(a=>this.addUsage(a,this.external,Fh))}removeStyles(t,n){for(let a of t)this.removeUsage(a,this.inline);n?.forEach(a=>this.removeUsage(a,this.external))}addUsage(t,n,a){let s=n.get(t);s?s.usage++:n.set(t,{usage:1,elements:[...this.hosts].map(r=>this.addElement(r,a(t,this.doc)))})}removeUsage(t,n){let a=n.get(t);a&&(a.usage--,a.usage<=0&&(vg(a.elements),n.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])vg(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[n,{elements:a}]of this.inline)a.push(this.addElement(t,Mg(n,this.doc)));for(let[n,{elements:a}]of this.external)a.push(this.addElement(t,Fh(n,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,n){return this.nonce&&n.setAttribute("nonce",this.nonce),t.appendChild(n)}static \u0275fac=function(n){return new(n||i)(ie(bt),ie(eo),ie(no,8),ie(Ra))};static \u0275prov=le({token:i,factory:i.\u0275fac})}return i})(),Oh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},jh=/%COMP%/g;var bg="%COMP%",zM=`_nghost-${bg}`,qM=`_ngcontent-${bg}`,UM=!0,WM=new K("",{factory:()=>UM});function $M(i){return qM.replace(jh,i)}function GM(i){return zM.replace(jh,i)}function Cg(i,e){return e.map(t=>t.replace(jh,i))}var Bh=(()=>{class i{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,n,a,s,r,o,c=null,l=null){this.eventManager=t,this.sharedStylesHost=n,this.appId=a,this.removeStylesOnCompDestroy=s,this.doc=r,this.ngZone=o,this.nonce=c,this.tracingService=l,this.defaultRenderer=new Xa(t,r,o,this.tracingService)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;let a=this.getOrCreateRenderer(t,n);return a instanceof wo?a.applyToHost(t):a instanceof Za&&a.applyStyles(),a}getOrCreateRenderer(t,n){let a=this.rendererByCompId,s=a.get(n.id);if(!s){let r=this.doc,o=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.tracingService;switch(n.encapsulation){case xt.Emulated:s=new wo(c,l,n,this.appId,d,r,o,h);break;case xt.ShadowDom:return new Mo(c,t,n,r,o,this.nonce,h,l);case xt.ExperimentalIsolatedShadowDom:return new Mo(c,t,n,r,o,this.nonce,h);default:s=new Za(c,l,n,d,r,o,h);break}a.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(n){return new(n||i)(ie(Nh),ie(Hh),ie(eo),ie(WM),ie(bt),ie(ye),ie(no),ie(Oa,8))};static \u0275prov=le({token:i,factory:i.\u0275fac})}return i})(),Xa=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,n,a){this.eventManager=e,this.doc=t,this.ngZone=n,this.tracingService=a}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Oh[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(wg(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(wg(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){t.remove()}selectRootElement(e,t){let n=typeof e=="string"?this.doc.querySelector(e):e;if(!n)throw new Z(-5104,!1);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,a){if(a){t=a+":"+t;let s=Oh[a];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){let a=Oh[n];a?e.removeAttributeNS(a,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,a){a&(Rt.DashCase|Rt.Important)?e.style.setProperty(t,n,a&Rt.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&Rt.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e!=null&&(e[t]=n)}setValue(e,t){e.nodeValue=t}listen(e,t,n,a){if(typeof e=="string"&&(e=Wa().getGlobalEventTarget(this.doc,e),!e))throw new Z(5102,!1);let s=this.decoratePreventDefault(n);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,a)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function wg(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var Mo=class extends Xa{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,n,a,s,r,o,c){super(e,a,s,o),this.hostEl=t,this.sharedStylesHost=c,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=n.styles;l=Cg(n.id,l);for(let h of l){let u=document.createElement("style");r&&u.setAttribute("nonce",r),u.textContent=h,this.shadowRoot.appendChild(u)}let d=n.getExternalStyles?.();if(d)for(let h of d){let u=Fh(h,a);r&&u.setAttribute("nonce",r),this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Za=class extends Xa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,n,a,s,r,o,c){super(e,s,r,o),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=a;let l=n.styles;this.styles=c?Cg(c,l):l,this.styleUrls=n.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Xn.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},wo=class extends Za{contentAttr;hostAttr;constructor(e,t,n,a,s,r,o,c){let l=a+"-"+n.id;super(e,t,n,s,r,o,c,l),this.contentAttr=$M(l),this.hostAttr=GM(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}};var Co=class i extends Ua{supportsDOMEvents=!0;static makeCurrent(){Dh(new i)}onAndCancel(e,t,n,a){return e.addEventListener(t,n,a),()=>{e.removeEventListener(t,n,a)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=XM();return t==null?null:ZM(t)}resetBaseElement(){Ka=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ph(document.cookie,e)}},Ka=null;function XM(){return Ka=Ka||document.head.querySelector("base"),Ka?Ka.getAttribute("href"):null}function ZM(i){return new URL(i,document.baseURI).pathname}var KM=(()=>{class i{build(){return new XMLHttpRequest}static \u0275fac=function(n){return new(n||i)};static \u0275prov=le({token:i,factory:i.\u0275fac})}return i})(),xg=["alt","control","meta","shift"],YM={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},QM={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},Ig=(()=>{class i extends Ga{constructor(t){super(t)}supports(t){return i.parseEventName(t)!=null}addEventListener(t,n,a,s){let r=i.parseEventName(n),o=i.eventCallback(r.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wa().onAndCancel(t,r.domEventName,o,s))}static parseEventName(t){let n=t.toLowerCase().split("."),a=n.shift();if(n.length===0||!(a==="keydown"||a==="keyup"))return null;let s=i._normalizeKey(n.pop()),r="",o=n.indexOf("code");if(o>-1&&(n.splice(o,1),r="code."),xg.forEach(l=>{let d=n.indexOf(l);d>-1&&(n.splice(d,1),r+=l+".")}),r+=s,n.length!=0||s.length===0)return null;let c={};return c.domEventName=a,c.fullKey=r,c}static matchEventFullKeyCode(t,n){let a=YM[t.key]||t.key,s="";return n.indexOf("code.")>-1&&(a=t.code,s="code."),a==null||!a?!1:(a=a.toLowerCase(),a===" "?a="space":a==="."&&(a="dot"),xg.forEach(r=>{if(r!==a){let o=QM[r];o(t)&&(s+=r+".")}}),s+=a,s===n)}static eventCallback(t,n,a){return s=>{i.matchEventFullKeyCode(s,t)&&a.runGuarded(()=>n(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(n){return new(n||i)(ie(bt))};static \u0275prov=le({token:i,factory:i.\u0275fac})}return i})();function Vh(i,e,t){return A(this,null,function*(){let n=D({rootComponent:i},JM(e,t));return gg(n)})}function JM(i,e){return{platformRef:e?.platformRef,appProviders:[...a3,...i?.providers??[]],platformProviders:i3}}function e3(){Co.makeCurrent()}function t3(){return new Vt}function n3(){return nh(document),document}var i3=[{provide:Ra,useValue:kg},{provide:to,useValue:e3,multi:!0},{provide:bt,useFactory:n3}];var a3=[{provide:ga,useValue:"root"},{provide:Vt,useFactory:t3},{provide:bo,useClass:vo,multi:!0},{provide:bo,useClass:Ig,multi:!0},Bh,Hh,Nh,{provide:Kn,useExisting:Bh},{provide:$a,useClass:KM},[]];var Ag={providers:[pg({eventCoalescing:!0})]};var zg=Object.freeze({left:0,top:0,width:16,height:16}),Ao=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),ns=Object.freeze(D(D({},zg),Ao)),Wh=Object.freeze(re(D({},ns),{body:"",hidden:!1})),s3=Object.freeze({width:null,height:null}),qg=Object.freeze(D(D({},s3),Ao));function r3(i,e=0){let t=i.replace(/^-?[0-9.]*/,"");function n(a){for(;a<0;)a+=4;return a%4}if(t===""){let a=parseInt(i);return isNaN(a)?0:n(a)}else if(t!==i){let a=0;switch(t){case"%":a=25;break;case"deg":a=90}if(a){let s=parseFloat(i.slice(0,i.length-t.length));return isNaN(s)?0:(s=s/a,s%1===0?n(s):0)}}return e}var o3=/[\s,]+/;function c3(i,e){e.split(o3).forEach(t=>{switch(t.trim()){case"horizontal":i.hFlip=!0;break;case"vertical":i.vFlip=!0;break}})}var Ug=re(D({},qg),{preserveAspectRatio:""});function Sg(i){let e=D({},Ug),t=(n,a)=>i.getAttribute(n)||a;return e.width=t("width",null),e.height=t("height",null),e.rotate=r3(t("rotate","")),c3(e,t("flip","")),e.preserveAspectRatio=t("preserveAspectRatio",t("preserveaspectratio","")),e}function l3(i,e){for(let t in Ug)if(i[t]!==e[t])return!0;return!1}var Wg=/^[a-z0-9]+(-[a-z0-9]+)*$/,is=(i,e,t,n="")=>{let a=i.split(":");if(i.slice(0,1)==="@"){if(a.length<2||a.length>3)return null;n=a.shift().slice(1)}if(a.length>3||!a.length)return null;if(a.length>1){let o=a.pop(),c=a.pop(),l={provider:a.length>0?a[0]:n,prefix:c,name:o};return e&&!xo(l)?null:l}let s=a[0],r=s.split("-");if(r.length>1){let o={provider:n,prefix:r.shift(),name:r.join("-")};return e&&!xo(o)?null:o}if(t&&n===""){let o={provider:n,prefix:"",name:s};return e&&!xo(o,t)?null:o}return null},xo=(i,e)=>i?!!((e&&i.prefix===""||i.prefix)&&i.name):!1;function d3(i,e){let t=i.icons,n=i.aliases||Object.create(null),a=Object.create(null);function s(r){if(t[r])return a[r]=[];if(!(r in a)){a[r]=null;let o=n[r]&&n[r].parent,c=o&&s(o);c&&(a[r]=[o].concat(c))}return a[r]}return Object.keys(t).concat(Object.keys(n)).forEach(s),a}function h3(i,e){let t={};!i.hFlip!=!e.hFlip&&(t.hFlip=!0),!i.vFlip!=!e.vFlip&&(t.vFlip=!0);let n=((i.rotate||0)+(e.rotate||0))%4;return n&&(t.rotate=n),t}function Eg(i,e){let t=h3(i,e);for(let n in Wh)n in Ao?n in i&&!(n in t)&&(t[n]=Ao[n]):n in e?t[n]=e[n]:n in i&&(t[n]=i[n]);return t}function u3(i,e,t){let n=i.icons,a=i.aliases||Object.create(null),s={};function r(o){s=Eg(n[o]||a[o],s)}return r(e),t.forEach(r),Eg(i,s)}function $g(i,e){let t=[];if(typeof i!="object"||typeof i.icons!="object")return t;i.not_found instanceof Array&&i.not_found.forEach(a=>{e(a,null),t.push(a)});let n=d3(i);for(let a in n){let s=n[a];s&&(e(a,u3(i,a,s)),t.push(a))}return t}var p3=D({provider:"",aliases:{},not_found:{}},zg);function zh(i,e){for(let t in e)if(t in i&&typeof i[t]!=typeof e[t])return!1;return!0}function Gg(i){if(typeof i!="object"||i===null)return null;let e=i;if(typeof e.prefix!="string"||!i.icons||typeof i.icons!="object"||!zh(i,p3))return null;let t=e.icons;for(let a in t){let s=t[a];if(!a||typeof s.body!="string"||!zh(s,Wh))return null}let n=e.aliases||Object.create(null);for(let a in n){let s=n[a],r=s.parent;if(!a||typeof r!="string"||!t[r]&&!n[r]||!zh(s,Wh))return null}return e}var So=Object.create(null);function f3(i,e){return{provider:i,prefix:e,icons:Object.create(null),missing:new Set}}function $t(i,e){let t=So[i]||(So[i]=Object.create(null));return t[e]||(t[e]=f3(i,e))}function Xg(i,e){return Gg(e)?$g(e,(t,n)=>{n?i.icons[t]=n:i.missing.add(t)}):[]}function g3(i,e,t){try{if(typeof t.body=="string")return i.icons[e]=D({},t),!0}catch{}return!1}function y3(i,e){let t=[];return(typeof i=="string"?[i]:Object.keys(So)).forEach(n=>{(typeof n=="string"&&typeof e=="string"?[e]:Object.keys(So[n]||{})).forEach(a=>{let s=$t(n,a);t=t.concat(Object.keys(s.icons).map(r=>(n!==""?"@"+n+":":"")+a+":"+r))})}),t}var es=!1;function Zg(i){return typeof i=="boolean"&&(es=i),es}function ts(i){let e=typeof i=="string"?is(i,!0,es):i;if(e){let t=$t(e.provider,e.prefix),n=e.name;return t.icons[n]||(t.missing.has(n)?null:void 0)}}function Kg(i,e){let t=is(i,!0,es);if(!t)return!1;let n=$t(t.provider,t.prefix);return e?g3(n,t.name,e):(n.missing.add(t.name),!0)}function Lg(i,e){if(typeof i!="object")return!1;if(typeof e!="string"&&(e=i.provider||""),es&&!e&&!i.prefix){let n=!1;return Gg(i)&&(i.prefix="",$g(i,(a,s)=>{Kg(a,s)&&(n=!0)})),n}let t=i.prefix;return xo({prefix:t,name:"a"})?!!Xg($t(e,t),i):!1}function m3(i){return!!ts(i)}function k3(i){let e=ts(i);return e&&D(D({},ns),e)}function Yg(i,e){i.forEach(t=>{let n=t.loaderCallbacks;n&&(t.loaderCallbacks=n.filter(a=>a.id!==e))})}function v3(i){i.pendingCallbacksFlag||(i.pendingCallbacksFlag=!0,setTimeout(()=>{i.pendingCallbacksFlag=!1;let e=i.loaderCallbacks?i.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1,n=i.provider,a=i.prefix;e.forEach(s=>{let r=s.icons,o=r.pending.length;r.pending=r.pending.filter(c=>{if(c.prefix!==a)return!0;let l=c.name;if(i.icons[l])r.loaded.push({provider:n,prefix:a,name:l});else if(i.missing.has(l))r.missing.push({provider:n,prefix:a,name:l});else return t=!0,!0;return!1}),r.pending.length!==o&&(t||Yg([i],s.id),s.callback(r.loaded.slice(0),r.missing.slice(0),r.pending.slice(0),s.abort))})}))}var M3=0;function w3(i,e,t){let n=M3++,a=Yg.bind(null,t,n);if(!e.pending.length)return a;let s={id:n,icons:e,callback:i,abort:a};return t.forEach(r=>{(r.loaderCallbacks||(r.loaderCallbacks=[])).push(s)}),a}function b3(i){let e={loaded:[],missing:[],pending:[]},t=Object.create(null);i.sort((a,s)=>a.provider!==s.provider?a.provider.localeCompare(s.provider):a.prefix!==s.prefix?a.prefix.localeCompare(s.prefix):a.name.localeCompare(s.name));let n={provider:"",prefix:"",name:""};return i.forEach(a=>{if(n.name===a.name&&n.prefix===a.prefix&&n.provider===a.provider)return;n=a;let s=a.provider,r=a.prefix,o=a.name,c=t[s]||(t[s]=Object.create(null)),l=c[r]||(c[r]=$t(s,r)),d;o in l.icons?d=e.loaded:r===""||l.missing.has(o)?d=e.missing:d=e.pending;let h={provider:s,prefix:r,name:o};d.push(h)}),e}var $h=Object.create(null);function _g(i,e){$h[i]=e}function Gh(i){return $h[i]||$h[""]}function C3(i,e=!0,t=!1){let n=[];return i.forEach(a=>{let s=typeof a=="string"?is(a,e,t):a;s&&n.push(s)}),n}function Yh(i){let e;if(typeof i.resources=="string")e=[i.resources];else if(e=i.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:i.path||"/",maxURL:i.maxURL||500,rotate:i.rotate||750,timeout:i.timeout||5e3,random:i.random===!0,index:i.index||0,dataAfterTimeout:i.dataAfterTimeout!==!1}}var Lo=Object.create(null),Ya=["https://api.simplesvg.com","https://api.unisvg.com"],Io=[];for(;Ya.length>0;)Ya.length===1||Math.random()>.5?Io.push(Ya.shift()):Io.push(Ya.pop());Lo[""]=Yh({resources:["https://api.iconify.design"].concat(Io)});function Dg(i,e){let t=Yh(e);return t===null?!1:(Lo[i]=t,!0)}function _o(i){return Lo[i]}function x3(){return Object.keys(Lo)}var I3={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function A3(i,e,t,n){let a=i.resources.length,s=i.random?Math.floor(Math.random()*a):i.index,r;if(i.random){let b=i.resources.slice(0);for(r=[];b.length>1;){let I=Math.floor(Math.random()*b.length);r.push(b[I]),b=b.slice(0,I).concat(b.slice(I+1))}r=r.concat(b)}else r=i.resources.slice(s).concat(i.resources.slice(0,s));let o=Date.now(),c="pending",l=0,d,h=null,u=[],p=[];typeof n=="function"&&p.push(n);function f(){h&&(clearTimeout(h),h=null)}function g(){c==="pending"&&(c="aborted"),f(),u.forEach(b=>{b.status==="pending"&&(b.status="aborted")}),u=[]}function m(b,I){I&&(p=[]),typeof b=="function"&&p.push(b)}function y(){return{startTime:o,payload:e,status:c,queriesSent:l,queriesPending:u.length,subscribe:m,abort:g}}function v(){c="failed",p.forEach(b=>{b(void 0,d)})}function M(){u.forEach(b=>{b.status==="pending"&&(b.status="aborted")}),u=[]}function k(b,I,E){let w=I!=="success";switch(u=u.filter(x=>x!==b),c){case"pending":break;case"failed":if(w||!i.dataAfterTimeout)return;break;default:return}if(I==="abort"){d=E,v();return}if(w){d=E,u.length||(r.length?C():v());return}if(f(),M(),!i.random){let x=i.resources.indexOf(b.resource);x!==-1&&x!==i.index&&(i.index=x)}c="completed",p.forEach(x=>{x(E)})}function C(){if(c!=="pending")return;f();let b=r.shift();if(b===void 0){if(u.length){h=setTimeout(()=>{f(),c==="pending"&&(M(),v())},i.timeout);return}v();return}let I={status:"pending",resource:b,callback:(E,w)=>{k(I,E,w)}};u.push(I),l++,h=setTimeout(C,i.rotate),t(b,e,I.callback)}return setTimeout(C),y}function Qg(i){let e=D(D({},I3),i),t=[];function n(){t=t.filter(r=>r().status==="pending")}function a(r,o,c){let l=A3(e,r,o,(d,h)=>{n(),c&&c(d,h)});return t.push(l),l}function s(r){return t.find(o=>r(o))||null}return{query:a,find:s,setIndex:r=>{e.index=r},getIndex:()=>e.index,cleanup:n}}function Tg(){}var qh=Object.create(null);function S3(i){if(!qh[i]){let e=_o(i);if(!e)return;qh[i]={config:e,redundancy:Qg(e)}}return qh[i]}function Jg(i,e,t){let n,a;if(typeof i=="string"){let s=Gh(i);if(!s)return t(void 0,424),Tg;a=s.send;let r=S3(i);r&&(n=r.redundancy)}else{let s=Yh(i);if(s){n=Qg(s);let r=Gh(i.resources?i.resources[0]:"");r&&(a=r.send)}}return!n||!a?(t(void 0,424),Tg):n.query(e,a,t)().abort}function Pg(){}function E3(i){i.iconsLoaderFlag||(i.iconsLoaderFlag=!0,setTimeout(()=>{i.iconsLoaderFlag=!1,v3(i)}))}function L3(i){let e=[],t=[];return i.forEach(n=>{(n.match(Wg)?e:t).push(n)}),{valid:e,invalid:t}}function Qa(i,e,t){function n(){let a=i.pendingIcons;e.forEach(s=>{a&&a.delete(s),i.icons[s]||i.missing.add(s)})}if(t&&typeof t=="object")try{if(!Xg(i,t).length){n();return}}catch(a){console.error(a)}n(),E3(i)}function Rg(i,e){i instanceof Promise?i.then(t=>{e(t)}).catch(()=>{e(null)}):e(i)}function _3(i,e){i.iconsToLoad?i.iconsToLoad=i.iconsToLoad.concat(e).sort():i.iconsToLoad=e,i.iconsQueueFlag||(i.iconsQueueFlag=!0,setTimeout(()=>{i.iconsQueueFlag=!1;let{provider:t,prefix:n}=i,a=i.iconsToLoad;if(delete i.iconsToLoad,!a||!a.length)return;let s=i.loadIcon;if(i.loadIcons&&(a.length>1||!s)){Rg(i.loadIcons(a,n,t),l=>{Qa(i,a,l)});return}if(s){a.forEach(l=>{Rg(s(l,n,t),d=>{Qa(i,[l],d?{prefix:n,icons:{[l]:d}}:null)})});return}let{valid:r,invalid:o}=L3(a);if(o.length&&Qa(i,o,null),!r.length)return;let c=n.match(Wg)?Gh(t):null;if(!c){Qa(i,r,null);return}c.prepare(t,n,r).forEach(l=>{Jg(t,l,d=>{Qa(i,l.icons,d)})})}))}var Qh=(i,e)=>{let t=b3(C3(i,!0,Zg()));if(!t.pending.length){let o=!0;return e&&setTimeout(()=>{o&&e(t.loaded,t.missing,t.pending,Pg)}),()=>{o=!1}}let n=Object.create(null),a=[],s,r;return t.pending.forEach(o=>{let{provider:c,prefix:l}=o;if(l===r&&c===s)return;s=c,r=l,a.push($t(c,l));let d=n[c]||(n[c]=Object.create(null));d[l]||(d[l]=[])}),t.pending.forEach(o=>{let{provider:c,prefix:l,name:d}=o,h=$t(c,l),u=h.pendingIcons||(h.pendingIcons=new Set);u.has(d)||(u.add(d),n[c][l].push(d))}),a.forEach(o=>{let c=n[o.provider][o.prefix];c.length&&_3(o,c)}),e?w3(e,t,a):Pg},D3=i=>new Promise((e,t)=>{let n=typeof i=="string"?is(i,!0):i;if(!n){t(i);return}Qh([n||i],a=>{if(a.length&&n){let s=ts(n);if(s){e(D(D({},ns),s));return}}t(i)})});function Og(i){try{let e=typeof i=="string"?JSON.parse(i):i;if(typeof e.body=="string")return D({},e)}catch{}}function T3(i,e){if(typeof i=="object")return{data:Og(i),value:i};if(typeof i!="string")return{value:i};if(i.includes("{")){let s=Og(i);if(s)return{data:s,value:i}}let t=is(i,!0,!0);if(!t)return{value:i};let n=ts(t);if(n!==void 0||!t.prefix)return{value:i,name:t,data:n};let a=Qh([t],()=>e(i,t,ts(t)));return{value:i,name:t,loading:a}}var ey=!1;try{ey=navigator.vendor.indexOf("Apple")===0}catch{}function P3(i,e){switch(e){case"svg":case"bg":case"mask":return e}return e!=="style"&&(ey||i.indexOf("<a")===-1)?"svg":i.indexOf("currentColor")===-1?"bg":"mask"}var R3=/(-?[0-9.]*[0-9]+[0-9.]*)/g,O3=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Xh(i,e,t){if(e===1)return i;if(t=t||100,typeof i=="number")return Math.ceil(i*e*t)/t;if(typeof i!="string")return i;let n=i.split(R3);if(n===null||!n.length)return i;let a=[],s=n.shift(),r=O3.test(s);for(;;){if(r){let o=parseFloat(s);isNaN(o)?a.push(s):a.push(Math.ceil(o*e*t)/t)}else a.push(s);if(s=n.shift(),s===void 0)return a.join("");r=!r}}function F3(i,e="defs"){let t="",n=i.indexOf("<"+e);for(;n>=0;){let a=i.indexOf(">",n),s=i.indexOf("</"+e);if(a===-1||s===-1)break;let r=i.indexOf(">",s);if(r===-1)break;t+=i.slice(a+1,s).trim(),i=i.slice(0,n).trim()+i.slice(r+1)}return{defs:t,content:i}}function N3(i,e){return i?"<defs>"+i+"</defs>"+e:e}function H3(i,e,t){let n=F3(i);return N3(n.defs,e+n.content+t)}var j3=i=>i==="unset"||i==="undefined"||i==="none";function ty(i,e){let t=D(D({},ns),i),n=D(D({},qg),e),a={left:t.left,top:t.top,width:t.width,height:t.height},s=t.body;[t,n].forEach(g=>{let m=[],y=g.hFlip,v=g.vFlip,M=g.rotate;y?v?M+=2:(m.push("translate("+(a.width+a.left).toString()+" "+(0-a.top).toString()+")"),m.push("scale(-1 1)"),a.top=a.left=0):v&&(m.push("translate("+(0-a.left).toString()+" "+(a.height+a.top).toString()+")"),m.push("scale(1 -1)"),a.top=a.left=0);let k;switch(M<0&&(M-=Math.floor(M/4)*4),M=M%4,M){case 1:k=a.height/2+a.top,m.unshift("rotate(90 "+k.toString()+" "+k.toString()+")");break;case 2:m.unshift("rotate(180 "+(a.width/2+a.left).toString()+" "+(a.height/2+a.top).toString()+")");break;case 3:k=a.width/2+a.left,m.unshift("rotate(-90 "+k.toString()+" "+k.toString()+")");break}M%2===1&&(a.left!==a.top&&(k=a.left,a.left=a.top,a.top=k),a.width!==a.height&&(k=a.width,a.width=a.height,a.height=k)),m.length&&(s=H3(s,'<g transform="'+m.join(" ")+'">',"</g>"))});let r=n.width,o=n.height,c=a.width,l=a.height,d,h;r===null?(h=o===null?"1em":o==="auto"?l:o,d=Xh(h,c/l)):(d=r==="auto"?c:r,h=o===null?Xh(d,l/c):o==="auto"?l:o);let u={},p=(g,m)=>{j3(m)||(u[g]=m.toString())};p("width",d),p("height",h);let f=[a.left,a.top,c,l];return u.viewBox=f.join(" "),{attributes:u,viewBox:f,body:s}}function Jh(i,e){let t=i.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(let n in e)t+=" "+n+'="'+e[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+i+"</svg>"}function B3(i){return i.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function V3(i){return"data:image/svg+xml,"+B3(i)}function ny(i){return'url("'+V3(i)+'")'}var z3=()=>{let i;try{if(i=fetch,typeof i=="function")return i}catch{}},Eo=z3();function q3(i){Eo=i}function U3(){return Eo}function W3(i,e){let t=_o(i);if(!t)return 0;let n;if(!t.maxURL)n=0;else{let a=0;t.resources.forEach(r=>{a=Math.max(a,r.length)});let s=e+".json?icons=";n=t.maxURL-a-t.path.length-s.length}return n}function $3(i){return i===404}var G3=(i,e,t)=>{let n=[],a=W3(i,e),s="icons",r={type:s,provider:i,prefix:e,icons:[]},o=0;return t.forEach((c,l)=>{o+=c.length+1,o>=a&&l>0&&(n.push(r),r={type:s,provider:i,prefix:e,icons:[]},o=c.length),r.icons.push(c)}),n.push(r),n};function X3(i){if(typeof i=="string"){let e=_o(i);if(e)return e.path}return"/"}var Z3=(i,e,t)=>{if(!Eo){t("abort",424);return}let n=X3(e.provider);switch(e.type){case"icons":{let s=e.prefix,r=e.icons.join(","),o=new URLSearchParams({icons:r});n+=s+".json?"+o.toString();break}case"custom":{let s=e.uri;n+=s.slice(0,1)==="/"?s.slice(1):s;break}default:t("abort",400);return}let a=503;Eo(i+n).then(s=>{let r=s.status;if(r!==200){setTimeout(()=>{t($3(r)?"abort":"next",r)});return}return a=501,s.json()}).then(s=>{if(typeof s!="object"||s===null){setTimeout(()=>{s===404?t("abort",s):t("next",a)});return}setTimeout(()=>{t("success",s)})}).catch(()=>{t("next",a)})},K3={prepare:G3,send:Z3};function Y3(i,e,t){$t(t||"",e).loadIcons=i}function Q3(i,e,t){$t(t||"",e).loadIcon=i}var Uh="data-style",iy="";function J3(i){iy=i}function Fg(i,e){let t=Array.from(i.childNodes).find(n=>n.hasAttribute&&n.hasAttribute(Uh));t||(t=document.createElement("style"),t.setAttribute(Uh,Uh),i.appendChild(t)),t.textContent=":host{display:inline-block;vertical-align:"+(e?"-0.125em":"0")+"}span,svg{display:block;margin:auto}"+iy}function ay(){_g("",K3),Zg(!0);let i;try{i=window}catch{}if(i){if(i.IconifyPreload!==void 0){let t=i.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(a=>{try{(typeof a!="object"||a===null||a instanceof Array||typeof a.icons!="object"||typeof a.prefix!="string"||!Lg(a))&&console.error(n)}catch{console.error(n)}})}if(i.IconifyProviders!==void 0){let t=i.IconifyProviders;if(typeof t=="object"&&t!==null)for(let n in t){let a="IconifyProviders["+n+"] is invalid.";try{let s=t[n];if(typeof s!="object"||!s||s.resources===void 0)continue;Dg(n,s)||console.error(a)}catch{console.error(a)}}}}return{iconLoaded:m3,getIcon:k3,listIcons:y3,addIcon:Kg,addCollection:Lg,calculateSize:Xh,buildIcon:ty,iconToHTML:Jh,svgToURL:ny,loadIcons:Qh,loadIcon:D3,addAPIProvider:Dg,setCustomIconLoader:Q3,setCustomIconsLoader:Y3,appendCustomStyle:J3,_api:{getAPIConfig:_o,setAPIModule:_g,sendAPIQuery:Jg,setFetch:q3,getFetch:U3,listAPIProviders:x3}}}var Zh={"background-color":"currentColor"},sy={"background-color":"transparent"},Ng={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},Hg={"-webkit-mask":Zh,mask:Zh,background:sy};for(let i in Hg){let e=Hg[i];for(let t in Ng)e[i+"-"+t]=Ng[t]}function jg(i){return i?i+(i.match(/^[-0-9.]+$/)?"px":""):"inherit"}function ew(i,e,t){let n=document.createElement("span"),a=i.body;a.indexOf("<a")!==-1&&(a+="<!-- "+Date.now()+" -->");let s=i.attributes,r=Jh(a,re(D({},s),{width:e.width+"",height:e.height+""})),o=ny(r),c=n.style,l=D({"--svg":o,width:jg(s.width),height:jg(s.height)},t?Zh:sy);for(let d in l)c.setProperty(d,l[d]);return n}var Ja;function tw(){try{Ja=window.trustedTypes.createPolicy("iconify",{createHTML:i=>i})}catch{Ja=null}}function nw(i){return Ja===void 0&&tw(),Ja?Ja.createHTML(i):i}function iw(i){let e=document.createElement("span"),t=i.attributes,n="";t.width||(n="width: inherit;"),t.height||(n+="height: inherit;"),n&&(t.style=n);let a=Jh(i.body,t);return e.innerHTML=nw(a),e.firstChild}function Kh(i){return Array.from(i.childNodes).find(e=>{let t=e.tagName&&e.tagName.toUpperCase();return t==="SPAN"||t==="SVG"})}function Bg(i,e){let t=e.icon.data,n=e.customisations,a=ty(t,n);n.preserveAspectRatio&&(a.attributes.preserveAspectRatio=n.preserveAspectRatio);let s=e.renderedMode,r;s==="svg"?r=iw(a):r=ew(a,D(D({},ns),t),s==="mask");let o=Kh(i);o?r.tagName==="SPAN"&&o.tagName===r.tagName?o.setAttribute("style",r.getAttribute("style")):i.replaceChild(r,o):i.appendChild(r)}function Vg(i,e,t){let n=t&&(t.rendered?t:t.lastRender);return{rendered:!1,inline:e,icon:i,lastRender:n}}function aw(i="iconify-icon"){let e,t;try{e=window.customElements,t=window.HTMLElement}catch{return}if(!e||!t)return;let n=e.get(i);if(n)return n;let a=["icon","mode","inline","noobserver","width","height","rotate","flip"],s=class extends t{_shadowRoot;_initialised=!1;_state;_checkQueued=!1;_connected=!1;_observer=null;_visible=!0;constructor(){super();let o=this._shadowRoot=this.attachShadow({mode:"open"}),c=this.hasAttribute("inline");Fg(o,c),this._state=Vg({value:""},c),this._queueCheck()}connectedCallback(){this._connected=!0,this.startObserver()}disconnectedCallback(){this._connected=!1,this.stopObserver()}static get observedAttributes(){return a.slice(0)}attributeChangedCallback(o){switch(o){case"inline":{let c=this.hasAttribute("inline"),l=this._state;c!==l.inline&&(l.inline=c,Fg(this._shadowRoot,c));break}case"noobserver":{this.hasAttribute("noobserver")?this.startObserver():this.stopObserver();break}default:this._queueCheck()}}get icon(){let o=this.getAttribute("icon");if(o&&o.slice(0,1)==="{")try{return JSON.parse(o)}catch{}return o}set icon(o){typeof o=="object"&&(o=JSON.stringify(o)),this.setAttribute("icon",o)}get inline(){return this.hasAttribute("inline")}set inline(o){o?this.setAttribute("inline","true"):this.removeAttribute("inline")}get observer(){return this.hasAttribute("observer")}set observer(o){o?this.setAttribute("observer","true"):this.removeAttribute("observer")}restartAnimation(){let o=this._state;if(o.rendered){let c=this._shadowRoot;if(o.renderedMode==="svg")try{c.lastChild.setCurrentTime(0);return}catch{}Bg(c,o)}}get status(){let o=this._state;return o.rendered?"rendered":o.icon.data===null?"failed":"loading"}_queueCheck(){this._checkQueued||(this._checkQueued=!0,setTimeout(()=>{this._check()}))}_check(){if(!this._checkQueued)return;this._checkQueued=!1;let o=this._state,c=this.getAttribute("icon");if(c!==o.icon.value){this._iconChanged(c);return}if(!o.rendered||!this._visible)return;let l=this.getAttribute("mode"),d=Sg(this);(o.attrMode!==l||l3(o.customisations,d)||!Kh(this._shadowRoot))&&this._renderIcon(o.icon,d,l)}_iconChanged(o){let c=T3(o,(l,d,h)=>{let u=this._state;if(u.rendered||this.getAttribute("icon")!==l)return;let p={value:l,name:d,data:h};p.data?this._gotIconData(p):u.icon=p});c.data?this._gotIconData(c):this._state=Vg(c,this._state.inline,this._state)}_forceRender(){if(!this._visible){let o=Kh(this._shadowRoot);o&&this._shadowRoot.removeChild(o);return}this._queueCheck()}_gotIconData(o){this._checkQueued=!1,this._renderIcon(o,Sg(this),this.getAttribute("mode"))}_renderIcon(o,c,l){let d=P3(o.data.body,l),h=this._state.inline;Bg(this._shadowRoot,this._state={rendered:!0,icon:o,inline:h,customisations:c,attrMode:l,renderedMode:d})}startObserver(){if(!this._observer&&!this.hasAttribute("noobserver"))try{this._observer=new IntersectionObserver(o=>{let c=o.some(l=>l.isIntersecting);c!==this._visible&&(this._visible=c,this._forceRender())}),this._observer.observe(this)}catch{if(this._observer){try{this._observer.disconnect()}catch{}this._observer=null}}}stopObserver(){this._observer&&(this._observer.disconnect(),this._observer=null,this._visible=!0,this._connected&&this._forceRender())}};a.forEach(o=>{o in s.prototype||Object.defineProperty(s.prototype,o,{get:function(){return this.getAttribute(o)},set:function(c){c!==null?this.setAttribute(o,c):this.removeAttribute(o)}})});let r=ay();for(let o in r)s[o]=s.prototype[o]=r[o];return e.define(i,s),s}var sw=aw()||ay(),{iconLoaded:_O,getIcon:DO,listIcons:TO,addIcon:PO,addCollection:RO,calculateSize:OO,buildIcon:FO,iconToHTML:NO,svgToURL:HO,loadIcons:ry,loadIcon:jO,setCustomIconLoader:BO,setCustomIconsLoader:VO,addAPIProvider:zO,_api:qO}=sw;var ta={};_p(ta,{AbortException:()=>ib,AnnotationEditorLayer:()=>ab,AnnotationEditorParamsType:()=>sb,AnnotationEditorType:()=>_u,AnnotationEditorUIManager:()=>rb,AnnotationLayer:()=>ob,AnnotationMode:()=>cb,ColorPicker:()=>lb,DOMSVGFactory:()=>db,DrawLayer:()=>hb,FeatureTest:()=>ub,GlobalWorkerOptions:()=>Du,ImageKind:()=>pb,InvalidPDFException:()=>fb,MissingPDFException:()=>gb,OPS:()=>yb,OutputScale:()=>mb,PDFDataRangeTransport:()=>kb,PDFDateString:()=>vb,PDFWorker:()=>Mb,PasswordResponses:()=>wb,PermissionFlag:()=>bb,PixelsPerInch:()=>Cb,RenderingCancelledException:()=>xb,TextLayer:()=>Ib,UnexpectedResponseException:()=>Ab,Util:()=>Sb,VerbosityLevel:()=>Tu,XfaLayer:()=>Eb,build:()=>Lb,createValidAbsoluteUrl:()=>_b,fetchData:()=>Db,getDocument:()=>Pu,getFilenameFromUrl:()=>Tb,getPdfFilenameFromUrl:()=>Pb,getXfaPageViewport:()=>Rb,isDataScheme:()=>Ob,isPdfFile:()=>Fb,noContextMenu:()=>Nb,normalizeUnicode:()=>Hb,setLayerDimensions:()=>jb,shadow:()=>Bb,version:()=>xs});var cs={};cs.d=(i,e)=>{for(var t in e)cs.o(e,t)&&!cs.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})};cs.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var j=globalThis.pdfjsLib={};cs.d(j,{AbortException:()=>Qt,AnnotationEditorLayer:()=>nb,AnnotationEditorParamsType:()=>N,AnnotationEditorType:()=>B,AnnotationEditorUIManager:()=>fs,AnnotationLayer:()=>yu,AnnotationMode:()=>mn,ColorPicker:()=>yc,DOMSVGFactory:()=>vs,DrawLayer:()=>bu,FeatureTest:()=>He,GlobalWorkerOptions:()=>ai,ImageKind:()=>No,InvalidPDFException:()=>Bo,MissingPDFException:()=>Yt,OPS:()=>At,OutputScale:()=>ps,PDFDataRangeTransport:()=>nc,PDFDateString:()=>zo,PDFWorker:()=>Ji,PasswordResponses:()=>dw,PermissionFlag:()=>lw,PixelsPerInch:()=>kn,RenderingCancelledException:()=>us,TextLayer:()=>ms,UnexpectedResponseException:()=>ea,Util:()=>T,VerbosityLevel:()=>kc,XfaLayer:()=>sc,build:()=>eb,createValidAbsoluteUrl:()=>fw,fetchData:()=>bc,getDocument:()=>Kw,getFilenameFromUrl:()=>bw,getPdfFilenameFromUrl:()=>Cw,getXfaPageViewport:()=>xw,isDataScheme:()=>Cc,isPdfFile:()=>Iu,noContextMenu:()=>yt,normalizeUnicode:()=>vw,setLayerDimensions:()=>si,shadow:()=>Y,version:()=>Jw});var Ve=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),by=[1,0,0,1,0,0],s1=[.001,0,0,.001,0,0],rw=1e7,Fo=1.35,ow=.35,GO=ow/Fo,it={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},mn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},cw="pdfjs_internal_editor_",B={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},N={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},lw={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Be={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},No={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Re={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var as={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var kc={ERRORS:0,WARNINGS:1,INFOS:5},At={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},dw={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},vc=kc.WARNINGS;function hw(i){Number.isInteger(i)&&(vc=i)}function uw(){return vc}function Mc(i){vc>=kc.INFOS&&console.log(`Info: ${i}`)}function z(i){vc>=kc.WARNINGS&&console.log(`Warning: ${i}`)}function he(i){throw new Error(i)}function Oe(i,e){i||he(e)}function pw(i){switch(i?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function fw(i,e=null,t=null){if(!i)return null;try{if(t&&typeof i=="string"&&(t.addDefaultProtocol&&i.startsWith("www.")&&i.match(/\./g)?.length>=2&&(i=`http://${i}`),t.tryConvertEncoding))try{i=kw(i)}catch{}let n=e?new URL(i,e):new URL(i);if(pw(n))return n}catch{}return null}function Y(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}var vn=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})(),ls=class extends vn{constructor(e,t){super(e,"PasswordException"),this.code=t}},ds=class extends vn{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},Bo=class extends vn{constructor(e){super(e,"InvalidPDFException")}},Yt=class extends vn{constructor(e){super(e,"MissingPDFException")}},ea=class extends vn{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}},r1=class extends vn{constructor(e){super(e,"FormatError")}},Qt=class extends vn{constructor(e){super(e,"AbortException")}};function Cy(i){(typeof i!="object"||i?.length===void 0)&&he("Invalid argument for bytesToString");let e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);let n=[];for(let a=0;a<e;a+=t){let s=Math.min(a+t,e),r=i.subarray(a,s);n.push(String.fromCharCode.apply(null,r))}return n.join("")}function wc(i){typeof i!="string"&&he("Invalid argument for stringToBytes");let e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function gw(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function Cu(i){let e=Object.create(null);for(let[t,n]of i)e[t]=n;return e}function yw(){let i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function mw(){try{return new Function(""),!0}catch{return!1}}var He=class{static get isLittleEndian(){return Y(this,"isLittleEndian",yw())}static get isEvalSupported(){return Y(this,"isEvalSupported",mw())}static get isOffscreenCanvasSupported(){return Y(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?Y(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):Y(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return Y(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},e1=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0")),T=class{static makeHexColor(e,t,n){return`#${e1[e]}${e1[t]}${e1[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){let n=e[0]*t[0]+e[1]*t[2]+t[4],a=e[0]*t[1]+e[1]*t[3]+t[5];return[n,a]}static applyInverseTransform(e,t){let n=t[0]*t[3]-t[1]*t[2],a=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[a,s]}static getAxialAlignedBoundingBox(e,t){let n=this.applyTransform(e,t),a=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),r=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],a[0],s[0],r[0]),Math.min(n[1],a[1],s[1],r[1]),Math.max(n[0],a[0],s[0],r[0]),Math.max(n[1],a[1],s[1],r[1])]}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){let t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],a=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],r=e[2]*t[1]+e[3]*t[3],o=(n+r)/2,c=Math.sqrt((n+r)**2-4*(n*r-s*a))/2,l=o+c||1,d=o-c||1;return[Math.sqrt(l),Math.sqrt(d)]}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),a=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>a)return null;let s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),r=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>r?null:[n,s,a,r]}static#e(e,t,n,a,s,r,o,c,l,d){if(l<=0||l>=1)return;let h=1-l,u=l*l,p=u*l,f=h*(h*(h*e+3*l*t)+3*u*n)+p*a,g=h*(h*(h*s+3*l*r)+3*u*o)+p*c;d[0]=Math.min(d[0],f),d[1]=Math.min(d[1],g),d[2]=Math.max(d[2],f),d[3]=Math.max(d[3],g)}static#t(e,t,n,a,s,r,o,c,l,d,h,u){if(Math.abs(l)<1e-12){Math.abs(d)>=1e-12&&this.#e(e,t,n,a,s,r,o,c,-h/d,u);return}let p=d**2-4*h*l;if(p<0)return;let f=Math.sqrt(p),g=2*l;this.#e(e,t,n,a,s,r,o,c,(-d+f)/g,u),this.#e(e,t,n,a,s,r,o,c,(-d-f)/g,u)}static bezierBoundingBox(e,t,n,a,s,r,o,c,l){return l?(l[0]=Math.min(l[0],e,o),l[1]=Math.min(l[1],t,c),l[2]=Math.max(l[2],e,o),l[3]=Math.max(l[3],t,c)):l=[Math.min(e,o),Math.min(t,c),Math.max(e,o),Math.max(t,c)],this.#t(e,n,s,o,t,a,r,c,3*(-e+3*(n-s)+o),6*(e-2*n+s),3*(n-e),l),this.#t(e,n,s,o,t,a,r,c,3*(-t+3*(a-r)+c),6*(t-2*a+r),3*(a-t),l),l}};function kw(i){return decodeURIComponent(escape(i))}var t1=null,oy=null;function vw(i){return t1||(t1=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,oy=new Map([["\uFB05","\u017Ft"]])),i.replaceAll(t1,(e,t,n)=>t?t.normalize("NFKC"):oy.get(n))}function Mw(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();let i=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(i);else for(let e=0;e<32;e++)i[e]=Math.floor(Math.random()*255);return Cy(i)}var xu="pdfjs_internal_id_",Gt={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function ww(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(Cy(i))}var Zt="http://www.w3.org/2000/svg",kn=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};function bc(i,e="text"){return A(this,null,function*(){if(os(i,document.baseURI)){let t=yield fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{let a=new XMLHttpRequest;a.open("GET",i,!0),a.responseType=e,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(a.response);return}t(a.responseText);return}n(new Error(a.statusText))}},a.send(null)})})}var hs=class i{constructor({viewBox:e,scale:t,rotation:n,offsetX:a=0,offsetY:s=0,dontFlip:r=!1}){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=a,this.offsetY=s;let o=(e[2]+e[0])/2,c=(e[3]+e[1])/2,l,d,h,u;switch(n%=360,n<0&&(n+=360),n){case 180:l=-1,d=0,h=0,u=1;break;case 90:l=0,d=1,h=1,u=0;break;case 270:l=0,d=-1,h=-1,u=0;break;case 0:l=1,d=0,h=0,u=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}r&&(h=-h,u=-u);let p,f,g,m;l===0?(p=Math.abs(c-e[1])*t+a,f=Math.abs(o-e[0])*t+s,g=(e[3]-e[1])*t,m=(e[2]-e[0])*t):(p=Math.abs(o-e[0])*t+a,f=Math.abs(c-e[1])*t+s,g=(e[2]-e[0])*t,m=(e[3]-e[1])*t),this.transform=[l*t,d*t,h*t,u*t,p-l*t*o-h*t*c,f-d*t*o-u*t*c],this.width=g,this.height=m}get rawDims(){let{viewBox:e}=this;return Y(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:s=!1}={}){return new i({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:a,dontFlip:s})}convertToViewportPoint(e,t){return T.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){let t=T.applyTransform([e[0],e[1]],this.transform),n=T.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return T.applyInverseTransform([e,t],this.transform)}},us=class extends vn{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}};function Cc(i){let e=i.length,t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function Iu(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function bw(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function Cw(i,e="document.pdf"){if(typeof i!="string")return e;if(Cc(i))return z('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;let t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=t.exec(i),s=n.exec(a[1])||n.exec(a[2])||n.exec(a[3]);if(s&&(s=s[0],s.includes("%")))try{s=n.exec(decodeURIComponent(s))[0]}catch{}return s||e}var Vo=class{started=Object.create(null);times=[];time(e){e in this.started&&z(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||z(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:n}of this.times)t=Math.max(n.length,t);for(let{name:n,start:a,end:s}of this.times)e.push(`${n.padEnd(t)} ${s-a}ms
`);return e.join("")}};function os(i,e){try{let{protocol:t}=e?new URL(i,e):new URL(i);return t==="http:"||t==="https:"}catch{return!1}}function yt(i){i.preventDefault()}function cy(i){console.log("Deprecated API usage: "+i)}var zo=class{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let t=this.#e.exec(e);if(!t)return null;let n=parseInt(t[1],10),a=parseInt(t[2],10);a=a>=1&&a<=12?a-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let r=parseInt(t[4],10);r=r>=0&&r<=23?r:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;let l=t[7]||"Z",d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,l==="-"?(r+=d,o+=h):l==="+"&&(r-=d,o-=h),new Date(Date.UTC(n,a,s,r,o,c))}};function xw(i,{scale:e=1,rotation:t=0}){let{width:n,height:a}=i.attributes.style,s=[0,0,parseInt(n),parseInt(a)];return new hs({viewBox:s,scale:e,rotation:t})}function Au(i){if(i.startsWith("#")){let e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(z(`Not a valid color format: "${i}"`),[0,0,0])}function Iw(i){let e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(let t of i.keys()){e.style.color=t;let n=window.getComputedStyle(e).color;i.set(t,Au(n))}e.remove()}function ve(i){let{a:e,b:t,c:n,d:a,e:s,f:r}=i.getTransform();return[e,t,n,a,s,r]}function Xt(i){let{a:e,b:t,c:n,d:a,e:s,f:r}=i.getTransform().invertSelf();return[e,t,n,a,s,r]}function si(i,e,t=!1,n=!0){if(e instanceof hs){let{pageWidth:a,pageHeight:s}=e.rawDims,{style:r}=i,o=He.isCSSRoundSupported,c=`var(--scale-factor) * ${a}px`,l=`var(--scale-factor) * ${s}px`,d=o?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,h=o?`round(down, ${l}, var(--scale-round-y, 1px))`:`calc(${l})`;!t||e.rotation%180===0?(r.width=d,r.height=h):(r.width=h,r.height=d)}n&&i.setAttribute("data-main-rotation",e.rotation)}var ps=class{constructor(){let e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}},o1=class i{#e=null;#t=null;#n;#i=null;#a=null;static#s=null;constructor(e){this.#n=e,i.#s||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){let e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");let t=this.#n._uiManager._signal;e.addEventListener("contextmenu",yt,{signal:t}),e.addEventListener("pointerdown",i.#c,{signal:t});let n=this.#i=document.createElement("div");n.className="buttons",e.append(n);let a=this.#n.toolbarPosition;if(a){let{style:s}=e,r=this.#n._uiManager.direction==="ltr"?1-a[0]:a[0];s.insetInlineEnd=`${100*r}%`,s.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return this.#h(),e}get div(){return this.#e}static#c(e){e.stopPropagation()}#l(e){this.#n._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}#d(e){this.#n._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}#o(e){let t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#l.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",yt,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#a?.shown()}#h(){let{editorType:e,_uiManager:t}=this.#n,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",i.#s[e]),this.#o(n),n.addEventListener("click",a=>{t.delete()},{signal:t._signal}),this.#i.append(n)}get#r(){let e=document.createElement("div");return e.className="divider",e}addAltText(e){return A(this,null,function*(){let t=yield e.render();this.#o(t),this.#i.prepend(t,this.#r),this.#a=e})}addColorPicker(e){this.#t=e;let t=e.renderButton();this.#o(t),this.#i.prepend(t,this.#r)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}},c1=class{#e=null;#t=null;#n;constructor(e){this.#n=e}#i(){let e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",yt,{signal:this.#n._signal});let t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#s(),e}#a(e,t){let n=0,a=0;for(let s of e){let r=s.y+s.height;if(r<n)continue;let o=s.x+(t?s.width:0);if(r>n){a=o,n=r;continue}t?o>a&&(a=o):o<a&&(a=o)}return[t?1-a:a,n]}show(e,t,n){let[a,s]=this.#a(t,n),{style:r}=this.#t||=this.#i();e.append(this.#t),r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(){let e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");let n=this.#n._signal;e.addEventListener("contextmenu",yt,{signal:n}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:n}),this.#e.append(e)}};function qo(i,e,t){for(let n of t)e.addEventListener(n,i[n].bind(i))}function Aw(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var l1=class{#e=0;get id(){return`${cw}${this.#e++}`}},d1=class i{#e=Mw();#t=0;#n=null;static get _isSVGFittingCanvas(){let e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=e;let s=a.decode().then(()=>(n.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Y(this,"_isSVGFittingCanvas",s)}#i(e,t){return A(this,null,function*(){this.#n||=new Map;let n=this.#n.get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let a;if(typeof t=="string"?(n.url=t,a=yield bc(t,"blob")):t instanceof File?a=n.file=t:t instanceof Blob&&(a=t),a.type==="image/svg+xml"){let s=i._isSVGFittingCanvas,r=new FileReader,o=new Image,c=new Promise((l,d)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,l()},r.onload=()=>A(this,null,function*(){let h=n.svgUrl=r.result;o.src=(yield s)?`${h}#svgView(preserveAspectRatio(none))`:h}),o.onerror=r.onerror=d});r.readAsDataURL(a),yield c}else n.bitmap=yield createImageBitmap(a);n.refCounter=1}catch(a){console.error(a),n=null}return this.#n.set(e,n),n&&this.#n.set(n.id,n),n})}getFromFile(e){return A(this,null,function*(){let{lastModified:t,name:n,size:a,type:s}=e;return this.#i(`${t}_${n}_${a}_${s}`,e)})}getFromUrl(e){return A(this,null,function*(){return this.#i(e,e)})}getFromBlob(e,t){return A(this,null,function*(){let n=yield t;return this.#i(e,n)})}getFromId(e){return A(this,null,function*(){this.#n||=new Map;let t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){let{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)})}getFromCanvas(e,t){this.#n||=new Map;let n=this.#n.get(e);if(n?.bitmap)return n.refCounter+=1,n;let a=new OffscreenCanvas(t.width,t.height);return a.getContext("2d").drawImage(t,0,0),n={bitmap:a.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,n),this.#n.set(n.id,n),n}getSvgUrl(e){let t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;let t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;let{bitmap:n}=t;if(!t.url&&!t.file){let a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=a.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}},h1=class{#e=[];#t=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:n,mustExec:a,type:s=NaN,overwriteIfSameType:r=!1,keepUndo:o=!1}){if(a&&e(),this.#t)return;let c={cmd:e,undo:t,post:n,type:s};if(this.#i===-1){this.#e.length>0&&(this.#e.length=0),this.#i=0,this.#e.push(c);return}if(r&&this.#e[this.#i].type===s){o&&(c.undo=this.#e[this.#i].undo),this.#e[this.#i]=c;return}let l=this.#i+1;l===this.#n?this.#e.splice(0,1):(this.#i=l,l<this.#e.length&&this.#e.splice(l)),this.#e.push(c)}undo(){if(this.#i===-1)return;this.#t=!0;let{undo:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;let{cmd:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}},ri=class{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:t}=He.platform;for(let[n,a,s={}]of e)for(let r of n){let o=r.startsWith("mac+");t&&o?(this.callbacks.set(r.slice(4),{callback:a,options:s}),this.allKeys.add(r.split("+").at(-1))):!t&&!o&&(this.callbacks.set(r,{callback:a,options:s}),this.allKeys.add(r.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);let t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;let n=this.callbacks.get(this.#e(t));if(!n)return;let{callback:a,options:{bubbles:s=!1,args:r=[],checker:o=null}}=n;o&&!o(e,t)||(a.bind(e,...r,t)(),s||(t.stopPropagation(),t.preventDefault()))}},u1=class i{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let e=new Map([["CanvasText",null],["Canvas",null]]);return Iw(e),Y(this,"_colors",e)}convert(e){let t=Au(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(let[n,a]of this._colors)if(a.every((s,r)=>s===t[r]))return i._colorsMapping.get(n);return t}getHexCode(e){let t=this._colors.get(e);return t?T.makeHexColor(...t):e}},fs=(()=>{class i{#e=new AbortController;#t=null;#n=new Map;#i=new Map;#a=null;#s=null;#c=null;#l=new h1;#d=null;#o=0;#h=new Set;#r=null;#u=null;#f=new Set;#p=!1;#g=!1;#m=!1;#y=null;#k=null;#M=null;#C=null;#w=!1;#b=null;#_=new l1;#S=!1;#x=!1;#E=null;#A=null;#D=null;#P=null;#I=B.NONE;#v=new Set;#L=null;#T=null;#N=null;#V={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#B=[0,0];#F=null;#H=null;#j=null;#R=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let t=i.prototype,n=o=>o.#H.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),a=(o,{target:c})=>{if(c instanceof HTMLInputElement){let{type:l}=c;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Y(this,"_keyboardManager",new ri([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:a}],[["ctrl+z","mac+meta+z"],t.undo,{checker:a}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:a}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:a}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#H.contains(c)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#H.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:n}]]))}constructor(t,n,a,s,r,o,c,l,d,h,u){let p=this._signal=this.#e.signal;this.#H=t,this.#j=n,this.#a=a,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:p}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),s._on("setpreference",this.onSetPreference.bind(this),{signal:p}),s._on("switchannotationeditorparams",f=>this.updateParams(f.type,f.value),{signal:p}),this.#ee(),this.#ae(),this.#G(),this.#s=r.annotationStorage,this.#y=r.filterFactory,this.#T=o,this.#C=c||null,this.#p=l,this.#g=d,this.#m=h,this.#P=u||null,this.viewParameters={realScale:kn.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#R?.resolve(),this.#R=null,this.#e?.abort(),this.#e=null,this._signal=null;for(let t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#f.clear(),this.#t=null,this.#v.clear(),this.#l.destroy(),this.#a?.destroy(),this.#b?.hide(),this.#b=null,this.#k&&(clearTimeout(this.#k),this.#k=null),this.#F&&(clearTimeout(this.#F),this.#F=null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#P}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#m}get hcmFilter(){return Y(this,"hcmFilter",this.#T?this.#y.addHCMFilter(this.#T.foreground,this.#T.background):"none")}get direction(){return Y(this,"direction",getComputedStyle(this.#H).direction)}get highlightColors(){return Y(this,"highlightColors",this.#C?new Map(this.#C.split(",").map(t=>t.split("=").map(n=>n.trim()))):null)}get highlightColorNames(){return Y(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){this.#D=t}editAltText(t,n=!1){this.#a?.editAltText(this,t,n)}switchToMode(t,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,n){this._eventBus.dispatch("setpreference",{source:this,name:t,value:n})}onSetPreference({name:t,value:n}){t==="enableNewAltTextWhenAddingImage"&&(this.#m=n)}onPageChanging({pageNumber:t}){this.#o=t-1}focusMainContainer(){this.#H.focus()}findParent(t,n){for(let a of this.#i.values()){let{x:s,y:r,width:o,height:c}=a.div.getBoundingClientRect();if(t>=s&&t<=s+o&&n>=r&&n<=r+c)return a}return null}disableUserSelect(t=!1){this.#j.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#f.add(t)}removeShouldRescale(t){this.#f.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*kn.PDF_TO_CSS_UNITS;for(let n of this.#f)n.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#U({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#$(t){let{currentLayer:n}=this;if(n.hasTextLayer(t))return n;for(let a of this.#i.values())if(a.hasTextLayer(t))return a;return null}highlightSelection(t=""){let n=document.getSelection();if(!n||n.isCollapsed)return;let{anchorNode:a,anchorOffset:s,focusNode:r,focusOffset:o}=n,c=n.toString(),d=this.#U(n).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;n.empty();let u=this.#$(d),p=this.#I===B.NONE,f=()=>{u?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:a,anchorOffset:s,focusNode:r,focusOffset:o,text:c}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(B.HIGHLIGHT,f);return}f()}#Q(){let t=document.getSelection();if(!t||t.isCollapsed)return;let a=this.#U(t).closest(".textLayer"),s=this.getSelectionBoxes(a);s&&(this.#b||=new c1(this),this.#b.show(a,s,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#J(){let t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#b?.hide(),this.#L=null,this.#O({hasSelectedText:!1}));return}let{anchorNode:n}=t;if(n===this.#L)return;let s=this.#U(t).closest(".textLayer");if(!s){this.#L&&(this.#b?.hide(),this.#L=null,this.#O({hasSelectedText:!1}));return}if(this.#b?.hide(),this.#L=n,this.#O({hasSelectedText:!0}),!(this.#I!==B.HIGHLIGHT&&this.#I!==B.NONE)&&(this.#I===B.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){let r=this.#I===B.HIGHLIGHT?this.#$(s):null;r?.toggleDrawing();let o=new AbortController,c=this.combinedSignal(o),l=d=>{d.type==="pointerup"&&d.button!==0||(o.abort(),r?.toggleDrawing(!0),d.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",l,{signal:c}),window.addEventListener("blur",l,{signal:c})}}#W(t=""){this.#I===B.HIGHLIGHT?this.highlightSelection(t):this.#p&&this.#Q()}#ee(){document.addEventListener("selectionchange",this.#J.bind(this),{signal:this._signal})}#te(){if(this.#M)return;this.#M=new AbortController;let t=this.combinedSignal(this.#M);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ne(){this.#M?.abort(),this.#M=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")),!this.hasSelection)return;let{activeElement:t}=document;for(let n of this.#v)if(n.div.contains(t)){this.#A=[n,t],n._focusEventsAllowed=!1;break}}focus(){if(!this.#A)return;let[t,n]=this.#A;this.#A=null,n.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#G(){if(this.#E)return;this.#E=new AbortController;let t=this.combinedSignal(this.#E);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ie(){this.#E?.abort(),this.#E=null}#X(){if(this.#d)return;this.#d=new AbortController;let t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#Z(){this.#d?.abort(),this.#d=null}#ae(){let t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#G(),this.#X()}removeEditListeners(){this.#ie(),this.#Z()}dragOver(t){for(let{type:n}of t.dataTransfer.items)for(let a of this.#u)if(a.isHandlingMimeForPasting(n)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(let n of t.dataTransfer.items)for(let a of this.#u)if(a.isHandlingMimeForPasting(n.type)){a.paste(n,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;let n=[];for(let a of this.#v){let s=a.serialize(!0);s&&n.push(s)}n.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(t){this.copy(t),this.delete()}paste(t){return A(this,null,function*(){t.preventDefault();let{clipboardData:n}=t;for(let r of n.items)for(let o of this.#u)if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let a=n.getData("application/pdfjs");if(!a)return;try{a=JSON.parse(a)}catch(r){z(`paste: "${r.message}".`);return}if(!Array.isArray(a))return;this.unselectAll();let s=this.currentLayer;try{let r=[];for(let l of a){let d=yield s.deserialize(l);if(!d)return;r.push(d)}let o=()=>{for(let l of r)this.#K(l);this.#Y(r)},c=()=>{for(let l of r)l.remove()};this.addCommands({cmd:o,undo:c,mustExec:!0})}catch(r){z(`paste: "${r.message}".`)}})}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#I!==B.NONE&&!this.isEditorHandlingKeyboard&&i._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#O(t){Object.entries(t).some(([a,s])=>this.#V[a]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#V,t)}),this.#I===B.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#z([[N.HIGHLIGHT_FREE,!0]]))}#z(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#te(),this.#X(),this.#O({isEditing:this.#I!==B.NONE,isEmpty:this.#q(),hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:this.#l.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ne(),this.#Z(),this.#O({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(let n of this.#u)this.#z(n.defaultPropertiesToUpdate)}}getId(){return this.#_.id}get currentLayer(){return this.#i.get(this.#o)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#o}addLayer(t){this.#i.set(t.pageIndex,t),this.#S?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}updateMode(t,n=null,a=!1){return A(this,null,function*(){if(this.#I!==t&&!(this.#R&&(yield this.#R.promise,!this.#R))){if(this.#R=Promise.withResolvers(),this.#I=t,t===B.NONE){this.setEditingState(!1),this.#re(),this.#R.resolve();return}this.setEditingState(!0),yield this.#se(),this.unselectAll();for(let s of this.#i.values())s.updateMode(t);if(!n){a&&this.addNewEditorFromKeyboard(),this.#R.resolve();return}for(let s of this.#n.values())s.annotationElementId===n?(this.setSelected(s),s.enterInEditMode()):s.unselect();this.#R.resolve()}})}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#I&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,n){if(this.#u){switch(t){case N.CREATE:this.currentLayer.addNewEditor();return;case N.HIGHLIGHT_DEFAULT_COLOR:this.#D?.updateColor(n);break;case N.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#N||=new Map).set(t,n),this.showAllEditors("highlight",n);break}for(let a of this.#v)a.updateParams(t,n);for(let a of this.#u)a.updateDefaultParams(t,n)}}showAllEditors(t,n,a=!1){for(let r of this.#n.values())r.editorType===t&&r.show(n);(this.#N?.get(N.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#z([[N.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(t=!1){if(this.#x!==t){this.#x=t;for(let n of this.#i.values())t?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",t)}}#se(){return A(this,null,function*(){if(!this.#S){this.#S=!0;let t=[];for(let n of this.#i.values())t.push(n.enable());yield Promise.all(t);for(let n of this.#n.values())n.enable()}})}#re(){if(this.unselectAll(),this.#S){this.#S=!1;for(let t of this.#i.values())t.disable();for(let t of this.#n.values())t.disable()}}getEditors(t){let n=[];for(let a of this.#n.values())a.pageIndex===t&&n.push(a);return n}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#k&&clearTimeout(this.#k),this.#k=setTimeout(()=>{this.focusMainContainer(),this.#k=null},0)),this.#n.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#h.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#h.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#h.has(t)}removeDeletedAnnotationElement(t){this.#h.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#K(t){let n=this.#i.get(t.pageIndex);n?n.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#t!==t&&(this.#t=t,t&&this.#z(t.propertiesToUpdate))}get#oe(){let t=null;for(t of this.#v);return t}updateUI(t){this.#oe===t&&this.#z(t.propertiesToUpdate)}toggleSelected(t){if(this.#v.has(t)){this.#v.delete(t),t.unselect(),this.#O({hasSelectedEditor:this.hasSelection});return}this.#v.add(t),t.select(),this.#z(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}setSelected(t){for(let n of this.#v)n!==t&&n.unselect();this.#v.clear(),this.#v.add(t),t.select(),this.#z(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}isSelected(t){return this.#v.has(t)}get firstSelectedEditor(){return this.#v.values().next().value}unselect(t){t.unselect(),this.#v.delete(t),this.#O({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#v.size!==0}get isEnterHandled(){return this.#v.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#l.undo(),this.#O({hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#q()})}redo(){this.#l.redo(),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:this.#l.hasSomethingToRedo(),isEmpty:this.#q()})}addCommands(t){this.#l.add(t),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#q()})}#q(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(let t of this.#n.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;let t=[...this.#v],n=()=>{for(let s of t)s.remove()},a=()=>{for(let s of t)this.#K(s)};this.addCommands({cmd:n,undo:a,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Y(t){for(let n of this.#v)n.unselect();this.#v.clear();for(let n of t)n.isEmpty()||(this.#v.add(n),n.select());this.#O({hasSelectedEditor:this.hasSelection})}selectAll(){for(let t of this.#v)t.commit();this.#Y(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#I!==B.NONE))&&this.hasSelection){for(let t of this.#v)t.unselect();this.#v.clear(),this.#O({hasSelectedEditor:!1})}}translateSelectedEditors(t,n,a=!1){if(a||this.commitOrRemove(),!this.hasSelection)return;this.#B[0]+=t,this.#B[1]+=n;let[s,r]=this.#B,o=[...this.#v],c=1e3;this.#F&&clearTimeout(this.#F),this.#F=setTimeout(()=>{this.#F=null,this.#B[0]=this.#B[1]=0,this.addCommands({cmd:()=>{for(let l of o)this.#n.has(l.id)&&l.translateInPage(s,r)},undo:()=>{for(let l of o)this.#n.has(l.id)&&l.translateInPage(-s,-r)},mustExec:!1})},c);for(let l of o)l.translateInPage(t,n)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#r=new Map;for(let t of this.#v)this.#r.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#r)return!1;this.disableUserSelect(!1);let t=this.#r;this.#r=null;let n=!1;for(let[{x:s,y:r,pageIndex:o},c]of t)c.newX=s,c.newY=r,c.newPageIndex=o,n||=s!==c.savedX||r!==c.savedY||o!==c.savedPageIndex;if(!n)return!1;let a=(s,r,o,c)=>{if(this.#n.has(s.id)){let l=this.#i.get(c);l?s._setParentAndPosition(l,r,o):(s.pageIndex=c,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(let[s,{newX:r,newY:o,newPageIndex:c}]of t)a(s,r,o,c)},undo:()=>{for(let[s,{savedX:r,savedY:o,savedPageIndex:c}]of t)a(s,r,o,c)},mustExec:!0}),!0}dragSelectedEditors(t,n){if(this.#r)for(let a of this.#r.keys())a.drag(t,n)}rebuild(t){if(t.parent===null){let n=this.getLayer(t.pageIndex);n?(n.changeParent(t),n.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#v.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#t===t}getActive(){return this.#t}getMode(){return this.#I}get imageManager(){return Y(this,"imageManager",new d1)}getSelectionBoxes(t){if(!t)return null;let n=document.getSelection();for(let d=0,h=n.rangeCount;d<h;d++)if(!t.contains(n.getRangeAt(d).commonAncestorContainer))return null;let{x:a,y:s,width:r,height:o}=t.getBoundingClientRect(),c;switch(t.getAttribute("data-main-rotation")){case"90":c=(d,h,u,p)=>({x:(h-s)/o,y:1-(d+u-a)/r,width:p/o,height:u/r});break;case"180":c=(d,h,u,p)=>({x:1-(d+u-a)/r,y:1-(h+p-s)/o,width:u/r,height:p/o});break;case"270":c=(d,h,u,p)=>({x:1-(h+p-s)/o,y:(d-a)/r,width:p/o,height:u/r});break;default:c=(d,h,u,p)=>({x:(d-a)/r,y:(h-s)/o,width:u/r,height:p/o});break}let l=[];for(let d=0,h=n.rangeCount;d<h;d++){let u=n.getRangeAt(d);if(!u.collapsed)for(let{x:p,y:f,width:g,height:m}of u.getClientRects())g===0||m===0||l.push(c(p,f,g,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:n}){(this.#c||=new Map).set(t,n)}removeChangedExistingAnnotation({annotationElementId:t}){this.#c?.delete(t)}renderAnnotationElement(t){let n=this.#c?.get(t.data.id);if(!n)return;let a=this.#s.getRawValue(n);a&&(this.#I===B.NONE&&!a.hasBeenModified||a.renderAnnotationElement(t))}}return i})(),ly=(()=>{class i{#e=null;#t=!1;#n=null;#i=null;#a=null;#s=null;#c=!1;#l=null;#d=null;#o=null;#h=null;#r=!1;static#u=null;static _l10n=null;constructor(t){this.#d=t,this.#r=t._uiManager.useNewAltTextFlow,i.#u||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){i._l10n??=t}render(){return A(this,null,function*(){let t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";let n=this.#i=document.createElement("span");t.append(n),this.#r?(t.classList.add("new"),t.setAttribute("data-l10n-id",i.#u.missing),n.setAttribute("data-l10n-id",i.#u["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let a=this.#d._uiManager._signal;t.addEventListener("contextmenu",yt,{signal:a}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:a});let s=r=>{r.preventDefault(),this.#d._uiManager.editAltText(this.#d),this.#r&&this.#d._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#f}})};return t.addEventListener("click",s,{capture:!0,signal:a}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(this.#c=!0,s(r))},{signal:a}),yield this.#p(),t})}get#f(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#c}),this.#c=!1)}isEmpty(){return this.#r?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#r?this.#e!==null||!!this.#o:this.isEmpty()}get guessedText(){return this.#o}setGuessedText(t){return A(this,null,function*(){this.#e===null&&(this.#o=t,this.#h=yield i._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())})}toggleAltTextBadge(t=!1){if(!this.#r||this.#e){this.#l?.remove(),this.#l=null;return}if(!this.#l){let n=this.#l=document.createElement("div");n.className="noAltTextBadge",this.#d.div.append(n)}this.#l.classList.toggle("hidden",!t)}serialize(t){let n=this.#e;return!t&&this.#o===n&&(n=this.#h),{altText:n,decorative:this.#t,guessedText:this.#o,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:t,decorative:n,guessedText:a,textWithDisclaimer:s,cancel:r=!1}){a&&(this.#o=a,this.#h=s),!(this.#e===t&&this.#t===n)&&(r||(this.#e=t,this.#t=n),this.#p())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#d._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#f}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a=null,this.#l?.remove(),this.#l=null}#p(){return A(this,null,function*(){let t=this.#n;if(!t)return;if(this.#r){if(t.classList.toggle("done",!!this.#e),t.setAttribute("data-l10n-id",i.#u[this.#f]),this.#i?.setAttribute("data-l10n-id",i.#u[`${this.#f}-label`]),!this.#e){this.#a?.remove();return}}else{if(!this.#e&&!this.#t){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#a;if(!n){this.#a=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#d.id}`;let s=100,r=this.#d._uiManager._signal;r.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#a.classList.add("show"),this.#d._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:r}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#a?.classList.remove("show")},{signal:r})}this.#t?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#e),n.parentNode||t.append(n),this.#d.getImageForAltText()?.setAttribute("aria-describedby",n.id)})}}return i})(),ae=class i{#e=null;#t=null;#n=null;#i=!1;#a=!1;#s=null;#c=null;#l=null;#d="";#o=!1;#h=null;#r=!1;#u=!1;#f=!1;#p=null;#g=0;#m=0;#y=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#k=!1;#M=i._zIndex++;static _borderLineWidth=-1;static _colorManager=new u1;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let e=i.prototype._resizeWithKeyboard,t=fs.TRANSLATE_SMALL,n=fs.TRANSLATE_BIG;return Y(this,"_resizerKeyboardManager",new ri([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],i.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;let{rotation:t,rawDims:{pageWidth:n,pageHeight:a,pageX:s,pageY:r}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[s,r];let[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Y(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){let t=new p1({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(i._l10n??=e,i._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),i._borderLineWidth!==-1)return;let n=getComputedStyle(document.documentElement);i._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){he("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#k}set _isDraggable(e){this.#k=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#M}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#N(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#o?this.#o=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,a){let[s,r]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(e+n)/s,this.y=(t+a)/r,this.fixAndSetPosition()}#C([e,t],n,a){[n,a]=this.screenToPageTranslation(n,a),this.x+=n/e,this.y+=a/t,this.fixAndSetPosition()}translate(e,t){this.#C(this.parentDimensions,e,t)}translateInPage(e,t){this.#h||=[this.x,this.y],this.#C(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#h||=[this.x,this.y];let[n,a]=this.parentDimensions;if(this.x+=e/n,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:l,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,l,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:r}=this,[o,c]=this.getBaseTranslation();s+=o,r+=c,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*r).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#h&&(this.#h[0]!==this.x||this.#h[1]!==this.y)}getBaseTranslation(){let[e,t]=this.parentDimensions,{_borderLineWidth:n}=i,a=n/e,s=n/t;switch(this.rotation){case 90:return[-a,s];case 180:return[a,s];case 270:return[a,-s];default:return[-a,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){let[t,n]=this.pageDimensions,{x:a,y:s,width:r,height:o}=this;if(r*=t,o*=n,a*=t,s*=n,this._mustFixPosition)switch(e){case 0:a=Math.max(0,Math.min(t-r,a)),s=Math.max(0,Math.min(n-o,s));break;case 90:a=Math.max(0,Math.min(t-o,a)),s=Math.min(n,Math.max(r,s));break;case 180:a=Math.min(t,Math.max(r,a)),s=Math.min(n,Math.max(o,s));break;case 270:a=Math.min(t,Math.max(o,a)),s=Math.max(0,Math.min(n-r,s));break}this.x=a/=t,this.y=s/=n;let[c,l]=this.getBaseTranslation();a+=c,s+=l;let{style:d}=this.div;d.left=`${(100*a).toFixed(2)}%`,d.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#w(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return i.#w(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return i.#w(e,t,360-this.parentRotation)}#b(e){switch(e){case 90:{let[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{let[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){let[n,a]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,this.#a||(this.div.style.height=`${(100*t/a).toFixed(2)}%`)}fixDims(){let{style:e}=this.div,{height:t,width:n}=e,a=n.endsWith("%"),s=!this.#a&&t.endsWith("%");if(a&&s)return;let[r,o]=this.parentDimensions;a||(e.width=`${(100*parseFloat(n)/r).toFixed(2)}%`),!this.#a&&!s&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#_(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");let e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(let n of e){let a=document.createElement("div");this.#s.append(a),a.classList.add("resizer",n),a.setAttribute("data-resizer-name",n),a.addEventListener("pointerdown",this.#S.bind(this,n),{signal:t}),a.addEventListener("contextmenu",yt,{signal:t}),a.tabIndex=-1}this.div.prepend(this.#s)}#S(e,t){t.preventDefault();let{isMac:n}=He.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#n?.toggle(!1);let a=this._isDraggable;this._isDraggable=!1;let s=new AbortController,r=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#E.bind(this,e),{passive:!0,capture:!0,signal:r}),window.addEventListener("contextmenu",yt,{signal:r});let o=this.x,c=this.y,l=this.width,d=this.height,h=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let p=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=h,this.div.style.cursor=u,this.#x(o,c,l,d)};window.addEventListener("pointerup",p,{signal:r}),window.addEventListener("blur",p,{signal:r})}#x(e,t,n,a){let s=this.x,r=this.y,o=this.width,c=this.height;s===e&&r===t&&o===n&&c===a||this.addCommands({cmd:()=>{this.width=o,this.height=c,this.x=s,this.y=r;let[l,d]=this.parentDimensions;this.setDims(l*o,d*c),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=a,this.x=e,this.y=t;let[l,d]=this.parentDimensions;this.setDims(l*n,d*a),this.fixAndSetPosition()},mustExec:!0})}#E(e,t){let[n,a]=this.parentDimensions,s=this.x,r=this.y,o=this.width,c=this.height,l=i.MIN_SIZE/n,d=i.MIN_SIZE/a,h=R=>Math.round(R*1e4)/1e4,u=this.#b(this.rotation),p=(R,V)=>[u[0]*R+u[2]*V,u[1]*R+u[3]*V],f=this.#b(360-this.rotation),g=(R,V)=>[f[0]*R+f[2]*V,f[1]*R+f[3]*V],m,y,v=!1,M=!1;switch(e){case"topLeft":v=!0,m=(R,V)=>[0,0],y=(R,V)=>[R,V];break;case"topMiddle":m=(R,V)=>[R/2,0],y=(R,V)=>[R/2,V];break;case"topRight":v=!0,m=(R,V)=>[R,0],y=(R,V)=>[0,V];break;case"middleRight":M=!0,m=(R,V)=>[R,V/2],y=(R,V)=>[0,V/2];break;case"bottomRight":v=!0,m=(R,V)=>[R,V],y=(R,V)=>[0,0];break;case"bottomMiddle":m=(R,V)=>[R/2,V],y=(R,V)=>[R/2,0];break;case"bottomLeft":v=!0,m=(R,V)=>[0,V],y=(R,V)=>[R,0];break;case"middleLeft":M=!0,m=(R,V)=>[0,V/2],y=(R,V)=>[R,V/2];break}let k=m(o,c),C=y(o,c),b=p(...C),I=h(s+b[0]),E=h(r+b[1]),w=1,x=1,[L,ee]=this.screenToPageTranslation(t.movementX,t.movementY);if([L,ee]=g(L/n,ee/a),v){let R=Math.hypot(o,c);w=x=Math.max(Math.min(Math.hypot(C[0]-k[0]-L,C[1]-k[1]-ee)/R,1/o,1/c),l/o,d/c)}else M?w=Math.max(l,Math.min(1,Math.abs(C[0]-k[0]-L)))/o:x=Math.max(d,Math.min(1,Math.abs(C[1]-k[1]-ee)))/c;let Q=h(o*w),$=h(c*x);b=p(...y(Q,$));let se=I-b[0],we=E-b[1];this.width=Q,this.height=$,this.x=se,this.y=we,this.setDims(n*Q,a*$),this.fixAndSetPosition()}altTextFinish(){this.#n?.finish()}addEditToolbar(){return A(this,null,function*(){return this._editToolbar||this.#u?this._editToolbar:(this._editToolbar=new o1(this),this.div.append(this._editToolbar.render()),this.#n&&(yield this._editToolbar.addAltText(this.#n)),this._editToolbar)})}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){let t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){return A(this,null,function*(){this.#n||(ly.initialize(i._l10n),this.#n=new ly(this),this.#e&&(this.#n.data=this.#e,this.#e=null),yield this.addEditToolbar())})}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}setGuessedAltText(e){return A(this,null,function*(){yield this.#n?.setGuessedText(e)})}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#P();let[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);let[n,a]=this.getInitialTranslation();return this.translate(n,a),qo(this,this.div,["pointerdown"]),this.div}pointerdown(e){let{isMac:t}=He.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#o=!0,this._isDraggable){this.#D(e);return}this.#A(e)}get isSelected(){return this._uiManager.isSelected(this)}#A(e){let{isMac:t}=He.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#D(e){let{isSelected:t}=this;this._uiManager.setUpDragSession();let n=new AbortController,a=this._uiManager.combinedSignal(n);if(t){this.div.classList.add("moving"),this.#g=e.clientX,this.#m=e.clientY;let r=o=>{let{clientX:c,clientY:l}=o,[d,h]=this.screenToPageTranslation(c-this.#g,l-this.#m);this.#g=c,this.#m=l,this._uiManager.dragSelectedEditors(d,h)};window.addEventListener("pointermove",r,{passive:!0,capture:!0,signal:a})}let s=()=>{n.abort(),t&&this.div.classList.remove("moving"),this.#o=!1,this._uiManager.endDragSession()||this.#A(e)};window.addEventListener("pointerup",s,{signal:a}),window.addEventListener("blur",s,{signal:a})}moveInDOM(){this.#p&&clearTimeout(this.#p),this.#p=setTimeout(()=>{this.#p=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t,n=this.rotation){let a=this.parentScale,[s,r]=this.pageDimensions,[o,c]=this.pageTranslation,l=e/a,d=t/a,h=this.x*s,u=this.y*r,p=this.width*s,f=this.height*r;switch(n){case 0:return[h+l+o,r-u-d-f+c,h+l+p+o,r-u-d+c];case 90:return[h+d+o,r-u+l+c,h+d+f+o,r-u+l+p+c];case 180:return[h-l-p+o,r-u+d+c,h-l+o,r-u+d+f+c];case 270:return[h-d-f+o,r-u-l-p+c,h-d+o,r-u-l+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){let[n,a,s,r]=e,o=s-n,c=r-a;switch(this.rotation){case 0:return[n,t-r,o,c];case 90:return[n,t-a,c,o];case 180:return[s,t-a,o,c];case 270:return[s,t-r,c,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#u=!0}disableEditMode(){this.#u=!1}isInEditMode(){return this.#u}shouldGetKeyboardEvents(){return this.#f}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#P(){if(this.#l||!this.div)return;this.#l=new AbortController;let e=this._uiManager.combinedSignal(this.#l);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#P()}rotate(e){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){he("An editor must be serializable")}static deserialize(e,t,n){return A(this,null,function*(){let a=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});a.rotation=e.rotation,a.#e=e.accessibilityData;let[s,r]=a.pageDimensions,[o,c,l,d]=a.getRectInCurrentCoords(e.rect,r);return a.x=o/s,a.y=c/r,a.width=l/s,a.height=d/r,a})}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#l?.abort(),this.#l=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#p&&(clearTimeout(this.#p),this.#p=null),this.#N(),this.removeEditToolbar(),this.#y){for(let e of this.#y.values())clearTimeout(e);this.#y=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#_(),this.#s.classList.remove("hidden"),qo(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let t=this.#s.children;if(!this.#t){this.#t=Array.from(t);let r=this.#I.bind(this),o=this.#v.bind(this),c=this._uiManager._signal;for(let l of this.#t){let d=l.getAttribute("data-resizer-name");l.setAttribute("role","spinbutton"),l.addEventListener("keydown",r,{signal:c}),l.addEventListener("blur",o,{signal:c}),l.addEventListener("focus",this.#L.bind(this,d),{signal:c}),l.setAttribute("data-l10n-id",i._l10nResizer[d])}}let n=this.#t[0],a=0;for(let r of t){if(r===n)break;a++}let s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==a){if(s<a)for(let o=0;o<a-s;o++)this.#s.append(this.#s.firstChild);else if(s>a)for(let o=0;o<s-a;o++)this.#s.firstChild.before(this.#s.lastChild);let r=0;for(let o of t){let l=this.#t[r++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",i._l10nResizer[l])}}this.#T(0),this.#f=!0,this.#s.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#I(e){i._resizerKeyboardManager.exec(this,e)}#v(e){this.#f&&e.relatedTarget?.parentNode!==this.#s&&this.#N()}#L(e){this.#d=this.#f?e:""}#T(e){if(this.#t)for(let t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#f&&this.#E(this.#d,{movementX:e,movementY:t})}#N(){if(this.#f=!1,this.#T(-1),this.#c){let{savedX:e,savedY:t,savedWidth:n,savedHeight:a}=this.#c;this.#x(e,t,n,a),this.#c=null}}_stopResizingWithKeyboard(){this.#N(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#r}set isEditing(e){this.#r=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#a=!0;let n=e/t,{style:a}=this.div;a.aspectRatio=n,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#y||=new Map;let{action:n}=e,a=this.#y.get(n);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(e),this.#y.delete(n),this.#y.size===0&&(this.#y=null)},i._telemetryTimeout),this.#y.set(n,a);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){let n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){let{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}},p1=class extends ae{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},dy=3285377520,gt=4294901760,Ot=65535,Uo=class{constructor(e){this.h1=e?e&4294967295:dy,this.h2=e?e&4294967295:dy}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let g=0,m=e.length;g<m;g++){let y=e.charCodeAt(g);y<=255?t[n++]=y:(t[n++]=y>>>8,t[n++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let a=n>>2,s=n-a*4,r=new Uint32Array(t.buffer,0,a),o=0,c=0,l=this.h1,d=this.h2,h=3432918353,u=461845907,p=h&Ot,f=u&Ot;for(let g=0;g<a;g++)g&1?(o=r[g],o=o*h&gt|o*p&Ot,o=o<<15|o>>>17,o=o*u&gt|o*f&Ot,l^=o,l=l<<13|l>>>19,l=l*5+3864292196):(c=r[g],c=c*h&gt|c*p&Ot,c=c<<15|c>>>17,c=c*u&gt|c*f&Ot,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(o=0,s){case 3:o^=t[a*4+2]<<16;case 2:o^=t[a*4+1]<<8;case 1:o^=t[a*4],o=o*h&gt|o*p&Ot,o=o<<15|o>>>17,o=o*u&gt|o*f&Ot,a&1?l^=o:d^=o}this.h1=l,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&gt|e*36045&Ot,t=t*4283543511&gt|((t<<16|e>>>16)*2950163797&gt)>>>16,e^=t>>>1,e=e*444984403&gt|e*60499&Ot,t=t*3301882366&gt|((t<<16|e>>>16)*3120437893&gt)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}},f1=Object.freeze({map:null,hash:"",transfer:void 0}),gs=class{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){let n=this.#n.get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let t of this.#n.values())if(t instanceof ae)return;this.onAnnotationEditor(null)}}setValue(e,t){let n=this.#n.get(e),a=!1;if(n!==void 0)for(let[s,r]of Object.entries(t))n[s]!==r&&(a=!0,n[s]=r);else a=!0,this.#n.set(e,t);a&&this.#i(),t instanceof ae&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?Cu(this.#n):null}setAll(e){for(let[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return this.#n.size}#i(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Wo(this)}get serializable(){if(this.#n.size===0)return f1;let e=new Map,t=new Uo,n=[],a=Object.create(null),s=!1;for(let[r,o]of this.#n){let c=o instanceof ae?o.serialize(!1,a):o;c&&(e.set(r,c),t.update(`${r}:${JSON.stringify(c)}`),s||=!!c.bitmap)}if(s)for(let r of e.values())r.bitmap&&n.push(r.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:f1}get editorStats(){let e=null,t=new Map;for(let n of this.#n.values()){if(!(n instanceof ae))continue;let a=n.telemetryFinalData;if(!a)continue;let{type:s}=a;t.has(s)||t.set(s,Object.getPrototypeOf(n).constructor),e||=Object.create(null);let r=e[s]||=new Map;for(let[o,c]of Object.entries(a)){if(o==="type")continue;let l=r.get(o);l||(l=new Map,r.set(o,l));let d=l.get(c)??0;l.set(c,d+1)}}for(let[n,a]of t)e[n]=a.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;let e=[];for(let t of this.#n.values())!(t instanceof ae)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}},Wo=class extends gs{#e;constructor(e){super();let{map:t,hash:n,transfer:a}=e.serializable,s=structuredClone(t,a?{transfer:a}:null);this.#e={map:s,hash:n,transfer:a}}get print(){he("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Y(this,"modifiedIds",{ids:new Set,hash:""})}},g1=class{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(n){return A(this,arguments,function*({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#e.has(e.loadedName))){if(Oe(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:a,src:s,style:r}=e,o=new FontFace(a,s,r);this.addNativeFontFace(o);try{yield o.load(),this.#e.add(a),t?.(e)}catch{z(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}he("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(e){return A(this,null,function*(){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){yield this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){let n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{yield n.loaded}catch(a){throw z(`Failed to load font '${n.family}': '${a}'.`),e.disableFontFace=!0,a}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;yield new Promise(n=>{let a=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,a)})}})}get isFontLoadingAPISupported(){let e=!!this._document?.fonts;return Y(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Ve||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Y(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Oe(!a.done,"completeRequest() cannot be called twice."),a.done=!0;n.length>0&&n[0].done;){let s=n.shift();setTimeout(s.callback,0)}}let{loadingRequests:n}=this,a={done:!1,complete:t,callback:e};return n.push(a),a}get _loadTestFont(){let e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Y(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(k,C){return k.charCodeAt(C)<<24|k.charCodeAt(C+1)<<16|k.charCodeAt(C+2)<<8|k.charCodeAt(C+3)&255}function a(k,C,b,I){let E=k.substring(0,C),w=k.substring(C+b);return E+I+w}let s,r,o=this._document.createElement("canvas");o.width=1,o.height=1;let c=o.getContext("2d"),l=0;function d(k,C){if(++l>30){z("Load test font never loaded."),C();return}if(c.font="30px "+k,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(d.bind(null,k,C))}let h=`lt${Date.now()}${this.loadTestFontId++}`,u=this._loadTestFont;u=a(u,976,h.length,h);let f=16,g=1482184792,m=n(u,f);for(s=0,r=h.length-3;s<r;s+=4)m=m-g+n(h,s)|0;s<h.length&&(m=m-g+n(h+"XXX",s)|0),u=a(u,f,4,gw(m));let y=`url(data:font/opentype;base64,${btoa(u)});`,v=`@font-face {font-family:"${h}";src:${y}}`;this.insertRule(v);let M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(let k of[e.loadedName,h]){let C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=k,M.append(C)}this._document.body.append(M),d(h,()=>{M.remove(),t.complete()})}},y1=class{constructor(e,{disableFontFace:t=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(let a in e)this[a]=e[a];this.disableFontFace=t===!0,this._inspectFont=n}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{let t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let e=`url(data:${this.mimetype};base64,${ww(this.data)});`,t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(s){z(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[t]=function(s,r){};let a=[];for(let s=0,r=n.length;s<r;)switch(n[s++]){case Gt.BEZIER_CURVE_TO:{let[o,c,l,d,h,u]=n.slice(s,s+6);a.push(p=>p.bezierCurveTo(o,c,l,d,h,u)),s+=6}break;case Gt.MOVE_TO:{let[o,c]=n.slice(s,s+2);a.push(l=>l.moveTo(o,c)),s+=2}break;case Gt.LINE_TO:{let[o,c]=n.slice(s,s+2);a.push(l=>l.lineTo(o,c)),s+=2}break;case Gt.QUADRATIC_CURVE_TO:{let[o,c,l,d]=n.slice(s,s+4);a.push(h=>h.quadraticCurveTo(o,c,l,d)),s+=4}break;case Gt.RESTORE:a.push(o=>o.restore());break;case Gt.SAVE:a.push(o=>o.save());break;case Gt.SCALE:Oe(a.length===2,"Scale command is only valid at the third position.");break;case Gt.TRANSFORM:{let[o,c,l,d,h,u]=n.slice(s,s+6);a.push(p=>p.transform(o,c,l,d,h,u)),s+=6}break;case Gt.TRANSLATE:{let[o,c]=n.slice(s,s+2);a.push(l=>l.translate(o,c)),s+=2}break}return this.compiledGlyphs[t]=function(r,o){a[0](r),a[1](r),r.scale(o,-o);for(let c=2,l=a.length;c<l;c++)a[c](r)}}},$o=class{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");let n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){he("Abstract method `_createCanvas` called.")}},m1=class extends $o{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){let n=this._document.createElement("canvas");return n.width=e,n.height=t,n}},Go=class{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}fetch(t){return A(this,arguments,function*({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");let n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(a=>({cMapData:a,isCompressed:this.isCompressed})).catch(a=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})})}_fetch(e){return A(this,null,function*(){he("Abstract method `_fetch` called.")})}},Xo=class extends Go{_fetch(e){return A(this,null,function*(){let t=yield bc(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):wc(t)})}},Zo=class{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,a,s){return"none"}destroy(e=!1){}},k1=class extends Zo{#e;#t;#n;#i;#a;#s;#c=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#i=e,this.#a=t}get#l(){return this.#t||=new Map}get#d(){return this.#s||=new Map}get#o(){if(!this.#n){let e=this.#a.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;let n=this.#a.createElementNS(Zt,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#n=this.#a.createElementNS(Zt,"defs"),e.append(n),n.append(this.#n),this.#a.body.append(e)}return this.#n}#h(e){if(e.length===1){let c=e[0],l=new Array(256);for(let h=0;h<256;h++)l[h]=c[h]/255;let d=l.join(",");return[d,d,d]}let[t,n,a]=e,s=new Array(256),r=new Array(256),o=new Array(256);for(let c=0;c<256;c++)s[c]=t[c]/255,r[c]=n[c]/255,o[c]=a[c]/255;return[s.join(","),r.join(","),o.join(",")]}#r(e){if(this.#e===void 0){this.#e="";let t=this.#a.URL;t!==this.#a.baseURI&&(Cc(t)?z('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#l.get(e);if(t)return t;let[n,a,s]=this.#h(e),r=e.length===1?n:`${n}${a}${s}`;if(t=this.#l.get(r),t)return this.#l.set(e,t),t;let o=`g_${this.#i}_transfer_map_${this.#c++}`,c=this.#r(o);this.#l.set(e,c),this.#l.set(r,c);let l=this.#p(o);return this.#m(n,a,s,l),c}addHCMFilter(e,t){let n=`${e}-${t}`,a="base",s=this.#d.get(a);if(s?.key===n||(s?(s.filter?.remove(),s.key=n,s.url="none",s.filter=null):(s={key:n,url:"none",filter:null},this.#d.set(a,s)),!e||!t))return s.url;let r=this.#k(e);e=T.makeHexColor(...r);let o=this.#k(t);if(t=T.makeHexColor(...o),this.#o.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return s.url;let c=new Array(256);for(let p=0;p<=255;p++){let f=p/255;c[p]=f<=.03928?f/12.92:((f+.055)/1.055)**2.4}let l=c.join(","),d=`g_${this.#i}_hcm_filter`,h=s.filter=this.#p(d);this.#m(l,l,l,h),this.#f(h);let u=(p,f)=>{let g=r[p]/255,m=o[p]/255,y=new Array(f+1);for(let v=0;v<=f;v++)y[v]=g+v/f*(m-g);return y.join(",")};return this.#m(u(0,5),u(1,5),u(2,5),h),s.url=this.#r(d),s.url}addAlphaFilter(e){let t=this.#l.get(e);if(t)return t;let[n]=this.#h([e]),a=`alpha_${n}`;if(t=this.#l.get(a),t)return this.#l.set(e,t),t;let s=`g_${this.#i}_alpha_map_${this.#c++}`,r=this.#r(s);this.#l.set(e,r),this.#l.set(a,r);let o=this.#p(s);return this.#y(n,o),r}addLuminosityFilter(e){let t=this.#l.get(e||"luminosity");if(t)return t;let n,a;if(e?([n]=this.#h([e]),a=`luminosity_${n}`):a="luminosity",t=this.#l.get(a),t)return this.#l.set(e,t),t;let s=`g_${this.#i}_luminosity_map_${this.#c++}`,r=this.#r(s);this.#l.set(e,r),this.#l.set(a,r);let o=this.#p(s);return this.#u(o),e&&this.#y(n,o),r}addHighlightHCMFilter(e,t,n,a,s){let r=`${t}-${n}-${a}-${s}`,o=this.#d.get(e);if(o?.key===r||(o?(o.filter?.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},this.#d.set(e,o)),!t||!n))return o.url;let[c,l]=[t,n].map(this.#k.bind(this)),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),h=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),[u,p]=[a,s].map(this.#k.bind(this));h<d&&([d,h,u,p]=[h,d,p,u]),this.#o.style.color="";let f=(y,v,M)=>{let k=new Array(256),C=(h-d)/M,b=y/255,I=(v-y)/(255*M),E=0;for(let w=0;w<=M;w++){let x=Math.round(d+w*C),L=b+w*I;for(let ee=E;ee<=x;ee++)k[ee]=L;E=x+1}for(let w=E;w<256;w++)k[w]=k[E-1];return k.join(",")},g=`g_${this.#i}_hcm_${e}_filter`,m=o.filter=this.#p(g);return this.#f(m),this.#m(f(u[0],p[0],5),f(u[1],p[1],5),f(u[2],p[2],5),m),o.url=this.#r(g),o.url}destroy(e=!1){e&&this.#d.size!==0||(this.#n&&(this.#n.parentNode.parentNode.remove(),this.#n=null),this.#t&&(this.#t.clear(),this.#t=null),this.#c=0)}#u(e){let t=this.#a.createElementNS(Zt,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#f(e){let t=this.#a.createElementNS(Zt,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){let t=this.#a.createElementNS(Zt,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#o.append(t),t}#g(e,t,n){let a=this.#a.createElementNS(Zt,t);a.setAttribute("type","discrete"),a.setAttribute("tableValues",n),e.append(a)}#m(e,t,n,a){let s=this.#a.createElementNS(Zt,"feComponentTransfer");a.append(s),this.#g(s,"feFuncR",e),this.#g(s,"feFuncG",t),this.#g(s,"feFuncB",n)}#y(e,t){let n=this.#a.createElementNS(Zt,"feComponentTransfer");t.append(n),this.#g(n,"feFuncA",e)}#k(e){return this.#o.style.color=e,Au(getComputedStyle(this.#o).getPropertyValue("color"))}},Ko=class{constructor({baseUrl:e=null}){this.baseUrl=e}fetch(t){return A(this,arguments,function*({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");let n=`${this.baseUrl}${e}`;return this._fetch(n).catch(a=>{throw new Error(`Unable to load font data at: ${n}`)})})}_fetch(e){return A(this,null,function*(){he("Abstract method `_fetch` called.")})}},Yo=class extends Ko{_fetch(e){return A(this,null,function*(){let t=yield bc(e,"arraybuffer");return new Uint8Array(t)})}};Ve&&(Ho=Promise.withResolvers(),jo=null,A(null,null,function*(){let e=yield import("./chunk-L2HEV66R.js"),t=yield import("./chunk-BMBYILCS.js"),n=yield import("./chunk-ALIQTIYY.js"),a=yield import("./chunk-NYZOWURK.js"),s,r;return new Map(Object.entries({fs:e,http:t,https:n,url:a,canvas:s,path2d:r}))}).then(e=>{jo=e,Ho.resolve()},e=>{z(`loadPackages: ${e}`),jo=new Map,Ho.resolve()}));var Ho,jo,Ft=class{static get promise(){return Ho.promise}static get(e){return jo?.get(e)}};function xy(i){return A(this,null,function*(){let t=yield Ft.get("fs").promises.readFile(i);return new Uint8Array(t)})}var v1=class extends Zo{},M1=class extends $o{_createCanvas(e,t){return Ft.get("canvas").createCanvas(e,t)}},w1=class extends Go{_fetch(e){return A(this,null,function*(){return xy(e)})}},b1=class extends Ko{_fetch(e){return A(this,null,function*(){return xy(e)})}},$e={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function C1(i,e){if(!e)return;let t=e[2]-e[0],n=e[3]-e[1],a=new Path2D;a.rect(e[0],e[1],t,n),i.clip(a)}var ys=class{getPattern(){he("Abstract method `getPattern` called.")}},x1=class extends ys{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,a){let s;if(a===$e.STROKE||a===$e.FILL){let r=t.current.getClippedPathBoundingBox(a,ve(e))||[0,0,0,0],o=Math.ceil(r[2]-r[0])||1,c=Math.ceil(r[3]-r[1])||1,l=t.cachedCanvases.getCanvas("pattern",o,c),d=l.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-r[0],-r[1]),n=T.transform(n,[1,0,0,1,r[0],r[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),C1(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),s=e.createPattern(l.canvas,"no-repeat");let h=new DOMMatrix(n);s.setTransform(h)}else C1(e,this._bbox),s=this._createGradient(e);return s}};function n1(i,e,t,n,a,s,r,o){let c=e.coords,l=e.colors,d=i.data,h=i.width*4,u;c[t+1]>c[n+1]&&(u=t,t=n,n=u,u=s,s=r,r=u),c[n+1]>c[a+1]&&(u=n,n=a,a=u,u=r,r=o,o=u),c[t+1]>c[n+1]&&(u=t,t=n,n=u,u=s,s=r,r=u);let p=(c[t]+e.offsetX)*e.scaleX,f=(c[t+1]+e.offsetY)*e.scaleY,g=(c[n]+e.offsetX)*e.scaleX,m=(c[n+1]+e.offsetY)*e.scaleY,y=(c[a]+e.offsetX)*e.scaleX,v=(c[a+1]+e.offsetY)*e.scaleY;if(f>=v)return;let M=l[s],k=l[s+1],C=l[s+2],b=l[r],I=l[r+1],E=l[r+2],w=l[o],x=l[o+1],L=l[o+2],ee=Math.round(f),Q=Math.round(v),$,se,we,R,V,nn,Cn,st;for(let Fe=ee;Fe<=Q;Fe++){if(Fe<m){let ue=Fe<f?0:(f-Fe)/(f-m);$=p-(p-g)*ue,se=M-(M-b)*ue,we=k-(k-I)*ue,R=C-(C-E)*ue}else{let ue;Fe>v?ue=1:m===v?ue=0:ue=(m-Fe)/(m-v),$=g-(g-y)*ue,se=b-(b-w)*ue,we=I-(I-x)*ue,R=E-(E-L)*ue}let Ee;Fe<f?Ee=0:Fe>v?Ee=1:Ee=(f-Fe)/(f-v),V=p-(p-y)*Ee,nn=M-(M-w)*Ee,Cn=k-(k-x)*Ee,st=C-(C-L)*Ee;let ui=Math.round(Math.min($,V)),ra=Math.round(Math.max($,V)),rt=h*Fe+ui*4;for(let ue=ui;ue<=ra;ue++)Ee=($-ue)/($-V),Ee<0?Ee=0:Ee>1&&(Ee=1),d[rt++]=se-(se-nn)*Ee|0,d[rt++]=we-(we-Cn)*Ee|0,d[rt++]=R-(R-st)*Ee|0,d[rt++]=255}}function Sw(i,e,t){let n=e.coords,a=e.colors,s,r;switch(e.type){case"lattice":let o=e.verticesPerRow,c=Math.floor(n.length/o)-1,l=o-1;for(s=0;s<c;s++){let d=s*o;for(let h=0;h<l;h++,d++)n1(i,t,n[d],n[d+1],n[d+o],a[d],a[d+1],a[d+o]),n1(i,t,n[d+o+1],n[d+1],n[d+o],a[d+o+1],a[d+1],a[d+o])}break;case"triangles":for(s=0,r=n.length;s<r;s+=3)n1(i,t,n[s],n[s+1],n[s+2],a[s],a[s+1],a[s+2]);break;default:throw new Error("illegal figure")}}var I1=class extends ys{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){let o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),l=Math.ceil(this._bounds[2])-o,d=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(l*e[0]*1.1)),3e3),u=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),p=l/h,f=d/u,g={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/p,scaleY:1/f},m=h+4,y=u+4,v=n.getCanvas("mesh",m,y),M=v.context,k=M.createImageData(h,u);if(t){let b=k.data;for(let I=0,E=b.length;I<E;I+=4)b[I]=t[0],b[I+1]=t[1],b[I+2]=t[2],b[I+3]=255}for(let b of this._figures)Sw(k,b,g);return M.putImageData(k,2,2),{canvas:v.canvas,offsetX:o-2*p,offsetY:c-2*f,scaleX:p,scaleY:f}}getPattern(e,t,n,a){C1(e,this._bbox);let s;if(a===$e.SHADING)s=T.singularValueDecompose2dScale(ve(e));else if(s=T.singularValueDecompose2dScale(t.baseTransform),this.matrix){let o=T.singularValueDecompose2dScale(this.matrix);s=[s[0]*o[0],s[1]*o[1]]}let r=this._createMeshCanvas(s,a===$e.SHADING?null:this._background,t.cachedCanvases);return a!==$e.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(r.offsetX,r.offsetY),e.scale(r.scaleX,r.scaleY),e.createPattern(r.canvas,"no-repeat")}},A1=class extends ys{getPattern(){return"hotpink"}};function Ew(i){switch(i[0]){case"RadialAxial":return new x1(i);case"Mesh":return new I1(i);case"Dummy":return new A1}throw new Error(`Unknown IR type: ${i[0]}`)}var hy={COLORED:1,UNCOLORED:2},Lw=(()=>{class i{static MAX_PATTERN_SIZE=3e3;constructor(t,n,a,s,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=n,this.ctx=a,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t){let{bbox:n,operatorList:a,paintType:s,tilingType:r,color:o,canvasGraphicsFactory:c}=this,{xstep:l,ystep:d}=this;l=Math.abs(l),d=Math.abs(d),Mc("TilingType: "+r);let h=n[0],u=n[1],p=n[2],f=n[3],g=p-h,m=f-u,y=T.singularValueDecompose2dScale(this.matrix),v=T.singularValueDecompose2dScale(this.baseTransform),M=y[0]*v[0],k=y[1]*v[1],C=g,b=m,I=!1,E=!1,w=Math.ceil(l*M),x=Math.ceil(d*k),L=Math.ceil(g*M),ee=Math.ceil(m*k);w>=L?C=l:I=!0,x>=ee?b=d:E=!0;let Q=this.getSizeAndScale(C,this.ctx.canvas.width,M),$=this.getSizeAndScale(b,this.ctx.canvas.height,k),se=t.cachedCanvases.getCanvas("pattern",Q.size,$.size),we=se.context,R=c.createCanvasGraphics(we);if(R.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(R,s,o),we.translate(-Q.scale*h,-$.scale*u),R.transform(Q.scale,0,0,$.scale,0,0),we.save(),this.clipBbox(R,h,u,p,f),R.baseTransform=ve(R.ctx),R.executeOperatorList(a),R.endDrawing(),we.restore(),I||E){let V=se.canvas;I&&(C=l),E&&(b=d);let nn=this.getSizeAndScale(C,this.ctx.canvas.width,M),Cn=this.getSizeAndScale(b,this.ctx.canvas.height,k),st=nn.size,Fe=Cn.size,Ee=t.cachedCanvases.getCanvas("pattern-workaround",st,Fe),ui=Ee.context,ra=I?Math.floor(g/l):0,rt=E?Math.floor(m/d):0;for(let ue=0;ue<=ra;ue++)for(let jt=0;jt<=rt;jt++)ui.drawImage(V,st*ue,Fe*jt,st,Fe,0,0,st,Fe);return{canvas:Ee.canvas,scaleX:nn.scale,scaleY:Cn.scale,offsetX:h,offsetY:u}}return{canvas:se.canvas,scaleX:Q.scale,scaleY:$.scale,offsetX:h,offsetY:u}}getSizeAndScale(t,n,a){let s=Math.max(i.MAX_PATTERN_SIZE,n),r=Math.ceil(t*a);return r>=s?r=s:a=r/t,{scale:a,size:r}}clipBbox(t,n,a,s,r){let o=s-n,c=r-a;t.ctx.rect(n,a,o,c),t.current.updateRectMinMax(ve(t.ctx),[n,a,s,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,n,a){let s=t.ctx,r=t.current;switch(n){case hy.COLORED:let o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case hy.UNCOLORED:let c=T.makeHexColor(a[0],a[1],a[2]);s.fillStyle=c,s.strokeStyle=c,r.fillColor=c,r.strokeColor=c;break;default:throw new r1(`Unsupported paint type: ${n}`)}}getPattern(t,n,a,s){let r=a;s!==$e.SHADING&&(r=T.transform(r,n.baseTransform),this.matrix&&(r=T.transform(r,this.matrix)));let o=this.createPatternCanvas(n),c=new DOMMatrix(r);c=c.translate(o.offsetX,o.offsetY),c=c.scale(1/o.scaleX,1/o.scaleY);let l=t.createPattern(o.canvas,"repeat");return l.setTransform(c),l}}return i})();function _w({src:i,srcPos:e=0,dest:t,width:n,height:a,nonBlackColor:s=4294967295,inverseDecode:r=!1}){let o=He.isLittleEndian?4278190080:255,[c,l]=r?[s,o]:[o,s],d=n>>3,h=n&7,u=i.length;t=new Uint32Array(t.buffer);let p=0;for(let f=0;f<a;f++){for(let m=e+d;e<m;e++){let y=e<u?i[e]:255;t[p++]=y&128?l:c,t[p++]=y&64?l:c,t[p++]=y&32?l:c,t[p++]=y&16?l:c,t[p++]=y&8?l:c,t[p++]=y&4?l:c,t[p++]=y&2?l:c,t[p++]=y&1?l:c}if(h===0)continue;let g=e<u?i[e++]:255;for(let m=0;m<h;m++)t[p++]=g&1<<7-m?l:c}return{srcPos:e,destPos:p}}var uy=16,py=100,Dw=15,fy=10,gy=1e3,Ke=16;function Tw(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(n,a){e.translate(n,a),this.__originalTranslate(n,a)},i.scale=function(n,a){e.scale(n,a),this.__originalScale(n,a)},i.transform=function(n,a,s,r,o,c){e.transform(n,a,s,r,o,c),this.__originalTransform(n,a,s,r,o,c)},i.setTransform=function(n,a,s,r,o,c){e.setTransform(n,a,s,r,o,c),this.__originalSetTransform(n,a,s,r,o,c)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){e.rotate(n),this.__originalRotate(n)},i.clip=function(n){e.clip(n),this.__originalClip(n)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,a,s,r,o){e.bezierCurveTo(t,n,a,s,r,o),this.__originalBezierCurveTo(t,n,a,s,r,o)},i.rect=function(t,n,a,s){e.rect(t,n,a,s),this.__originalRect(t,n,a,s)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}var S1=class{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let a;return this.cache[e]!==void 0?(a=this.cache[e],this.canvasFactory.reset(a,t,n)):(a=this.canvasFactory.create(t,n),this.cache[e]=a),a}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}};function Do(i,e,t,n,a,s,r,o,c,l){let[d,h,u,p,f,g]=ve(i);if(h===0&&u===0){let v=r*d+f,M=Math.round(v),k=o*p+g,C=Math.round(k),b=(r+c)*d+f,I=Math.abs(Math.round(b)-M)||1,E=(o+l)*p+g,w=Math.abs(Math.round(E)-C)||1;return i.setTransform(Math.sign(d),0,0,Math.sign(p),M,C),i.drawImage(e,t,n,a,s,0,0,I,w),i.setTransform(d,h,u,p,f,g),[I,w]}if(d===0&&p===0){let v=o*u+f,M=Math.round(v),k=r*h+g,C=Math.round(k),b=(o+l)*u+f,I=Math.abs(Math.round(b)-M)||1,E=(r+c)*h+g,w=Math.abs(Math.round(E)-C)||1;return i.setTransform(0,Math.sign(h),Math.sign(u),0,M,C),i.drawImage(e,t,n,a,s,0,0,w,I),i.setTransform(d,h,u,p,f,g),[w,I]}i.drawImage(e,t,n,a,s,r,o,c,l);let m=Math.hypot(d,h),y=Math.hypot(u,p);return[m*c,y*l]}function Pw(i){let{width:e,height:t}=i;if(e>gy||t>gy)return null;let n=1e3,a=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1,r=new Uint8Array(s*(t+1)),o,c,l,d=e+7&-8,h=new Uint8Array(d*t),u=0;for(let y of i.data){let v=128;for(;v>0;)h[u++]=y&v?0:255,v>>=1}let p=0;for(u=0,h[u]!==0&&(r[0]=1,++p),c=1;c<e;c++)h[u]!==h[u+1]&&(r[c]=h[u]?2:1,++p),u++;for(h[u]!==0&&(r[c]=2,++p),o=1;o<t;o++){u=o*d,l=o*s,h[u-d]!==h[u]&&(r[l]=h[u]?1:8,++p);let y=(h[u]?4:0)+(h[u-d]?8:0);for(c=1;c<e;c++)y=(y>>2)+(h[u+1]?4:0)+(h[u-d+1]?8:0),a[y]&&(r[l+c]=a[y],++p),u++;if(h[u-d]!==h[u]&&(r[l+c]=h[u]?2:4,++p),p>n)return null}for(u=d*(t-1),l=o*s,h[u]!==0&&(r[l]=8,++p),c=1;c<e;c++)h[u]!==h[u+1]&&(r[l+c]=h[u]?4:8,++p),u++;if(h[u]!==0&&(r[l+c]=4,++p),p>n)return null;let f=new Int32Array([0,s,-1,0,-s,0,0,0,1]),g=new Path2D;for(o=0;p&&o<=t;o++){let y=o*s,v=y+e;for(;y<v&&!r[y];)y++;if(y===v)continue;g.moveTo(y%s,o);let M=y,k=r[y];do{let C=f[k];do y+=C;while(!r[y]);let b=r[y];b!==5&&b!==10?(k=b,r[y]=0):(k=b&51*k>>4,r[y]&=k>>2|k<<2),g.lineTo(y%s,y/s|0),r[y]||--p}while(M!==y);--o}return h=null,r=null,function(y){y.save(),y.scale(1/e,-1/t),y.translate(0,-t),y.fill(g),y.beginPath(),y.restore()}}var Qo=class{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=by,this.textMatrixScale=1,this.fontMatrix=s1,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Be.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=T.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){let n=T.applyTransform(t,e),a=T.applyTransform(t.slice(2),e),s=T.applyTransform([t[0],t[3]],e),r=T.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],a[0],s[0],r[0]),this.minY=Math.min(this.minY,n[1],a[1],s[1],r[1]),this.maxX=Math.max(this.maxX,n[0],a[0],s[0],r[0]),this.maxY=Math.max(this.maxY,n[1],a[1],s[1],r[1])}updateScalingPathMinMax(e,t){T.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,a,s,r,o,c,l,d){let h=T.bezierBoundingBox(t,n,a,s,r,o,c,l,d);d||this.updateRectMinMax(e,h)}getPathBoundingBox(e=$e.FILL,t=null){let n=[this.minX,this.minY,this.maxX,this.maxY];if(e===$e.STROKE){t||he("Stroke bounding box must include transform.");let a=T.singularValueDecompose2dScale(t),s=a[0]*this.lineWidth/2,r=a[1]*this.lineWidth/2;n[0]-=s,n[1]-=r,n[2]+=s,n[3]+=r}return n}updateClipFromPath(){let e=T.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=$e.FILL,t=null){return T.intersect(this.clipBox,this.getPathBoundingBox(e,t))}};function yy(i,e){if(typeof ImageData<"u"&&e instanceof ImageData){i.putImageData(e,0,0);return}let t=e.height,n=e.width,a=t%Ke,s=(t-a)/Ke,r=a===0?s:s+1,o=i.createImageData(n,Ke),c=0,l,d=e.data,h=o.data,u,p,f,g;if(e.kind===No.GRAYSCALE_1BPP){let m=d.byteLength,y=new Uint32Array(h.buffer,0,h.byteLength>>2),v=y.length,M=n+7>>3,k=4294967295,C=He.isLittleEndian?4278190080:255;for(u=0;u<r;u++){for(f=u<s?Ke:a,l=0,p=0;p<f;p++){let b=m-c,I=0,E=b>M?n:b*8-7,w=E&-8,x=0,L=0;for(;I<w;I+=8)L=d[c++],y[l++]=L&128?k:C,y[l++]=L&64?k:C,y[l++]=L&32?k:C,y[l++]=L&16?k:C,y[l++]=L&8?k:C,y[l++]=L&4?k:C,y[l++]=L&2?k:C,y[l++]=L&1?k:C;for(;I<E;I++)x===0&&(L=d[c++],x=128),y[l++]=L&x?k:C,x>>=1}for(;l<v;)y[l++]=0;i.putImageData(o,0,u*Ke)}}else if(e.kind===No.RGBA_32BPP){for(p=0,g=n*Ke*4,u=0;u<s;u++)h.set(d.subarray(c,c+g)),c+=g,i.putImageData(o,0,p),p+=Ke;u<r&&(g=n*a*4,h.set(d.subarray(c,c+g)),i.putImageData(o,0,p))}else if(e.kind===No.RGB_24BPP)for(f=Ke,g=n*f,u=0;u<r;u++){for(u>=s&&(f=a,g=n*f),l=0,p=g;p--;)h[l++]=d[c++],h[l++]=d[c++],h[l++]=d[c++],h[l++]=255;i.putImageData(o,0,u*Ke)}else throw new Error(`bad image kind: ${e.kind}`)}function my(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}let t=e.height,n=e.width,a=t%Ke,s=(t-a)/Ke,r=a===0?s:s+1,o=i.createImageData(n,Ke),c=0,l=e.data,d=o.data;for(let h=0;h<r;h++){let u=h<s?Ke:a;({srcPos:c}=_w({src:l,srcPos:c,dest:d,width:n,height:u,nonBlackColor:0})),i.putImageData(o,0,h*Ke)}}function ss(i,e){let t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function To(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!Ve){let{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}}function ky(i,e){if(e)return!0;let t=T.singularValueDecompose2dScale(i);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);let n=Math.fround((globalThis.devicePixelRatio||1)*kn.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}var Rw=["butt","round","square"],Ow=["miter","round","bevel"],Fw={},vy={},Qi=class i{constructor(e,t,n,a,s,{optionalContentConfig:r,markedContentStack:o=null},c,l){this.ctx=e,this.current=new Qo(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=a,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=r,this.cachedCanvases=new S1(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:a=null}){let s=this.ctx.canvas.width,r=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,s,r),this.ctx.fillStyle=o,n){let c=this.cachedCanvases.getCanvas("transparent",s,r);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...ve(this.compositeCtx))}this.ctx.save(),To(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ve(this.ctx)}executeOperatorList(e,t,n,a){let s=e.argsArray,r=e.fnArray,o=t||0,c=s.length;if(c===o)return o;let l=c-o>fy&&typeof n=="function",d=l?Date.now()+Dw:0,h=0,u=this.commonObjs,p=this.objs,f;for(;;){if(a!==void 0&&o===a.nextBreakPoint)return a.breakIt(o,n),o;if(f=r[o],f!==At.dependency)this[f].apply(this,s[o]);else for(let g of s[o]){let m=g.startsWith("g_")?u:p;if(!m.has(g))return m.get(g,n),o}if(o++,o===c)return o;if(l&&++h>fy){if(Date.now()>d)return n(),o;h=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let e of this._cachedBitmapsMap.values()){for(let t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){let n=e.width??e.displayWidth,a=e.height??e.displayHeight,s=Math.max(Math.hypot(t[0],t[1]),1),r=Math.max(Math.hypot(t[2],t[3]),1),o=n,c=a,l="prescale1",d,h;for(;s>2&&o>1||r>2&&c>1;){let u=o,p=c;s>2&&o>1&&(u=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/u),r>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,r/=c/p),d=this.cachedCanvases.getCanvas(l,u,p),h=d.context,h.clearRect(0,0,u,p),h.drawImage(e,0,0,o,c,0,0,u,p),e=d.canvas,o=u,c=p,l=l==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e){let t=this.ctx,{width:n,height:a}=e,s=this.current.fillColor,r=this.current.patternFill,o=ve(t),c,l,d,h;if((e.bitmap||e.data)&&e.count>1){let E=e.bitmap||e.data.buffer;l=JSON.stringify(r?o:[o.slice(0,4),s]),c=this._cachedBitmapsMap.get(E),c||(c=new Map,this._cachedBitmapsMap.set(E,c));let w=c.get(l);if(w&&!r){let x=Math.round(Math.min(o[0],o[2])+o[4]),L=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:w,offsetX:x,offsetY:L}}d=w}d||(h=this.cachedCanvases.getCanvas("maskCanvas",n,a),my(h.context,e));let u=T.transform(o,[1/n,0,0,-1/a,0,0]);u=T.transform(u,[1,0,0,1,0,-a]);let[p,f,g,m]=T.getAxialAlignedBoundingBox([0,0,n,a],u),y=Math.round(g-p)||1,v=Math.round(m-f)||1,M=this.cachedCanvases.getCanvas("fillCanvas",y,v),k=M.context,C=p,b=f;k.translate(-C,-b),k.transform(...u),d||(d=this._scaleImage(h.canvas,Xt(k)),d=d.img,c&&r&&c.set(l,d)),k.imageSmoothingEnabled=ky(ve(k),e.interpolate),Do(k,d,0,0,d.width,d.height,0,0,n,a),k.globalCompositeOperation="source-in";let I=T.transform(Xt(k),[1,0,0,1,-C,-b]);return k.fillStyle=r?s.getPattern(t,this,I,$e.FILL):s,k.fillRect(0,0,n,a),c&&!r&&(this.cachedCanvases.delete("fillCanvas"),c.set(l,M.canvas)),{canvas:M.canvas,offsetX:Math.round(C),offsetY:Math.round(b)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=Rw[e]}setLineJoin(e){this.ctx.lineJoin=Ow[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){let n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=a.context;let s=this.ctx;s.setTransform(...ve(this.suspendedCtx)),ss(this.suspendedCtx,s),Tw(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ss(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,a){let s=a[0],r=a[1],o=a[2]-s,c=a[3]-r;o===0||c===0||(this.genericComposeSMask(t.context,n,o,c,t.subtype,t.backdrop,t.transferMap,s,r,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,a,s,r,o,c,l,d,h){let u=e.canvas,p=c-d,f=l-h;if(r){let m=T.makeHexColor(...r);if(p<0||f<0||p+n>u.width||f+a>u.height){let y=this.cachedCanvases.getCanvas("maskExtension",n,a),v=y.context;v.drawImage(u,-p,-f),v.globalCompositeOperation="destination-atop",v.fillStyle=m,v.fillRect(0,0,n,a),v.globalCompositeOperation="source-over",u=y.canvas,p=f=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let y=new Path2D;y.rect(p,f,n,a),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=m,e.fillRect(p,f,n,a),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));let g=new Path2D;g.rect(c,l,n,a),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(u,p,f,n,a,c,l,n,a),t.restore()}save(){this.inSMaskMode?(ss(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ss(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,a,s,r){this.ctx.transform(e,t,n,a,s,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){let a=this.ctx,s=this.current,r=s.x,o=s.y,c,l,d=ve(a),h=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,u=h?n.slice(0):null;for(let p=0,f=0,g=e.length;p<g;p++)switch(e[p]|0){case At.rectangle:r=t[f++],o=t[f++];let m=t[f++],y=t[f++],v=r+m,M=o+y;a.moveTo(r,o),m===0||y===0?a.lineTo(v,M):(a.lineTo(v,o),a.lineTo(v,M),a.lineTo(r,M)),h||s.updateRectMinMax(d,[r,o,v,M]),a.closePath();break;case At.moveTo:r=t[f++],o=t[f++],a.moveTo(r,o),h||s.updatePathMinMax(d,r,o);break;case At.lineTo:r=t[f++],o=t[f++],a.lineTo(r,o),h||s.updatePathMinMax(d,r,o);break;case At.curveTo:c=r,l=o,r=t[f+4],o=t[f+5],a.bezierCurveTo(t[f],t[f+1],t[f+2],t[f+3],r,o),s.updateCurvePathMinMax(d,c,l,t[f],t[f+1],t[f+2],t[f+3],r,o,u),f+=6;break;case At.curveTo2:c=r,l=o,a.bezierCurveTo(r,o,t[f],t[f+1],t[f+2],t[f+3]),s.updateCurvePathMinMax(d,c,l,r,o,t[f],t[f+1],t[f+2],t[f+3],u),r=t[f+2],o=t[f+3],f+=4;break;case At.curveTo3:c=r,l=o,r=t[f+2],o=t[f+3],a.bezierCurveTo(t[f],t[f+1],r,o,r,o),s.updateCurvePathMinMax(d,c,l,t[f],t[f+1],r,o,r,o,u),f+=4;break;case At.closePath:a.closePath();break}h&&s.updateScalingPathMinMax(d,u),s.setCurrentPoint(r,o)}closePath(){this.ctx.closePath()}stroke(e=!0){let t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&n?.getPattern?(t.save(),t.strokeStyle=n.getPattern(t,this,Xt(t),$e.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){let t=this.ctx,n=this.current.fillColor,a=this.current.patternFill,s=!1;a&&(t.save(),t.fillStyle=n.getPattern(t,this,Xt(t),$e.FILL),s=!0);let r=this.current.getClippedPathBoundingBox();this.contentVisible&&r!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(r)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Fw}eoClip(){this.pendingClip=vy}beginText(){this.current.textMatrix=by,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(let n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){let n=this.commonObjs.get(e),a=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(a.fontMatrix=n.fontMatrix||s1,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&z("Invalid font matrix for font "+e),t<0?(t=-t,a.fontDirection=-1):a.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;let s=n.loadedName||"sans-serif",r=n.systemFontInfo?.css||`"${s}", ${n.fallbackName}`,o="normal";n.black?o="900":n.bold&&(o="bold");let c=n.italic?"italic":"normal",l=t;t<uy?l=uy:t>py&&(l=py),this.current.fontSizeScale=t/l,this.ctx.font=`${c} ${o} ${l}px ${r}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,a,s,r){this.current.textMatrix=[e,t,n,a,s,r],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,a){let s=this.ctx,r=this.current,o=r.font,c=r.textRenderingMode,l=r.fontSize/r.fontSizeScale,d=c&Be.FILL_STROKE_MASK,h=!!(c&Be.ADD_TO_PATH_FLAG),u=r.patternFill&&!o.missingFile,p;(o.disableFontFace||h||u)&&(p=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||u?(s.save(),s.translate(t,n),s.beginPath(),p(s,l),a&&s.setTransform(...a),(d===Be.FILL||d===Be.FILL_STROKE)&&s.fill(),(d===Be.STROKE||d===Be.FILL_STROKE)&&s.stroke(),s.restore()):((d===Be.FILL||d===Be.FILL_STROKE)&&s.fillText(e,t,n),(d===Be.STROKE||d===Be.FILL_STROKE)&&s.strokeText(e,t,n)),h&&(this.pendingTextPaths||=[]).push({transform:ve(s),x:t,y:n,fontSize:l,addToPath:p})}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);let t=e.getImageData(0,0,10,10).data,n=!1;for(let a=3;a<t.length;a+=4)if(t[a]>0&&t[a]<255){n=!0;break}return Y(this,"isFontSubpixelAAEnabled",n)}showText(e){let t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);let a=t.fontSize;if(a===0)return;let s=this.ctx,r=t.fontSizeScale,o=t.charSpacing,c=t.wordSpacing,l=t.fontDirection,d=t.textHScale*l,h=e.length,u=n.vertical,p=u?1:-1,f=n.defaultVMetrics,g=a*t.fontMatrix[0],m=t.textRenderingMode===Be.FILL&&!n.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),l>0?s.scale(d,-1):s.scale(d,1);let y;if(t.patternFill){s.save();let b=t.fillColor.getPattern(s,this,Xt(s),$e.FILL);y=ve(s),s.restore(),s.fillStyle=b}let v=t.lineWidth,M=t.textMatrixScale;if(M===0||v===0){let b=t.textRenderingMode&Be.FILL_STROKE_MASK;(b===Be.STROKE||b===Be.FILL_STROKE)&&(v=this.getSinglePixelWidth())}else v/=M;if(r!==1&&(s.scale(r,r),v/=r),s.lineWidth=v,n.isInvalidPDFjsFont){let b=[],I=0;for(let E of e)b.push(E.unicode),I+=E.width;s.fillText(b.join(""),0,0),t.x+=I*g*d,s.restore(),this.compose();return}let k=0,C;for(C=0;C<h;++C){let b=e[C];if(typeof b=="number"){k+=p*b*a/1e3;continue}let I=!1,E=(b.isSpace?c:0)+o,w=b.fontChar,x=b.accent,L,ee,Q=b.width;if(u){let se=b.vmetric||f,we=-(b.vmetric?se[1]:Q*.5)*g,R=se[2]*g;Q=se?-se[0]:Q,L=we/r,ee=(k+R)/r}else L=k/r,ee=0;if(n.remeasure&&Q>0){let se=s.measureText(w).width*1e3/a*r;if(Q<se&&this.isFontSubpixelAAEnabled){let we=Q/se;I=!0,s.save(),s.scale(we,1),L/=we}else Q!==se&&(L+=(Q-se)/2e3*a/r)}if(this.contentVisible&&(b.isInFont||n.missingFile)){if(m&&!x)s.fillText(w,L,ee);else if(this.paintChar(w,L,ee,y),x){let se=L+a*x.offset.x/r,we=ee-a*x.offset.y/r;this.paintChar(x.fontChar,se,we,y)}}let $=u?Q*g-E*l:Q*g+E*l;k+=$,I&&s.restore()}u?t.y-=k:t.x+=k*d,s.restore(),this.compose()}showType3Text(e){let t=this.ctx,n=this.current,a=n.font,s=n.fontSize,r=n.fontDirection,o=a.vertical?1:-1,c=n.charSpacing,l=n.wordSpacing,d=n.textHScale*r,h=n.fontMatrix||s1,u=e.length,p=n.textRenderingMode===Be.INVISIBLE,f,g,m,y;if(!(p||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(d,r),f=0;f<u;++f){if(g=e[f],typeof g=="number"){y=o*g*s/1e3,this.ctx.translate(y,0),n.x+=y*d;continue}let v=(g.isSpace?l:0)+c,M=a.charProcOperatorList[g.operatorListId];if(!M){z(`Type3 character "${g.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=g,this.save(),t.scale(s,s),t.transform(...h),this.executeOperatorList(M),this.restore()),m=T.applyTransform([g.width,0],h)[0]*s+v,t.translate(m,0),n.x+=m*d}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,a,s,r){this.ctx.rect(n,a,s-n,r-a),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){let n=e[1],a=this.baseTransform||ve(this.ctx),s={createCanvasGraphics:r=>new i(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Lw(e,n,this.ctx,s,a)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=T.makeHexColor(e,t,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=T.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=Ew(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;let t=this.ctx;this.save();let n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Xt(t),$e.SHADING);let a=Xt(t);if(a){let{width:s,height:r}=t.canvas,[o,c,l,d]=T.getAxialAlignedBoundingBox([0,0,s,r],a);this.ctx.fillRect(o,c,l-o,d-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){he("Should not call beginInlineImage")}beginImageData(){he("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ve(this.ctx),t)){let n=t[2]-t[0],a=t[3]-t[1];this.ctx.rect(t[0],t[1],n,a),this.current.updateRectMinMax(ve(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let t=this.ctx;e.isolated||Mc("TODO: Support non-isolated groups."),e.knockout&&z("Knockout groups not supported.");let n=ve(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let a=T.getAxialAlignedBoundingBox(e.bbox,ve(t)),s=[0,0,t.canvas.width,t.canvas.height];a=T.intersect(a,s)||[0,0,0,0];let r=Math.floor(a[0]),o=Math.floor(a[1]),c=Math.max(Math.ceil(a[2])-r,1),l=Math.max(Math.ceil(a[3])-o,1);this.current.startNewPathAndClipBox([0,0,c,l]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);let h=this.cachedCanvases.getCanvas(d,c,l),u=h.context;u.translate(-r,-o),u.transform(...n),e.smask?this.smaskStack.push({canvas:h.canvas,context:u,offsetX:r,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(r,o),t.save()),ss(t,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;let t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let a=ve(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);let s=T.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],a);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,n,a,s){if(this.#e(),To(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){let r=t[2]-t[0],o=t[3]-t[1];if(s&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=r,t[3]=o;let[c,l]=T.singularValueDecompose2dScale(ve(this.ctx)),{viewportScale:d}=this,h=Math.ceil(r*this.outputScaleX*d),u=Math.ceil(o*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,u);let{canvas:p,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(c,0,0,-l,0,o*l),To(this.ctx)}else To(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],r,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new Qo(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;let t=e.count;e=this.getObject(e.data,e),e.count=t;let n=this.ctx,a=this.processingType3;if(a&&(a.compiled===void 0&&(a.compiled=Pw(e)),a.compiled)){a.compiled(n);return}let s=this._createMaskCanvas(e),r=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(r,s.offsetX,s.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,a=0,s,r){if(!this.contentVisible)return;e=this.getObject(e.data,e);let o=this.ctx;o.save();let c=ve(o);o.transform(t,n,a,s,0,0);let l=this._createMaskCanvas(e);o.setTransform(1,0,0,1,l.offsetX-c[4],l.offsetY-c[5]);for(let d=0,h=r.length;d<h;d+=2){let u=T.transform(c,[t,n,a,s,r[d],r[d+1]]),[p,f]=T.applyTransform([0,0],u);o.drawImage(l.canvas,p,f)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;let t=this.ctx,n=this.current.fillColor,a=this.current.patternFill;for(let s of e){let{data:r,width:o,height:c,transform:l}=s,d=this.cachedCanvases.getCanvas("maskCanvas",o,c),h=d.context;h.save();let u=this.getObject(r,s);my(h,u),h.globalCompositeOperation="source-in",h.fillStyle=a?n.getPattern(h,this,Xt(t),$e.FILL):n,h.fillRect(0,0,o,c),h.restore(),t.save(),t.transform(...l),t.scale(1,-1),Do(t,d.canvas,0,0,o,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;let t=this.getObject(e);if(!t){z("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,a){if(!this.contentVisible)return;let s=this.getObject(e);if(!s){z("Dependent image isn't ready yet");return}let r=s.width,o=s.height,c=[];for(let l=0,d=a.length;l<d;l+=2)c.push({transform:[t,0,0,n,a[l],a[l+1]],x:0,y:0,w:r,h:o});this.paintInlineImageXObjectGroup(s,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;let{bitmap:t,width:n,height:a}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,a),r=s.context;return r.filter=this.current.transferMaps,r.drawImage(t,0,0),r.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;let t=e.width,n=e.height,a=this.ctx;if(this.save(),!Ve){let{filter:o}=a;o!=="none"&&o!==""&&(a.filter="none")}a.scale(1/t,-1/n);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{let c=this.cachedCanvases.getCanvas("inlineImage",t,n).context;yy(c,e),s=this.applyTransferMapsToCanvas(c)}let r=this._scaleImage(s,Xt(a));a.imageSmoothingEnabled=ky(ve(a),e.interpolate),Do(a,r.img,0,0,r.paintWidth,r.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;let n=this.ctx,a;if(e.bitmap)a=e.bitmap;else{let s=e.width,r=e.height,c=this.cachedCanvases.getCanvas("inlineImage",s,r).context;yy(c,e),a=this.applyTransferMapsToCanvas(c)}for(let s of t)n.save(),n.transform(...s.transform),n.scale(1,-1),Do(n,a,s.x,s.y,s.w,s.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){let t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);let n=this.ctx;this.pendingClip&&(t||(this.pendingClip===vy?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=ve(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),a=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:e}=this.current,{a:t,b:n,c:a,d:s}=this.ctx.getTransform(),r,o;if(n===0&&a===0){let c=Math.abs(t),l=Math.abs(s);if(c===l)if(e===0)r=o=1/c;else{let d=c*e;r=o=d<1?1/d:1}else if(e===0)r=1/c,o=1/l;else{let d=c*e,h=l*e;r=d<1?1/d:1,o=h<1?1/h:1}}else{let c=Math.abs(t*s-n*a),l=Math.hypot(t,n),d=Math.hypot(a,s);if(e===0)r=d/c,o=l/c;else{let h=e*c;r=d>h?d/h:1,o=l>h?l/h:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){let{ctx:t}=this,{lineWidth:n}=this.current,[a,s]=this.getScaleForStroking();if(t.lineWidth=n||1,a===1&&s===1){t.stroke();return}let r=t.getLineDash();if(e&&t.save(),t.scale(a,s),r.length>0){let o=Math.max(a,s);t.setLineDash(r.map(c=>c/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};for(let i in At)Qi.prototype[i]!==void 0&&(Qi.prototype[At[i]]=Qi.prototype[i]);var ai=class{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}},Po={UNKNOWN:0,DATA:1,ERROR:2},_e={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function nt(i){switch(i instanceof Error||typeof i=="object"&&i!==null||he('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Qt(i.message);case"MissingPDFException":return new Yt(i.message);case"PasswordException":return new ls(i.message,i.code);case"UnexpectedResponseException":return new ea(i.message,i.status);case"UnknownErrorException":return new ds(i.message,i.details);default:return new ds(i.message,i.toString())}}var ii=class{#e=new AbortController;constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#i(e);return}if(e.callback){let n=e.callbackId,a=this.callbackCapabilities[n];if(!a)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Po.DATA)a.resolve(e.data);else if(e.callback===Po.ERROR)a.reject(nt(e.reason));else throw new Error("Unexpected callback case");return}let t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){let n=this.sourceName,a=e.sourceName,s=this.comObj;new Promise(function(r){r(t(e.data))}).then(function(r){s.postMessage({sourceName:n,targetName:a,callback:Po.DATA,callbackId:e.callbackId,data:r})},function(r){s.postMessage({sourceName:n,targetName:a,callback:Po.ERROR,callbackId:e.callbackId,reason:nt(r)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){let n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){let a=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[a]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:a,data:t},n)}catch(r){s.reject(r)}return s.promise}sendWithStream(e,t,n,a){let s=this.streamId++,r=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:l=>{let d=Promise.withResolvers();return this.streamControllers[s]={controller:l,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:r,targetName:o,action:e,streamId:s,data:t,desiredSize:l.desiredSize},a),d.promise},pull:l=>{let d=Promise.withResolvers();return this.streamControllers[s].pullCall=d,c.postMessage({sourceName:r,targetName:o,stream:_e.PULL,streamId:s,desiredSize:l.desiredSize}),d.promise},cancel:l=>{Oe(l instanceof Error,"cancel must have a valid reason");let d=Promise.withResolvers();return this.streamControllers[s].cancelCall=d,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:r,targetName:o,stream:_e.CANCEL,streamId:s,reason:nt(l)}),d.promise}},n)}#n(e){let t=e.streamId,n=this.sourceName,a=e.sourceName,s=this.comObj,r=this,o=this.actionHandler[e.action],c={enqueue(l,d=1,h){if(this.isCancelled)return;let u=this.desiredSize;this.desiredSize-=d,u>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:a,stream:_e.ENQUEUE,streamId:t,chunk:l},h)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:a,stream:_e.CLOSE,streamId:t}),delete r.streamSinks[t])},error(l){Oe(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:a,stream:_e.ERROR,streamId:t,reason:nt(l)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(l){l(o(e.data,c))}).then(function(){s.postMessage({sourceName:n,targetName:a,stream:_e.START_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:n,targetName:a,stream:_e.START_COMPLETE,streamId:t,reason:nt(l)})})}#i(e){let t=e.streamId,n=this.sourceName,a=e.sourceName,s=this.comObj,r=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case _e.START_COMPLETE:e.success?r.startCall.resolve():r.startCall.reject(nt(e.reason));break;case _e.PULL_COMPLETE:e.success?r.pullCall.resolve():r.pullCall.reject(nt(e.reason));break;case _e.PULL:if(!o){s.postMessage({sourceName:n,targetName:a,stream:_e.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,new Promise(function(c){c(o.onPull?.())}).then(function(){s.postMessage({sourceName:n,targetName:a,stream:_e.PULL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:n,targetName:a,stream:_e.PULL_COMPLETE,streamId:t,reason:nt(c)})});break;case _e.ENQUEUE:if(Oe(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(e.chunk);break;case _e.CLOSE:if(Oe(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),this.#a(r,t);break;case _e.ERROR:Oe(r,"error should have stream controller"),r.controller.error(nt(e.reason)),this.#a(r,t);break;case _e.CANCEL_COMPLETE:e.success?r.cancelCall.resolve():r.cancelCall.reject(nt(e.reason)),this.#a(r,t);break;case _e.CANCEL:if(!o)break;new Promise(function(c){c(o.onCancel?.(nt(e.reason)))}).then(function(){s.postMessage({sourceName:n,targetName:a,stream:_e.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:n,targetName:a,stream:_e.CANCEL_COMPLETE,streamId:t,reason:nt(c)})}),o.sinkCapability.reject(nt(e.reason)),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}#a(e,t){return A(this,null,function*(){yield Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]})}destroy(){this.#e?.abort(),this.#e=null}},E1=class{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return Cu(this.#e)}has(e){return this.#e.has(e)}},Yi=Symbol("INTERNAL"),L1=class{#e=!1;#t=!1;#n=!1;#i=!0;constructor(e,{name:t,intent:n,usage:a,rbGroups:s}){this.#e=!!(e&it.DISPLAY),this.#t=!!(e&it.PRINT),this.name=t,this.intent=n,this.usage=a,this.rbGroups=s}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;let{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==Yi&&he("Internal method `_setVisible` called."),this.#n=n,this.#i=t}},_1=class{#e=null;#t=new Map;#n=null;#i=null;constructor(e,t=it.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#i=e.order;for(let n of e.groups)this.#t.set(n.id,new L1(t,n));if(e.baseState==="OFF")for(let n of this.#t.values())n._setVisible(Yi,!1);for(let n of e.on)this.#t.get(n)._setVisible(Yi,!0);for(let n of e.off)this.#t.get(n)._setVisible(Yi,!1);this.#n=this.getHash()}}#a(e){let t=e.length;if(t<2)return!0;let n=e[0];for(let a=1;a<t;a++){let s=e[a],r;if(Array.isArray(s))r=this.#a(s);else if(this.#t.has(s))r=this.#t.get(s).visible;else return z(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return n==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Mc("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(z(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(let t of e.ids){if(!this.#t.has(t))return z(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(let t of e.ids){if(!this.#t.has(t))return z(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(let t of e.ids){if(!this.#t.has(t))return z(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(let t of e.ids){if(!this.#t.has(t))return z(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return z(`Unknown optional content policy ${e.policy}.`),!0}return z(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){let a=this.#t.get(e);if(!a){z(`Optional content group not found: ${e}`);return}if(n&&t&&a.rbGroups.length)for(let s of a.rbGroups)for(let r of s)r!==e&&this.#t.get(r)?._setVisible(Yi,!1,!0);a._setVisible(Yi,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let n;for(let a of e){switch(a){case"ON":case"OFF":case"Toggle":n=a;continue}let s=this.#t.get(a);if(s)switch(n){case"ON":this.setVisibility(a,!0,t);break;case"OFF":this.setVisibility(a,!1,t);break;case"Toggle":this.setVisibility(a,!s.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?Cu(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;let e=new Uo;for(let[t,n]of this.#t)e.update(`${t}:${n.visible}`);return this.#e=e.hexdigest()}},D1=class{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Oe(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:a,initialData:s,progressiveDone:r,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=o,s?.length>0){let c=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,l)=>{this._onReceiveData({begin:c,chunk:l})}),e.addProgressListener((c,l)=>{this._onProgress({loaded:c,total:l})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){let n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{let a=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(n),!0)});Oe(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Oe(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let e=this._queuedChunks;return this._queuedChunks=null,new T1(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new P1(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}},T1=class{constructor(e,t,n=!1,a=null){this._stream=e,this._done=n||!1,this._filename=Iu(a)?a:null,this._queuedChunks=t||[],this._loaded=0;for(let s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return A(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},P1=class{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return A(this,null,function*(){if(this._queuedChunk){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function Nw(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let d=o(t);return d=unescape(d),d=c(d),d=l(d),s(d)}if(t=r(i),t){let d=l(t);return s(d)}if(t=n("filename","i").exec(i),t){t=t[1];let d=o(t);return d=l(d),s(d)}function n(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function a(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{let u=new TextDecoder(d,{fatal:!0}),p=wc(h);h=u.decode(p),e=!1}catch{}}return h}function s(d){return e&&/[\x80-\xff]/.test(d)&&(d=a("utf-8",d),e&&(d=a("iso-8859-1",d))),d}function r(d){let h=[],u,p=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(u=p.exec(d))!==null;){let[,g,m,y]=u;if(g=parseInt(g,10),g in h){if(g===0)break;continue}h[g]=[m,y]}let f=[];for(let g=0;g<h.length&&g in h;++g){let[m,y]=h[g];y=o(y),m&&(y=unescape(y),g===0&&(y=c(y))),f.push(y)}return f.join("")}function o(d){if(d.startsWith('"')){let h=d.slice(1).split('\\"');for(let u=0;u<h.length;++u){let p=h[u].indexOf('"');p!==-1&&(h[u]=h[u].slice(0,p),h.length=u+1),h[u]=h[u].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function c(d){let h=d.indexOf("'");if(h===-1)return d;let u=d.slice(0,h),f=d.slice(h+1).replace(/^[^']*'/,"");return a(u,f)}function l(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,u,p,f){if(p==="q"||p==="Q")return f=f.replaceAll("_"," "),f=f.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,m){return String.fromCharCode(parseInt(m,16))}),a(u,f);try{f=atob(f)}catch{}return a(u,f)})}return""}function Su(i,e){let t=new Headers;if(!i||!e||typeof e!="object")return t;for(let n in e){let a=e[n];a!==void 0&&t.append(n,a)}return t}function Eu({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){let a={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(i.get("Content-Length"),10);return!Number.isInteger(s)||(a.suggestedLength=s,s<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function Lu(i){let e=i.get("Content-Disposition");if(e){let t=Nw(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Iu(t))return t}return null}function xc(i,e){return i===404||i===0&&e.startsWith("file:")?new Yt('Missing PDF "'+e+'".'):new ea(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i)}function Iy(i){return i===200||i===206}function Ay(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Sy(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(z(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}var Jo=class{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Su(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Oe(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new R1(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new O1(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},R1=class{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;let t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;let n=new Headers(e.headers),a=t.url;fetch(a,Ay(n,this._withCredentials,this._abortController)).then(s=>{if(!Iy(s.status))throw xc(s.status,a);this._reader=s.body.getReader(),this._headersCapability.resolve();let r=s.headers,{allowRangeRequests:o,suggestedLength:c}=Eu({responseHeaders:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=Lu(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Qt("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return A(this,null,function*(){yield this._headersCapability.promise;let{value:e,done:t}=yield this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Sy(e),done:!1})})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},O1=class{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;let a=e.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;let s=new Headers(e.headers);s.append("Range",`bytes=${t}-${n-1}`);let r=a.url;fetch(r,Ay(s,this._withCredentials,this._abortController)).then(o=>{if(!Iy(o.status))throw xc(o.status,r);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return A(this,null,function*(){yield this._readCapability.promise;let{value:e,done:t}=yield this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Sy(e),done:!1})})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}},i1=200,a1=206;function Hw(i){let e=i.response;return typeof e!="string"?e:wc(e).buffer}var F1=class{constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Su(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){let a={begin:e,end:t};for(let s in n)a[s]=n[s];return this.request(a)}requestFull(e){return this.request(e)}request(e){let t=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(let[s,r]of this.headers)t.setRequestHeader(s,r);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),a.expectedStatus=a1):a.expectedStatus=i1,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=e.onHeadersReceived,a.onDone=e.onDone,a.onError=e.onError,a.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){let n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){let n=this.pendingRequests[e];if(!n)return;let a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),a.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],a.status===0&&this.isHttp){n.onError?.(a.status);return}let s=a.status||i1;if(!(s===i1&&n.expectedStatus===a1)&&s!==n.expectedStatus){n.onError?.(a.status);return}let o=Hw(a);if(s===a1){let c=a.getResponseHeader("Content-Range"),l=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);n.onDone({begin:parseInt(l[1],10),chunk:o})}else o?n.onDone({begin:0,chunk:o}):n.onError?.(a.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}},N1=class{constructor(e){this._source=e,this._manager=new F1(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Oe(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new H1(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let n=new j1(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},H1=class{constructor(e,t){this._manager=e;let n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(r=>{let[o,...c]=r.split(": ");return[o,c.join(": ")]})),{allowRangeRequests:a,suggestedLength:s}=Eu({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=Lu(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=xc(e,this._url),this._headersCapability.reject(this._storedError);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){return A(this,null,function*(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0,this._headersCapability.reject(e);for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},j1=class{constructor(e,t,n){this._manager=e;let a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){let t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=xc(e,this._url);for(let t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}read(){return A(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise})}cancel(e){this._done=!0;for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},jw=/^[a-z][a-z0-9\-+.]+:/i;function Bw(i){if(jw.test(i))return new URL(i);let e=Ft.get("url");return new URL(e.pathToFileURL(i))}function Ey(i,e,t){return i.protocol==="http:"?Ft.get("http").request(i,{headers:e},t):Ft.get("https").request(i,{headers:e},t)}var B1=class{constructor(e){this.source=e,this.url=Bw(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Su(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Oe(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new q1(this):new V1(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=this.isFsUrl?new U1(this,e,t):new z1(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(let t of this._rangeRequestReaders.slice(0))t.cancel(e)}},ec=class{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;let t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return A(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Qt("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},tc=class{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){return A(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}},V1=class extends ec{constructor(e){super(e);let t=Object.fromEntries(e.headers),n=a=>{if(a.statusCode===404){let c=new Yt(`Missing PDF "${this._url}".`);this._storedError=c,this._headersCapability.reject(c);return}this._headersCapability.resolve(),this._setReadableStream(a);let s=new Headers(this._readableStream.headers),{allowRangeRequests:r,suggestedLength:o}=Eu({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=o||this._contentLength,this._filename=Lu(s)};this._request=Ey(this._url,t,n),this._request.on("error",a=>{this._storedError=a,this._headersCapability.reject(a)}),this._request.end()}},z1=class extends tc{constructor(e,t,n){super(e);let a=Object.fromEntries(e.headers);a.Range=`bytes=${t}-${n-1}`;let s=r=>{if(r.statusCode===404){let o=new Yt(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(r)};this._request=Ey(this._url,a,s),this._request.on("error",r=>{this._storedError=r}),this._request.end()}},q1=class extends ec{constructor(e){super(e);let t=Ft.get("fs");t.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new Yt(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}},U1=class extends tc{constructor(e,t,n){super(e);let a=Ft.get("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:n-1}))}},Vw=1e5,Ze=30,zw=.8,ms=class i{#e=Promise.withResolvers();#t=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#s=null;#c=0;#l=0;#d=null;#o=null;#h=0;#r=0;#u=Object.create(null);#f=[];#p=null;#g=[];#m=new WeakMap;#y=null;static#k=new Map;static#M=new Map;static#C=new WeakMap;static#w=null;static#b=new Set;constructor({textContentSource:e,container:t,viewport:n}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(c){c.enqueue(e),c.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#o=t,this.#r=n.scale*(globalThis.devicePixelRatio||1),this.#h=n.rotation,this.#s={div:null,properties:null,ctx:null};let{pageWidth:a,pageHeight:s,pageX:r,pageY:o}=n.rawDims;this.#y=[1,0,0,-1,-r,o+s],this.#l=a,this.#c=s,i.#D(),si(t,n),this.#e.promise.finally(()=>{i.#b.delete(this),this.#s=null,this.#u=null}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:e,isFirefox:t}=He.platform;return Y(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){let e=()=>{this.#d.read().then(({value:t,done:n})=>{if(n){this.#e.resolve();return}this.#a??=t.lang,Object.assign(this.#u,t.styles),this.#_(t.items),e()},this.#e.reject)};return this.#d=this.#p.getReader(),i.#b.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){let n=e.scale*(globalThis.devicePixelRatio||1),a=e.rotation;if(a!==this.#h&&(t?.(),this.#h=a,si(this.#o,{rotation:a})),n!==this.#r){t?.(),this.#r=n;let s={div:null,properties:null,ctx:i.#E(this.#a)};for(let r of this.#g)s.properties=this.#m.get(r),s.div=r,this.#x(s)}}cancel(){let e=new Qt("TextLayer task cancelled.");this.#d?.cancel(e).catch(()=>{}),this.#d=null,this.#e.reject(e)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#f}#_(e){if(this.#n)return;this.#s.ctx??=i.#E(this.#a);let t=this.#g,n=this.#f;for(let a of e){if(t.length>Vw){z("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){let s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),a.id!==null&&this.#t.setAttribute("id",`${a.id}`),s.append(this.#t)}else a.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}n.push(a.str),this.#S(a)}}#S(e){let t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#g.push(t);let a=T.transform(this.#y,e.transform),s=Math.atan2(a[1],a[0]),r=this.#u[e.fontName];r.vertical&&(s+=Math.PI/2);let o=this.#i&&r.fontSubstitution||r.fontFamily;o=i.fontFamilyMap.get(o)||o;let c=Math.hypot(a[2],a[3]),l=c*i.#P(o,this.#a),d,h;s===0?(d=a[4],h=a[5]-l):(d=a[4]+l*Math.sin(s),h=a[5]-l*Math.cos(s));let u="calc(var(--scale-factor)*",p=t.style;this.#t===this.#o?(p.left=`${(100*d/this.#l).toFixed(2)}%`,p.top=`${(100*h/this.#c).toFixed(2)}%`):(p.left=`${u}${d.toFixed(2)}px)`,p.top=`${u}${h.toFixed(2)}px)`),p.fontSize=`${u}${(i.#w*c).toFixed(2)}px)`,p.fontFamily=o,n.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#i&&(t.dataset.fontName=r.fontSubstitutionLoadedName||e.fontName),s!==0&&(n.angle=s*(180/Math.PI));let f=!1;if(e.str.length>1)f=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){let g=Math.abs(e.transform[0]),m=Math.abs(e.transform[3]);g!==m&&Math.max(g,m)/Math.min(g,m)>1.5&&(f=!0)}if(f&&(n.canvasWidth=r.vertical?e.height:e.width),this.#m.set(t,n),this.#s.div=t,this.#s.properties=n,this.#x(this.#s),n.hasText&&this.#t.append(t),n.hasEOL){let g=document.createElement("br");g.setAttribute("role","presentation"),this.#t.append(g)}}#x(e){let{div:t,properties:n,ctx:a}=e,{style:s}=t,r="";if(i.#w>1&&(r=`scale(${1/i.#w})`),n.canvasWidth!==0&&n.hasText){let{fontFamily:o}=s,{canvasWidth:c,fontSize:l}=n;i.#A(a,l*this.#r,o);let{width:d}=a.measureText(t.textContent);d>0&&(r=`scaleX(${c*this.#r/d}) ${r}`)}n.angle!==0&&(r=`rotate(${n.angle}deg) ${r}`),r.length>0&&(s.transform=r)}static cleanup(){if(!(this.#b.size>0)){this.#k.clear();for(let{canvas:e}of this.#M.values())e.remove();this.#M.clear()}}static#E(e=null){let t=this.#M.get(e||="");if(!t){let n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#M.set(e,t),this.#C.set(t,{size:0,family:""})}return t}static#A(e,t,n){let a=this.#C.get(e);t===a.size&&n===a.family||(e.font=`${t}px ${n}`,a.size=t,a.family=n)}static#D(){if(this.#w!==null)return;let e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#w=e.getBoundingClientRect().height,e.remove()}static#P(e,t){let n=this.#k.get(e);if(n)return n;let a=this.#E(t);a.canvas.width=a.canvas.height=Ze,this.#A(a,Ze,e);let s=a.measureText(""),r=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);if(r){let d=r/(r+o);return this.#k.set(e,d),a.canvas.width=a.canvas.height=0,d}a.strokeStyle="red",a.clearRect(0,0,Ze,Ze),a.strokeText("g",0,0);let c=a.getImageData(0,0,Ze,Ze).data;o=0;for(let d=c.length-1-3;d>=0;d-=4)if(c[d]>0){o=Math.ceil(d/4/Ze);break}a.clearRect(0,0,Ze,Ze),a.strokeText("A",0,Ze),c=a.getImageData(0,0,Ze,Ze).data,r=0;for(let d=0,h=c.length;d<h;d+=4)if(c[d]>0){r=Ze-Math.floor(d/4/Ze);break}a.canvas.width=a.canvas.height=0;let l=r?r/(r+o):zw;return this.#k.set(e,l),l}},ks=class i{static textContent(e){let t=[],n={items:t,styles:Object.create(null)};function a(s){if(!s)return;let r=null,o=s.name;if(o==="#text")r=s.value;else if(i.shouldBuildText(o))s?.attributes?.textContent?r=s.attributes.textContent:s.value&&(r=s.value);else return;if(r!==null&&t.push({str:r}),!!s.children)for(let c of s.children)a(c)}return a(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}},qw=65536,Uw=100,Ww=5e3,$w=Ve?M1:m1,Gw=Ve?w1:Xo,Xw=Ve?v1:k1,Zw=Ve?b1:Yo;function Kw(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});let e=new W1,{docId:t}=e,n=i.url?Yw(i.url):null,a=i.data?Qw(i.data):null,s=i.httpHeaders||null,r=i.withCredentials===!0,o=i.password??null,c=i.range instanceof nc?i.range:null,l=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:qw,d=i.worker instanceof Ji?i.worker:null,h=i.verbosity,u=typeof i.docBaseUrl=="string"&&!Cc(i.docBaseUrl)?i.docBaseUrl:null,p=typeof i.cMapUrl=="string"?i.cMapUrl:null,f=i.cMapPacked!==!1,g=i.CMapReaderFactory||Gw,m=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,y=i.StandardFontDataFactory||Zw,v=i.stopAtErrors!==!0,M=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,k=i.isEvalSupported!==!1,C=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Ve,b=typeof i.isChrome=="boolean"?i.isChrome:!He.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,I=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,E=typeof i.disableFontFace=="boolean"?i.disableFontFace:Ve,w=i.fontExtraProperties===!0,x=i.enableXfa===!0,L=i.ownerDocument||globalThis.document,ee=i.disableRange===!0,Q=i.disableStream===!0,$=i.disableAutoFetch===!0,se=i.pdfBug===!0,we=i.CanvasFactory||$w,R=i.FilterFactory||Xw,V=i.enableHWA===!0,nn=c?c.length:i.length??NaN,Cn=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Ve&&!E,st=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:g===Xo&&y===Yo&&p&&m&&os(p,document.baseURI)&&os(m,document.baseURI);i.canvasFactory&&cy("`canvasFactory`-instance option, please use `CanvasFactory` instead."),i.filterFactory&&cy("`filterFactory`-instance option, please use `FilterFactory` instead.");let Fe=null;hw(h);let Ee={canvasFactory:new we({ownerDocument:L,enableHWA:V}),filterFactory:new R({docId:t,ownerDocument:L}),cMapReaderFactory:st?null:new g({baseUrl:p,isCompressed:f}),standardFontDataFactory:st?null:new y({baseUrl:m})};if(!d){let rt={verbosity:h,port:ai.workerPort};d=rt.port?Ji.fromPort(rt):new Ji(rt),e._worker=d}let ui={docId:t,apiVersion:"4.8.69",data:a,password:o,disableAutoFetch:$,rangeChunkSize:l,length:nn,docBaseUrl:u,enableXfa:x,evaluatorOptions:{maxImageSize:M,disableFontFace:E,ignoreErrors:v,isEvalSupported:k,isOffscreenCanvasSupported:C,isChrome:b,canvasMaxAreaInBytes:I,fontExtraProperties:w,useSystemFonts:Cn,cMapUrl:st?p:null,standardFontDataUrl:st?m:null}},ra={disableFontFace:E,fontExtraProperties:w,ownerDocument:L,pdfBug:se,styleElement:Fe,loadingParams:{disableAutoFetch:$,enableXfa:x}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");let rt=d.messageHandler.sendWithPromise("GetDocRequest",ui,a?[a.buffer]:null),ue;if(c)ue=new D1(c,{disableRange:ee,disableStream:Q});else if(!a){if(!n)throw new Error("getDocument - no `url` parameter provided.");let jt;Ve?jt=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&os(n)?Jo:B1:jt=os(n)?Jo:N1,ue=new jt({url:n,length:nn,httpHeaders:s,withCredentials:r,rangeChunkSize:l,disableRange:ee,disableStream:Q})}return rt.then(jt=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");let Xc=new ii(t,jt,d.port),xm=new Z1(Xc,e,ue,ra,Ee);e._transport=xm,Xc.send("Ready",null)})}).catch(e._capability.reject),e}function Yw(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(Ve&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Qw(i){if(Ve&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return wc(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i?.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function My(i){return typeof i=="object"&&Number.isInteger(i?.num)&&i.num>=0&&Number.isInteger(i?.gen)&&i.gen>=0}var W1=class i{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${i.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return A(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}},nc=class{constructor(e,t,n=!1,a=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(let n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(let n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(let t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){he("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},$1=class{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Y(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},G1=class{#e=null;#t=!1;constructor(e,t,n,a=!1){this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=a?new Vo:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new ic,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:s=!1}={}){return new hs({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:a,dontFlip:s})}getAnnotations({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Y(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return A(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:a=mn.ENABLE,transform:s=null,background:r=null,optionalContentConfigPromise:o=null,annotationCanvasMap:c=null,pageColors:l=null,printAnnotationStorage:d=null,isEditing:h=!1}){this._stats?.time("Overall");let u=this._transport.getRenderingIntent(n,a,d,h),{renderingIntent:p,cacheKey:f}=u;this.#t=!1,this.#i(),o||=this._transport.getOptionalContentConfig(p);let g=this._intentStates.get(f);g||(g=Object.create(null),this._intentStates.set(f,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);let m=!!(p&it.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(u));let y=k=>{g.renderTasks.delete(v),(this._maybeCleanupAfterRender||m)&&(this.#t=!0),this.#n(!m),k?(v.capability.reject(k),this._abortOperatorList({intentState:g,reason:k instanceof Error?k:new Error(k)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new Y1({callback:y,params:{canvasContext:e,viewport:t,transform:s,background:r},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!m,pdfBug:this._pdfBug,pageColors:l});(g.renderTasks||=new Set).add(v);let M=v.task;return Promise.all([g.displayReadyCapability.promise,o]).then(([k,C])=>{if(this.destroyed){y();return}if(this._stats?.time("Rendering"),!(C.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:k,optionalContentConfig:C}),v.operatorListChanged()}).catch(y),M}getOperatorList({intent:e="display",annotationMode:t=mn.ENABLE,printAnnotationStorage:n=null,isEditing:a=!1}={}){function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}let r=this._transport.getRenderingIntent(e,t,n,a,!0),o=this._intentStates.get(r.cacheKey);o||(o=Object.create(null),this._intentStates.set(r.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(r)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>ks.textContent(n));let t=this.streamTextContent(e);return new Promise(function(n,a){function s(){r.read().then(function({value:c,done:l}){if(l){n(o);return}o.lang??=c.lang,Object.assign(o.styles,c.styles),o.items.push(...c.items),s()},a)}let r=t.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(e)}cleanup(e=!1){this.#t=!0;let t=this.#n(!1);return e&&t&&(this._stats&&=new Vo),t}#n(e=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},Ww),!1;for(let{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){let n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,a=e.length;n<a;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(let n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:a}){let{map:s,transfer:r}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:a},r).getReader(),l=this._intentStates.get(t);l.streamReader=c;let d=()=>{c.read().then(({value:h,done:u})=>{if(u){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,l),d())},h=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(let u of l.renderTasks)u.operatorListChanged();this.#n(!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(h);else if(l.opListReadCapability)l.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof us){let a=Uw;t.extraDelay>0&&t.extraDelay<1e3&&(a+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},a);return}}if(e.streamReader.cancel(new Qt(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(let[a,s]of this._intentStates)if(s===e){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}},X1=class{#e=new Map;#t=Promise.resolve();postMessage(e,t){let n={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(let[a]of this.#e)a.call(this,n)})}addEventListener(e,t,n=null){let a=null;if(n?.signal instanceof AbortSignal){let{signal:s}=n;if(s.aborted){z("LoopbackPort - cannot use an `aborted` signal.");return}let r=()=>this.removeEventListener(e,t);a=()=>s.removeEventListener("abort",r),s.addEventListener("abort",r)}this.#e.set(t,a)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(let[,e]of this.#e)e?.();this.#e.clear()}},Ji=class i{static#e=0;static#t=!1;static#n;static{Ve&&(this.#t=!0,ai.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}let a=new URL(t,n);return n.origin===a.origin},this._createCDNWrapper=e=>{let t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}}constructor({name:e=null,port:t=null,verbosity:n=uw()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(i.#n?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(i.#n||=new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Ve?Promise.all([Ft.promise,this._readyCapability.promise]):this._readyCapability.promise}#i(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new ii("main","worker",e),this._messageHandler.on("ready",function(){}),this.#i()}_initialize(){if(i.#t||i.#a){this._setupFakeWorker();return}let{workerSrc:e}=i;try{i._isSameOrigin(window.location.href,e)||(e=i._createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e,{type:"module"}),n=new ii("main","worker",t),a=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||a()},{signal:s.signal}),n.on("test",o=>{if(s.abort(),this.destroyed||!o){a();return}this._messageHandler=n,this._port=t,this._webWorker=t,this.#i()}),n.on("ready",o=>{if(s.abort(),this.destroyed){a();return}try{r()}catch{this._setupFakeWorker()}});let r=()=>{let o=new Uint8Array;n.send("test",o,[o.buffer])};r();return}catch{Mc("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){i.#t||(z("Setting up fake worker."),i.#t=!0),i._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let t=new X1;this._port=t;let n=`fake${i.#e++}`,a=new ii(n+"_worker",n,t);e.setup(a,t),this._messageHandler=new ii(n,n+"_worker",t),this.#i()}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),i.#n?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");let t=this.#n?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new i(e)}static get workerSrc(){if(ai.workerSrc)return ai.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#a(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return Y(this,"_setupFakeWorkerGlobal",A(this,null,function*(){return this.#a?this.#a:(yield import(this.workerSrc)).WorkerMessageHandler}))}},Z1=class{#e=new Map;#t=new Map;#n=new Map;#i=new Map;#a=null;constructor(e,t,n,a,s){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new ic,this.fontLoader=new g1({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(e,t=null){let n=this.#e.get(e);if(n)return n;let a=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,a),a}get annotationStorage(){return Y(this,"annotationStorage",new gs)}getRenderingIntent(e,t=mn.ENABLE,n=null,a=!1,s=!1){let r=it.DISPLAY,o=f1;switch(e){case"any":r=it.ANY;break;case"display":break;case"print":r=it.PRINT;break;default:z(`getRenderingIntent - invalid intent: ${e}`)}let c=r&it.PRINT&&n instanceof Wo?n:this.annotationStorage;switch(t){case mn.DISABLE:r+=it.ANNOTATIONS_DISABLE;break;case mn.ENABLE:break;case mn.ENABLE_FORMS:r+=it.ANNOTATIONS_FORMS;break;case mn.ENABLE_STORAGE:r+=it.ANNOTATIONS_STORAGE,o=c.serializable;break;default:z(`getRenderingIntent - invalid annotationMode: ${t}`)}a&&(r+=it.IS_EDITING),s&&(r+=it.OPLIST);let{ids:l,hash:d}=c.modifiedIds,h=[r,o.hash,d];return{renderingIntent:r,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:l}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));let e=[];for(let n of this.#t.values())e.push(n._destroy());this.#t.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),ms.cleanup(),this._networkStream?.cancelAllRequests(new Qt("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,a)=>{Oe(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},a.onPull=()=>{this._fullReader.read().then(function({value:s,done:r}){if(r){a.close();return}Oe(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{a.error(s)})},a.onCancel=s=>{this._fullReader.cancel(s),a.ready.catch(r=>{if(!this.destroyed)throw r})}}),e.on("ReaderHeadersReady",n=>A(this,null,function*(){yield this._fullReader.headersReady;let{isStreamingSupported:a,isRangeSupported:s,contentLength:r}=this._fullReader;return(!a||!s)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=o=>{t.onProgress?.({loaded:o.loaded,total:o.total})}),{isStreamingSupported:a,isRangeSupported:s,contentLength:r}})),e.on("GetRangeReader",(n,a)=>{Oe(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){a.close();return}a.onPull=()=>{s.read().then(function({value:r,done:o}){if(o){a.close();return}Oe(r instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{a.error(r)})},a.onCancel=r=>{s.cancel(r),a.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new $1(n,this))}),e.on("DocException",function(n){let a;switch(n.name){case"PasswordException":a=new ls(n.message,n.code);break;case"InvalidPDFException":a=new Bo(n.message);break;case"MissingPDFException":a=new Yt(n.message);break;case"UnexpectedResponseException":a=new ea(n.message,n.status);break;case"UnknownErrorException":a=new ds(n.message,n.details);break;default:he("DocException - expected a valid Error.")}t._capability.reject(a)}),e.on("PasswordRequest",n=>{if(this.#a=Promise.withResolvers(),t.onPassword){let a=s=>{s instanceof Error?this.#a.reject(s):this.#a.resolve({password:s})};try{t.onPassword(a,n.code)}catch(s){this.#a.reject(s)}}else this.#a.reject(new ls(n.message,n.code));return this.#a.promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;this.#t.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,a,s])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(a){case"Font":let{disableFontFace:r,fontExtraProperties:o,pdfBug:c}=this._params;if("error"in s){let u=s.error;z(`Error during font loading: ${u}`),this.commonObjs.resolve(n,u);break}let l=c&&globalThis.FontInspector?.enabled?(u,p)=>globalThis.FontInspector.fontAdded(u,p):null,d=new y1(s,{disableFontFace:r,inspectFont:l});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!o&&d.data&&(d.data=null),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":let{imageRef:h}=s;Oe(h,"The imageRef must be defined.");for(let u of this.#t.values())for(let[,p]of u.objs)if(p?.ref===h)return p.dataLen?(this.commonObjs.resolve(n,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,s);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),e.on("obj",([n,a,s,r])=>{if(this.destroyed)return;let o=this.#t.get(a);if(!o.objs.has(n)){if(o._intentStates.size===0){r?.bitmap?.close();return}switch(s){case"Image":o.objs.resolve(n,r),r?.dataLen>rw&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(n,r);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",n=>A(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)})),e.on("FetchStandardFontData",n=>A(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&z("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));let t=e-1,n=this.#n.get(t);if(n)return n;let a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#i.set(s.refStr,e);let r=new G1(t,s,this,this._params.pdfBug);return this.#t.set(t,r),r});return this.#n.set(t,a),a}getPageIndex(e){return My(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(t=>new _1(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",t=this.#e.get(e);if(t)return t;let n=this.messageHandler.sendWithPromise(e,null).then(a=>({info:a[0],metadata:a[1]?new E1(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(e=!1){return A(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),ms.cleanup()}})}cachedPageNumber(e){if(!My(e))return null;let t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#i.get(t)??null}},Ro=Symbol("INITIAL_DATA"),ic=class{#e=Object.create(null);#t(e){return this.#e[e]||=re(D({},Promise.withResolvers()),{data:Ro})}get(e,t=null){if(t){let a=this.#t(e);return a.promise.then(()=>t(a.data)),null}let n=this.#e[e];if(!n||n.data===Ro)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){let t=this.#e[e];return!!t&&t.data!==Ro}resolve(e,t=null){let n=this.#t(e);n.data=t,n.resolve()}clear(){for(let e in this.#e){let{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(let e in this.#e){let{data:t}=this.#e[e];t!==Ro&&(yield[e,t])}}},K1=class{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;let{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}},Y1=class i{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:a,annotationCanvasMap:s,operatorList:r,pageIndex:o,canvasFactory:c,filterFactory:l,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:u=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=a,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=l,this._pdfBug=h,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new K1(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(i.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");i.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:n,viewport:a,transform:s,background:r}=this.params;this.gfx=new Qi(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:a,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),i.#t.delete(this._canvas),this.callback(e||new us(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return A(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),i.#t.delete(this._canvas),this.callback())))})}},Jw="4.8.69",eb="3634dab10";function wy(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function rs(i){return Math.max(0,Math.min(255,255*i))}var ac=class{static CMYK_G([e,t,n,a]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+a)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=rs(e),[e,e,e]}static G_HTML([e]){let t=wy(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(rs)}static RGB_HTML(e){return`#${e.map(wy).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,a]){return["RGB",1-Math.min(1,e+a),1-Math.min(1,n+a),1-Math.min(1,t+a)]}static CMYK_rgb([e,t,n,a]){return[rs(1-Math.min(1,e+a)),rs(1-Math.min(1,n+a)),rs(1-Math.min(1,t+a))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){let a=1-e,s=1-t,r=1-n,o=Math.min(a,s,r);return["CMYK",a,s,r,o]}},Q1=class{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");let a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${e}px`),a.setAttribute("height",`${t}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${e} ${t}`),a}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){he("Abstract method `_createSVG` called.")}},vs=class extends Q1{_createSVG(e){return document.createElementNS(Zt,e)}},sc=class{static setupStorage(e,t,n,a,s){let r=a.getValue(t,{value:null});switch(n.name){case"textarea":if(r.value!==null&&(e.textContent=r.value),s==="print")break;e.addEventListener("input",o=>{a.setValue(t,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(r.value===n.attributes.xfaOn?e.setAttribute("checked",!0):r.value===n.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{a.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(r.value!==null&&e.setAttribute("value",r.value),s==="print")break;e.addEventListener("input",o=>{a.setValue(t,{value:o.target.value})})}break;case"select":if(r.value!==null){e.setAttribute("value",r.value);for(let o of n.children)o.attributes.value===r.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{let c=o.target.options,l=c.selectedIndex===-1?"":c[c.selectedIndex].value;a.setValue(t,{value:l})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:a,linkService:s}){let{attributes:r}=t,o=e instanceof HTMLAnchorElement;r.type==="radio"&&(r.name=`${r.name}-${a}`);for(let[c,l]of Object.entries(r))if(l!=null)switch(c){case"class":l.length&&e.setAttribute(c,l.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",l);break;case"style":Object.assign(e.style,l);break;case"textContent":e.textContent=l;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,l)}o&&s.addLinkAttributes(e,r.href,r.newWindow),n&&r.dataId&&this.setupStorage(e,r.dataId,t,n)}static render(e){let t=e.annotationStorage,n=e.linkService,a=e.xfaHtml,s=e.intent||"display",r=document.createElement(a.name);a.attributes&&this.setAttributes({html:r,element:a,intent:s,linkService:n});let o=s!=="richText",c=e.div;if(c.append(r),e.viewport){let h=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=h}o&&c.setAttribute("class","xfaLayer xfaFont");let l=[];if(a.children.length===0){if(a.value){let h=document.createTextNode(a.value);r.append(h),o&&ks.shouldBuildText(a.name)&&l.push(h)}return{textDivs:l}}let d=[[a,-1,r]];for(;d.length>0;){let[h,u,p]=d.at(-1);if(u+1===h.children.length){d.pop();continue}let f=h.children[++d.at(-1)[1]];if(f===null)continue;let{name:g}=f;if(g==="#text"){let y=document.createTextNode(f.value);l.push(y),p.append(y);continue}let m=f?.attributes?.xmlns?document.createElementNS(f.attributes.xmlns,g):document.createElement(g);if(p.append(m),f.attributes&&this.setAttributes({html:m,element:f,storage:t,intent:s,linkService:n}),f.children?.length>0)d.push([f,-1,m]);else if(f.value){let y=document.createTextNode(f.value);o&&ks.shouldBuildText(g)&&l.push(y),m.append(y)}}for(let h of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){let t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}},Cs=1e3,tb=9,oi=new WeakSet;function Kt(i){return{width:i[2]-i[0],height:i[3]-i[1]}}var J1=class{static create(e){switch(e.data.annotationType){case Re.LINK:return new rc(e);case Re.TEXT:return new eu(e);case Re.WIDGET:switch(e.data.fieldType){case"Tx":return new tu(e);case"Btn":return e.data.radioButton?new oc(e):e.data.checkBox?new iu(e):new au(e);case"Ch":return new su(e);case"Sig":return new nu(e)}return new Jt(e);case Re.POPUP:return new Ms(e);case Re.FREETEXT:return new cc(e);case Re.LINE:return new ou(e);case Re.SQUARE:return new cu(e);case Re.CIRCLE:return new lu(e);case Re.POLYLINE:return new lc(e);case Re.CARET:return new hu(e);case Re.INK:return new ws(e);case Re.POLYGON:return new du(e);case Re.HIGHLIGHT:return new dc(e);case Re.UNDERLINE:return new uu(e);case Re.SQUIGGLY:return new pu(e);case Re.STRIKEOUT:return new fu(e);case Re.STAMP:return new hc(e);case Re.FILEATTACHMENT:return new gu(e);default:return new Se(e)}}},Se=class i{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e?.str||t?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return i._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};let{rect:t}=e;t&&this.#i(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(e){let{container:{style:t},data:{rect:n,rotation:a},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:c}}}}=this;n?.splice(0,4,...e);let{width:l,height:d}=Kt(e);t.left=`${100*(e[0]-o)/s}%`,t.top=`${100*(r-e[3]+c)/r}%`,a===0?(t.width=`${100*l/s}%`,t.height=`${100*d/r}%`):this.setRotation(a)}_createContainer(e){let{data:t,parent:{page:n,viewport:a}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof Jt||(s.tabIndex=Cs);let{style:r}=s;if(r.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof Ms){let{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,s),s}let{width:o,height:c}=Kt(t.rect);if(!e&&t.borderStyle.width>0){r.borderWidth=`${t.borderStyle.width}px`;let g=t.borderStyle.horizontalCornerRadius,m=t.borderStyle.verticalCornerRadius;if(g>0||m>0){let v=`calc(${g}px * var(--scale-factor)) / calc(${m}px * var(--scale-factor))`;r.borderRadius=v}else if(this instanceof oc){let v=`calc(${o}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;r.borderRadius=v}switch(t.borderStyle.style){case as.SOLID:r.borderStyle="solid";break;case as.DASHED:r.borderStyle="dashed";break;case as.BEVELED:z("Unimplemented border style: beveled");break;case as.INSET:z("Unimplemented border style: inset");break;case as.UNDERLINE:r.borderBottomStyle="solid";break;default:break}let y=t.borderColor||null;y?(this.#t=!0,r.borderColor=T.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):r.borderWidth=0}let l=T.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:d,pageHeight:h,pageX:u,pageY:p}=a.rawDims;r.left=`${100*(l[0]-u)/d}%`,r.top=`${100*(l[1]-p)/h}%`;let{rotation:f}=t;return t.hasOwnCanvas||f===0?(r.width=`${100*o/d}%`,r.height=`${100*c/h}%`):this.setRotation(f,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;let{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims,{width:s,height:r}=Kt(this.data.rect),o,c;e%180===0?(o=100*s/n,c=100*r/a):(o=100*r/n,c=100*s/a),t.style.width=`${o}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){let e=(t,n,a)=>{let s=a.detail[t],r=s[0],o=s.slice(1);a.target.style[n]=ac[`${r}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:ac[`${r}_rgb`](o)})};return Y(this,"_commonActions",{display:t=>{let{display:n}=t.detail,a=n%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{let{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{let n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){let n=this._commonActions;for(let a of Object.keys(t.detail))(e[a]||n[a])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let n=this._commonActions;for(let[a,s]of Object.entries(t)){let r=n[a];if(r){let o={detail:{[a]:s},target:e};r(o),delete t[a]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:e}=this.data;if(!e)return;let[t,n,a,s]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){let[g,m,y,v]=e.subarray(2,6);if(a===g&&s===m&&t===y&&n===v)return}let{style:r}=this.container,o;if(this.#t){let{borderColor:g,borderWidth:m}=r;r.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${m}">`],this.container.classList.add("hasBorder")}let c=a-t,l=s-n,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);let u=d.createElement("defs");h.append(u);let p=d.createElement("clipPath"),f=`clippath_${this.data.id}`;p.setAttribute("id",f),p.setAttribute("clipPathUnits","objectBoundingBox"),u.append(p);for(let g=2,m=e.length;g<m;g+=8){let y=e[g],v=e[g+1],M=e[g+2],k=e[g+3],C=d.createElement("rect"),b=(M-t)/c,I=(s-v)/l,E=(y-M)/c,w=(v-k)/l;C.setAttribute("x",b),C.setAttribute("y",I),C.setAttribute("width",E),C.setAttribute("height",w),p.append(C),o?.push(`<rect vector-effect="non-scaling-stroke" x="${b}" y="${I}" width="${E}" height="${w}"/>`)}this.#t&&(o.push("</g></svg>')"),r.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${f})`}_createPopup(){let{data:e}=this,t=this.#n=new Ms({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){he("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){let n=[];if(this._fieldObjects){let a=this._fieldObjects[e];if(a)for(let{page:s,id:r,exportValues:o}of a){if(s===-1||r===t)continue;let c=typeof o=="string"?o:null,l=document.querySelector(`[data-element-id="${r}"]`);if(l&&!oi.has(l)){z(`_getElementsByName - element not allowed: ${r}`);continue}n.push({id:r,exportValue:c,domElement:l})}return n}for(let a of document.getElementsByName(e)){let{exportValue:s}=a,r=a.getAttribute("data-element-id");r!==t&&oi.has(a)&&n.push({id:r,exportValue:s,domElement:a})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}},rc=class extends Se{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){let{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let a=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),a=!0):e.action?(this._bindNamedAction(n,e.action),a=!0):e.attachment?(this.#t(n,e.attachment,e.attachmentDest),a=!0):e.setOCGState?(this.#n(n,e.setOCGState),a=!0):e.dest?(this._bindLink(n,e.dest),a=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),a=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(n,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(n),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,n=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,n),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");let n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let a of Object.keys(t.actions)){let s=n.get(a);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:a}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){let n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){z('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();let{fields:a,refs:s,include:r}=t,o=[];if(a.length!==0||s.length!==0){let d=new Set(s);for(let h of a){let u=this._fieldObjects[h]||[];for(let{id:p}of u)d.add(p)}for(let h of Object.values(this._fieldObjects))for(let u of h)d.has(u.id)===r&&o.push(u)}else for(let d of Object.values(this._fieldObjects))o.push(...d);let c=this.annotationStorage,l=[];for(let d of o){let{id:h}=d;switch(l.push(h),d.type){case"text":{let p=d.defaultValue||"";c.setValue(h,{value:p});break}case"checkbox":case"radiobutton":{let p=d.defaultValue===d.exportValues;c.setValue(h,{value:p});break}case"combobox":case"listbox":{let p=d.defaultValue||"";c.setValue(h,{value:p});break}default:continue}let u=document.querySelector(`[data-element-id="${h}"]`);if(u){if(!oi.has(u)){z(`_bindResetFormAction - element not allowed: ${h}`);continue}}else continue;u.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}}),!1}}},eu=class extends Se{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}},Jt=class extends Se{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return He.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,a,s){n.includes("mouse")?e.addEventListener(n,r=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:s(r),shift:r.shiftKey,modifier:this._getKeyModifier(r)}})}):e.addEventListener(n,r=>{if(n==="blur"){if(!t.focused||!r.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:s(r)}})})}_setEventListeners(e,t,n,a){for(let[s,r]of n)(r==="Action"||this.data.actions?.[r])&&((r==="Focus"||r==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,s,r,a),r==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):r==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":T.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||tb,s=e.style,r,o=2,c=l=>Math.round(10*l)/10;if(this.data.multiLine){let l=Math.abs(this.data.rect[3]-this.data.rect[1]-o),d=Math.round(l/(Fo*a))||1,h=l/d;r=Math.min(a,c(h/Fo))}else{let l=Math.abs(this.data.rect[3]-this.data.rect[1]-o);r=Math.min(a,c(l/Fo))}s.fontSize=`calc(${r}px * var(--scale-factor))`,s.color=T.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}},tu=class extends Jt{constructor(e){let t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,a){let s=this.annotationStorage;for(let r of this._getElementsByName(e.name,e.id))r.domElement&&(r.domElement[t]=n),s.setValue(r.id,{[a]:n})}render(){let e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){let a=e.getValue(t,{value:this.data.fieldValue}),s=a.value||"",r=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;r&&s.length>r&&(s=s.slice(0,r));let o=a.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));let c={userValue:s,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=o??s,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",o??s),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),oi.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Cs,this._setRequired(n,this.data.required),r&&(n.maxLength=r),n.addEventListener("input",d=>{e.setValue(t,{value:d.target.value}),this.setPropertyOnSiblings(n,"value",d.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",d=>{let h=this.data.defaultFieldValue??"";n.value=c.userValue=h,c.formattedValue=null});let l=d=>{let{formattedValue:h}=c;h!=null&&(d.target.value=h),d.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",h=>{if(c.focused)return;let{target:u}=h;c.userValue&&(u.value=c.userValue),c.lastCommittedValue=u.value,c.commitKey=1,this.data.actions?.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",h=>{this.showElementAndHideCanvas(h.target);let u={value(p){c.userValue=p.detail.value??"",e.setValue(t,{value:c.userValue.toString()}),p.target.value=c.userValue},formattedValue(p){let{formattedValue:f}=p.detail;c.formattedValue=f,f!=null&&p.target!==document.activeElement&&(p.target.value=f),e.setValue(t,{formattedValue:f})},selRange(p){p.target.setSelectionRange(...p.detail.selRange)},charLimit:p=>{let{charLimit:f}=p.detail,{target:g}=p;if(f===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",f);let m=c.userValue;!m||m.length<=f||(m=m.slice(0,f),g.value=c.userValue=m,e.setValue(t,{value:m}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(u,h)}),n.addEventListener("keydown",h=>{c.commitKey=1;let u=-1;if(h.key==="Escape"?u=0:h.key==="Enter"&&!this.data.multiLine?u=2:h.key==="Tab"&&(c.commitKey=3),u===-1)return;let{value:p}=h.target;c.lastCommittedValue!==p&&(c.lastCommittedValue=p,c.userValue=p,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,willCommit:!0,commitKey:u,selStart:h.target.selectionStart,selEnd:h.target.selectionEnd}}))});let d=l;l=null,n.addEventListener("blur",h=>{if(!c.focused||!h.relatedTarget)return;this.data.actions?.Blur||(c.focused=!1);let{value:u}=h.target;c.userValue=u,c.lastCommittedValue!==u&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,willCommit:!0,commitKey:c.commitKey,selStart:h.target.selectionStart,selEnd:h.target.selectionEnd}}),d(h)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",h=>{c.lastCommittedValue=null;let{data:u,target:p}=h,{value:f,selectionStart:g,selectionEnd:m}=p,y=g,v=m;switch(h.inputType){case"deleteWordBackward":{let M=f.substring(0,g).match(/\w*[^\w]*$/);M&&(y-=M[0].length);break}case"deleteWordForward":{let M=f.substring(g).match(/^[^\w]*\w*/);M&&(v+=M[0].length);break}case"deleteContentBackward":g===m&&(y-=1);break;case"deleteContentForward":g===m&&(v+=1);break}h.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:f,change:u||"",willCommit:!1,selStart:y,selEnd:v}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.value)}if(l&&n.addEventListener("blur",l),this.data.comb){let h=(this.data.rect[2]-this.data.rect[0])/r;n.classList.add("comb"),n.style.letterSpacing=`calc(${h}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},nu=class extends Jt{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}},iu=class extends Jt{constructor(e){super(e,{isRenderable:e.renderForms})}render(){let e=this.annotationStorage,t=this.data,n=t.id,a=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",e.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let s=document.createElement("input");return oi.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,a&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=Cs,s.addEventListener("change",r=>{let{name:o,checked:c}=r.target;for(let l of this._getElementsByName(o,n)){let d=c&&l.exportValue===t.exportValue;l.domElement&&(l.domElement.checked=d),e.setValue(l.id,{value:d})}e.setValue(n,{value:c})}),s.addEventListener("resetform",r=>{let o=t.defaultFieldValue||"Off";r.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",r=>{let o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,r)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],r=>r.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},oc=class extends Jt{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let e=this.annotationStorage,t=this.data,n=t.id,a=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof a=="string"&&(a=a!==t.buttonValue,e.setValue(n,{value:a})),a)for(let r of this._getElementsByName(t.fieldName,n))e.setValue(r.id,{value:!1});let s=document.createElement("input");if(oi.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,a&&s.setAttribute("checked",!0),s.tabIndex=Cs,s.addEventListener("change",r=>{let{name:o,checked:c}=r.target;for(let l of this._getElementsByName(o,n))e.setValue(l.id,{value:!1});e.setValue(n,{value:c})}),s.addEventListener("resetform",r=>{let o=t.defaultFieldValue;r.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){let r=t.buttonValue;s.addEventListener("updatefromsandbox",o=>{let c={value:l=>{let d=r===l.detail.value;for(let h of this._getElementsByName(l.target.name)){let u=d&&h.id===n;h.domElement&&(h.domElement.checked=u),e.setValue(h.id,{value:u})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},au=class extends rc{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){let e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}},su=class extends Jt{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),a=document.createElement("select");oi.add(a),a.setAttribute("data-element-id",t),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=Cs;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",d=>{let h=this.data.defaultFieldValue;for(let u of a.options)u.selected=u.value===h});for(let d of this.data.options){let h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,n.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),s=!1),a.append(h)}let r=null;if(s){let d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),a.prepend(d),r=()=>{d.remove(),a.removeEventListener("input",r),r=null},a.addEventListener("input",r)}let o=d=>{let h=d?"value":"textContent",{options:u,multiple:p}=a;return p?Array.prototype.filter.call(u,f=>f.selected).map(f=>f[h]):u.selectedIndex===-1?null:u[u.selectedIndex][h]},c=o(!1),l=d=>{let h=d.target.options;return Array.prototype.map.call(h,u=>({displayValue:u.textContent,exportValue:u.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",d=>{let h={value(u){r?.();let p=u.detail.value,f=new Set(Array.isArray(p)?p:[p]);for(let g of a.options)g.selected=f.has(g.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(u){a.multiple=!0},remove(u){let p=a.options,f=u.detail.remove;p[f].selected=!1,a.remove(f),p.length>0&&Array.prototype.findIndex.call(p,m=>m.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:o(!0),items:l(u)}),c=o(!1)},clear(u){for(;a.length!==0;)a.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(u){let{index:p,displayValue:f,exportValue:g}=u.detail.insert,m=a.children[p],y=document.createElement("option");y.textContent=f,y.value=g,m?m.before(y):a.append(y),e.setValue(t,{value:o(!0),items:l(u)}),c=o(!1)},items(u){let{items:p}=u.detail;for(;a.length!==0;)a.remove(0);for(let f of p){let{displayValue:g,exportValue:m}=f,y=document.createElement("option");y.textContent=g,y.value=m,a.append(y)}a.options.length>0&&(a.options[0].selected=!0),e.setValue(t,{value:o(!0),items:l(u)}),c=o(!1)},indices(u){let p=new Set(u.detail.indices);for(let f of u.target.options)f.selected=p.has(f.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(u){u.target.disabled=!u.detail.editable}};this._dispatchEventFromSandbox(h,d)}),a.addEventListener("input",d=>{let h=o(!0),u=o(!1);e.setValue(t,{value:h}),d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:u,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):a.addEventListener("input",function(d){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}},Ms=class extends Se{constructor(e){let{data:t,elements:n}=e;super(e,{isRenderable:Se._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");let e=this.popup=new ru({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(let n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${xu}${n}`).join(",")),this.container}},ru=class{#e=this.#_.bind(this);#t=this.#A.bind(this);#n=this.#E.bind(this);#i=this.#x.bind(this);#a=null;#s=null;#c=null;#l=null;#d=null;#o=null;#h=null;#r=!1;#u=null;#f=null;#p=null;#g=null;#m=null;#y=null;#k=!1;constructor({container:e,color:t,elements:n,titleObj:a,modificationDate:s,contentsObj:r,richText:o,parent:c,rect:l,parentRect:d,open:h}){this.#s=e,this.#m=a,this.#c=r,this.#g=o,this.#o=c,this.#a=t,this.#p=l,this.#h=d,this.#d=n,this.#l=zo.toDateObject(s),this.trigger=n.flatMap(u=>u.getElementsToTriggerPopup());for(let u of this.trigger)u.addEventListener("click",this.#i),u.addEventListener("mouseenter",this.#n),u.addEventListener("mouseleave",this.#t),u.classList.add("popupTriggerArea");for(let u of n)u.container?.addEventListener("keydown",this.#e);this.#s.hidden=!0,h&&this.#x()}render(){if(this.#u)return;let e=this.#u=document.createElement("div");if(e.className="popup",this.#a){let s=e.style.outlineColor=T.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=T.makeHexColor(...this.#a.map(o=>Math.floor(.7*(255-o)+o)))}let t=document.createElement("span");t.className="header";let n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=this.#m,e.append(t),this.#l){let s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#l.valueOf()})),t.append(s)}let a=this.#M;if(a)sc.render({xfaHtml:a,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{let s=this._formatContents(this.#c);e.append(s)}this.#s.append(e)}get#M(){let e=this.#g,t=this.#c;return e?.str&&(!t?.str||t.str===e.str)&&this.#g.html||null}get#C(){return this.#M?.attributes?.style?.fontSize||0}get#w(){return this.#M?.attributes?.style?.color||null}#b(e){let t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},a={style:{color:this.#w,fontSize:this.#C?`calc(${this.#C}px * var(--scale-factor))`:""}};for(let s of e.split(`
`))t.push({name:"span",value:s,attributes:a});return n}_formatContents({str:e,dir:t}){let n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;let a=e.split(/(?:\r\n?|\n)/);for(let s=0,r=a.length;s<r;++s){let o=a[s];n.append(document.createTextNode(o)),s<r-1&&n.append(document.createElement("br"))}return n}#_(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#r)&&this.#x()}updateEdited({rect:e,popupContent:t}){this.#y||={contentsObj:this.#c,richText:this.#g},e&&(this.#f=null),t&&(this.#g=this.#b(t),this.#c=null),this.#u?.remove(),this.#u=null}resetEdited(){this.#y&&({contentsObj:this.#c,richText:this.#g}=this.#y,this.#y=null,this.#u?.remove(),this.#u=null,this.#f=null)}#S(){if(this.#f!==null)return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:a,pageY:s}}}=this.#o,r=!!this.#h,o=r?this.#h:this.#p;for(let f of this.#d)if(!o||T.intersect(f.data.rect,o)!==null){o=f.data.rect,r=!0;break}let c=T.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),d=r?o[2]-o[0]+5:0,h=c[0]+d,u=c[1];this.#f=[100*(h-a)/t,100*(u-s)/n];let{style:p}=this.#s;p.left=`${this.#f[0]}%`,p.top=`${this.#f[1]}%`}#x(){this.#r=!this.#r,this.#r?(this.#E(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#e)):(this.#A(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#e))}#E(){this.#u||this.render(),this.isVisible?this.#r&&this.#s.classList.add("focused"):(this.#S(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#A(){this.#s.classList.remove("focused"),!(this.#r||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#k=this.isVisible,this.#k&&(this.#s.hidden=!0)}maybeShow(){this.#k&&(this.#u||this.#E(),this.#k=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}},cc=class extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=B.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(let t of this.textContent){let n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},ou=class extends Se{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let e=this.data,{width:t,height:n}=Kt(e.rect),a=this.svgFactory.create(t,n,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),a.append(s),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},cu=class extends Se{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let e=this.data,{width:t,height:n}=Kt(e.rect),a=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,r=this.#e=this.svgFactory.createElement("svg:rect");return r.setAttribute("x",s/2),r.setAttribute("y",s/2),r.setAttribute("width",t-s),r.setAttribute("height",n-s),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),a.append(r),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},lu=class extends Se{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let e=this.data,{width:t,height:n}=Kt(e.rect),a=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,r=this.#e=this.svgFactory.createElement("svg:ellipse");return r.setAttribute("cx",t/2),r.setAttribute("cy",n/2),r.setAttribute("rx",t/2-s/2),r.setAttribute("ry",n/2-s/2),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),a.append(r),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},lc=class extends Se{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,vertices:t,borderStyle:n,popupRef:a}}=this;if(!t)return this.container;let{width:s,height:r}=Kt(e),o=this.svgFactory.create(s,r,!0),c=[];for(let d=0,h=t.length;d<h;d+=2){let u=t[d]-e[0],p=e[3]-t[d+1];c.push(`${u},${p}`)}c=c.join(" ");let l=this.#e=this.svgFactory.createElement(this.svgElementName);return l.setAttribute("points",c),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),o.append(l),this.container.append(o),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},du=class extends lc{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},hu=class extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},ws=class extends Se{#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?B.HIGHLIGHT:B.INK}render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,inkLists:t,borderStyle:n,popupRef:a}}=this,{width:s,height:r}=Kt(e),o=this.svgFactory.create(s,r,!0);for(let c of t){let l=[];for(let h=0,u=c.length;h<u;h+=2){let p=c[h]-e[0],f=e[3]-c[h+1];l.push(`${p},${f}`)}l=l.join(" ");let d=this.svgFactory.createElement(this.svgElementName);this.#e.push(d),d.setAttribute("points",l),d.setAttribute("stroke-width",n.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(o),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},dc=class extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=B.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}},uu=class extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}},pu=class extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}},fu=class extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}},hc=class extends Se{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=B.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},gu=class extends Se{#e=null;constructor(e){super(e,{isRenderable:!0});let{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",D({source:this},t))}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:e,data:t}=this,n;t.hasAppearance||t.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#t.bind(this)),this.#e=n;let{isMac:a}=He.platform;return e.addEventListener("keydown",s=>{s.key==="Enter"&&(a?s.metaKey:s.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},yu=class{#e=null;#t=null;#n=new Map;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:a,page:s,viewport:r,structTreeLayer:o}){this.div=e,this.#e=t,this.#t=n,this.#i=o||null,this.page=s,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return this.#n.size>0}#a(e,t){return A(this,null,function*(){let n=e.firstChild||e,a=n.id=`${xu}${t}`,s=yield this.#i?.getAriaAttributes(a);if(s)for(let[r,o]of s)n.setAttribute(r,o);this.div.append(e),this.#e?.moveElementInDOM(this.div,e,n,!1)})}render(e){return A(this,null,function*(){let{annotations:t}=e,n=this.div;si(n,this.viewport);let a=new Map,s={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new vs,annotationStorage:e.annotationStorage||new gs,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let r of t){if(r.noHTML)continue;let o=r.annotationType===Re.POPUP;if(o){let d=a.get(r.id);if(!d)continue;s.elements=d}else{let{width:d,height:h}=Kt(r.rect);if(d<=0||h<=0)continue}s.data=r;let c=J1.create(s);if(!c.isRenderable)continue;if(!o&&r.popupRef){let d=a.get(r.popupRef);d?d.push(c):a.set(r.popupRef,[c])}let l=c.render();r.hidden&&(l.style.visibility="hidden"),yield this.#a(l,r.id),c._isEditable&&(this.#n.set(c.data.id,c),this._annotationEditorUIManager?.renderAnnotationElement(c))}this.#s()})}update({viewport:e}){let t=this.div;this.viewport=e,si(t,{rotation:e.rotation}),this.#s(),t.hidden=!1}#s(){if(!this.#t)return;let e=this.div;for(let[t,n]of this.#t){let a=e.querySelector(`[data-annotation-id="${t}"]`);if(!a)continue;n.className="annotationContent";let{firstChild:s}=a;s?s.nodeName==="CANVAS"?s.replaceWith(n):s.classList.contains("annotationContent")?s.after(n):s.before(n):a.append(n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}},Oo=/\r\n?|\n/g,mu=class i extends ae{#e;#t="";#n=`${this.id}-editor`;#i=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let e=i.prototype,t=s=>s.isEmpty(),n=fs.TRANSLATE_SMALL,a=fs.TRANSLATE_BIG;return Y(this,"_keyboardManager",new ri([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,a],checker:t}]]))}static _type="freetext";static _editorType=B.FREETEXT;constructor(e){super(re(D({},e),{name:"freeTextEditor"})),this.#e=e.color||i._defaultColor||ae._defaultLineColor,this.#a=e.fontSize||i._defaultFontSize}static initialize(e,t){ae.initialize(e,t);let n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case N.FREETEXT_SIZE:i._defaultFontSize=t;break;case N.FREETEXT_COLOR:i._defaultColor=t;break}}updateParams(e,t){switch(e){case N.FREETEXT_SIZE:this.#s(t);break;case N.FREETEXT_COLOR:this.#c(t);break}}static get defaultPropertiesToUpdate(){return[[N.FREETEXT_SIZE,i._defaultFontSize],[N.FREETEXT_COLOR,i._defaultColor||ae._defaultLineColor]]}get propertiesToUpdate(){return[[N.FREETEXT_SIZE,this.#a],[N.FREETEXT_COLOR,this.#e]]}#s(e){let t=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-this.#a)*this.parentScale),this.#a=a,this.#d()},n=this.#a;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:N.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#c(e){let t=a=>{this.#e=this.editorDiv.style.color=a},n=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:N.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){let e=this.parentScale;return[-i._internalPadding*e,-(i._internalPadding+this.#a)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(B.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;let e=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#l(){let e=[];this.editorDiv.normalize();let t=null;for(let n of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(e.push(i.#o(n)),t=n);return e.join(`
`)}#d(){let[e,t]=this.parentDimensions,n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{let{currentLayer:a,div:s}=this,r=s.style.display,o=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",a.div.append(this.div),n=s.getBoundingClientRect(),s.remove(),s.style.display=r,s.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let e=this.#t,t=this.#t=this.#l().trimEnd();if(e===t)return;let n=a=>{if(this.#t=a,!a){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){i._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#a}px * var(--scale-factor))`,n.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),qo(this,this.div,["dblclick","keydown"]),this.width){let[a,s]=this.parentDimensions;if(this.annotationElementId){let{position:r}=this._initialData,[o,c]=this.getInitialTranslation();[o,c]=this.pageTranslationToScreen(o,c);let[l,d]=this.pageDimensions,[h,u]=this.pageTranslation,p,f;switch(this.rotation){case 0:p=e+(r[0]-h)/l,f=t+this.height-(r[1]-u)/d;break;case 90:p=e+(r[0]-h)/l,f=t-(r[1]-u)/d,[o,c]=[c,-o];break;case 180:p=e-this.width+(r[0]-h)/l,f=t-(r[1]-u)/d,[o,c]=[-o,-c];break;case 270:p=e+(r[0]-h-this.height*d)/l,f=t+(r[1]-u-this.width*l)/d,[o,c]=[-c,o];break}this.setAt(p*a,f*s,o,c)}else this.setAt(e*a,t*s,this.width*a,this.height*s);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#o(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Oo,"")}editorDivPaste(e){let t=e.clipboardData||window.clipboardData,{types:n}=t;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();let a=i.#u(t.getData("text")||"").replaceAll(Oo,`
`);if(!a)return;let s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();let r=s.getRangeAt(0);if(!a.includes(`
`)){r.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),s.collapseToStart();return}let{startContainer:o,startOffset:c}=r,l=[],d=[];if(o.nodeType===Node.TEXT_NODE){let p=o.parentElement;if(d.push(o.nodeValue.slice(c).replaceAll(Oo,"")),p!==this.editorDiv){let f=l;for(let g of this.editorDiv.childNodes){if(g===p){f=d;continue}f.push(i.#o(g))}}l.push(o.nodeValue.slice(0,c).replaceAll(Oo,""))}else if(o===this.editorDiv){let p=l,f=0;for(let g of this.editorDiv.childNodes)f++===c&&(p=d),p.push(i.#o(g))}this.#t=`${l.join(`
`)}${a}${d.join(`
`)}`,this.#h();let h=new Range,u=l.reduce((p,f)=>p+f.length,0);for(let{firstChild:p}of this.editorDiv.childNodes)if(p.nodeType===Node.TEXT_NODE){let f=p.nodeValue.length;if(u<=f){h.setStart(p,u),h.setEnd(p,u);break}u-=f}s.removeAllRanges(),s.addRange(h)}#h(){if(this.editorDiv.replaceChildren(),!!this.#t)for(let e of this.#t.split(`
`)){let t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#r(){return this.#t.replaceAll("\xA0"," ")}static#u(e){return e.replaceAll(" ","\xA0")}get contentDiv(){return this.editorDiv}static deserialize(e,t,n){return A(this,null,function*(){let a=null;if(e instanceof cc){let{data:{defaultAppearanceData:{fontSize:r,fontColor:o},rect:c,rotation:l,id:d,popupRef:h},textContent:u,textPosition:p,parent:{page:{pageNumber:f}}}=e;if(!u||u.length===0)return null;a=e={annotationType:B.FREETEXT,color:Array.from(o),fontSize:r,value:u.join(`
`),position:p,pageIndex:f-1,rect:c.slice(0),rotation:l,id:d,deleted:!1,popupRef:h}}let s=yield pi(i,this,"deserialize").call(this,e,t,n);return s.#a=e.fontSize,s.#e=T.makeHexColor(...e.color),s.#t=i.#u(e.value),s.annotationElementId=e.id||null,s._initialData=a,s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let t=i._internalPadding*this.parentScale,n=this.getRect(t,t),a=ae._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),s={annotationType:B.FREETEXT,color:a,fontSize:this.#a,value:this.#r(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?s:this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(e){let{value:t,fontSize:n,color:a,pageIndex:s}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((r,o)=>r!==a[o])||e.pageIndex!==s}renderAnnotationElement(e){let t=super.renderAnnotationElement(e);if(this.deleted)return t;let{style:n}=t;n.fontSize=`calc(${this.#a}px * var(--scale-factor))`,n.color=this.#e,t.replaceChildren();for(let s of this.#t.split(`
`)){let r=document.createElement("div");r.append(s?document.createTextNode(s):document.createElement("br")),t.append(r)}let a=i._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(a,a),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}},uc=class{toSVGPath(){he("Abstract method `toSVGPath` must be implemented.")}get box(){he("Abstract getter `box` must be implemented.")}serialize(e,t){he("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){he("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){he("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}},pc=class i{#e;#t=[];#n;#i;#a=[];#s=new Float64Array(18);#c;#l;#d;#o;#h;#r;#u=[];static#f=8;static#p=2;static#g=i.#f+i.#p;constructor({x:e,y:t},n,a,s,r,o=0){this.#e=n,this.#r=s*a,this.#i=r,this.#s.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=o,this.#o=i.#f*a,this.#d=i.#g*a,this.#h=a,this.#u.push(e,t)}isEmpty(){return isNaN(this.#s[8])}#m(){let e=this.#s.subarray(4,6),t=this.#s.subarray(16,18),[n,a,s,r]=this.#e;return[(this.#c+(e[0]-t[0])/2-n)/s,(this.#l+(e[1]-t[1])/2-a)/r,(this.#c+(t[0]-e[0])/2-n)/s,(this.#l+(t[1]-e[1])/2-a)/r]}add({x:e,y:t}){this.#c=e,this.#l=t;let[n,a,s,r]=this.#e,[o,c,l,d]=this.#s.subarray(8,12),h=e-l,u=t-d,p=Math.hypot(h,u);if(p<this.#d)return!1;let f=p-this.#o,g=f/p,m=g*h,y=g*u,v=o,M=c;o=l,c=d,l+=m,d+=y,this.#u?.push(e,t);let k=-y/f,C=m/f,b=k*this.#r,I=C*this.#r;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([l+b,d+I],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([l-b,d-I],16),isNaN(this.#s[6])?(this.#a.length===0&&(this.#s.set([o+b,c+I],2),this.#a.push(NaN,NaN,NaN,NaN,(o+b-n)/s,(c+I-a)/r),this.#s.set([o-b,c-I],14),this.#t.push(NaN,NaN,NaN,NaN,(o-b-n)/s,(c-I-a)/r)),this.#s.set([v,M,o,c,l,d],6),!this.isEmpty()):(this.#s.set([v,M,o,c,l,d],6),Math.abs(Math.atan2(M-c,v-o)-Math.atan2(y,m))<Math.PI/2?([o,c,l,d]=this.#s.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((o+l)/2-n)/s,((c+d)/2-a)/r),[o,c,v,M]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((v+o)/2-n)/s,((M+c)/2-a)/r),!0):([v,M,o,c,l,d]=this.#s.subarray(0,6),this.#a.push(((v+5*o)/6-n)/s,((M+5*c)/6-a)/r,((5*o+l)/6-n)/s,((5*c+d)/6-a)/r,((o+l)/2-n)/s,((c+d)/2-a)/r),[l,d,o,c,v,M]=this.#s.subarray(12,18),this.#t.push(((v+5*o)/6-n)/s,((M+5*c)/6-a)/r,((5*o+l)/6-n)/s,((5*c+d)/6-a)/r,((o+l)/2-n)/s,((c+d)/2-a)/r),!0))}toSVGPath(){if(this.isEmpty())return"";let e=this.#a,t=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();let n=[];n.push(`M${e[4]} ${e[5]}`);for(let a=6;a<e.length;a+=6)isNaN(e[a])?n.push(`L${e[a+4]} ${e[a+5]}`):n.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);this.#M(n);for(let a=t.length-6;a>=6;a-=6)isNaN(t[a])?n.push(`L${t[a+4]} ${t[a+5]}`):n.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);return this.#k(n),n.join(" ")}#y(){let[e,t,n,a]=this.#e,[s,r,o,c]=this.#m();return`M${(this.#s[2]-e)/n} ${(this.#s[3]-t)/a} L${(this.#s[4]-e)/n} ${(this.#s[5]-t)/a} L${s} ${r} L${o} ${c} L${(this.#s[16]-e)/n} ${(this.#s[17]-t)/a} L${(this.#s[14]-e)/n} ${(this.#s[15]-t)/a} Z`}#k(e){let t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#M(e){let[t,n,a,s]=this.#e,r=this.#s.subarray(4,6),o=this.#s.subarray(16,18),[c,l,d,h]=this.#m();e.push(`L${(r[0]-t)/a} ${(r[1]-n)/s} L${c} ${l} L${d} ${h} L${(o[0]-t)/a} ${(o[1]-n)/s}`)}newFreeDrawOutline(e,t,n,a,s,r){return new fc(e,t,n,a,s,r)}getOutlines(){let e=this.#a,t=this.#t,n=this.#s,[a,s,r,o]=this.#e,c=new Float64Array((this.#u?.length??0)+2);for(let h=0,u=c.length-2;h<u;h+=2)c[h]=(this.#u[h]-a)/r,c[h+1]=(this.#u[h+1]-s)/o;if(c[c.length-2]=(this.#c-a)/r,c[c.length-1]=(this.#l-s)/o,isNaN(n[6])&&!this.isEmpty())return this.#C(c);let l=new Float64Array(this.#a.length+24+this.#t.length),d=e.length;for(let h=0;h<d;h+=2){if(isNaN(e[h])){l[h]=l[h+1]=NaN;continue}l[h]=e[h],l[h+1]=e[h+1]}d=this.#b(l,d);for(let h=t.length-6;h>=6;h-=6)for(let u=0;u<6;u+=2){if(isNaN(t[h+u])){l[d]=l[d+1]=NaN,d+=2;continue}l[d]=t[h+u],l[d+1]=t[h+u+1],d+=2}return this.#w(l,d),this.newFreeDrawOutline(l,c,this.#e,this.#h,this.#n,this.#i)}#C(e){let t=this.#s,[n,a,s,r]=this.#e,[o,c,l,d]=this.#m(),h=new Float64Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-n)/s,(t[3]-a)/r,NaN,NaN,NaN,NaN,(t[4]-n)/s,(t[5]-a)/r,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,l,d,NaN,NaN,NaN,NaN,(t[16]-n)/s,(t[17]-a)/r,NaN,NaN,NaN,NaN,(t[14]-n)/s,(t[15]-a)/r],0),this.newFreeDrawOutline(h,e,this.#e,this.#h,this.#n,this.#i)}#w(e,t){let n=this.#t;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6}#b(e,t){let n=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[s,r,o,c]=this.#e,[l,d,h,u]=this.#m();return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/o,(n[1]-r)/c,NaN,NaN,NaN,NaN,l,d,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(a[0]-s)/o,(a[1]-r)/c],t),t+=24}},fc=class extends uc{#e;#t=null;#n;#i;#a;#s;#c;constructor(e,t,n,a,s,r){super(),this.#c=e,this.#a=t,this.#e=n,this.#s=a,this.#n=s,this.#i=r,this.#o(r);let{x:o,y:c,width:l,height:d}=this.#t;for(let h=0,u=e.length;h<u;h+=2)e[h]=(e[h]-o)/l,e[h+1]=(e[h+1]-c)/d;for(let h=0,u=t.length;h<u;h+=2)t[h]=(t[h]-o)/l,t[h+1]=(t[h+1]-c)/d}toSVGPath(){let e=[`M${this.#c[4]} ${this.#c[5]}`];for(let t=6,n=this.#c.length;t<n;t+=6){if(isNaN(this.#c[t])){e.push(`L${this.#c[t+4]} ${this.#c[t+5]}`);continue}e.push(`C${this.#c[t]} ${this.#c[t+1]} ${this.#c[t+2]} ${this.#c[t+3]} ${this.#c[t+4]} ${this.#c[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,a],s){let r=n-e,o=a-t,c,l;switch(s){case 0:c=this.#l(this.#c,e,a,r,-o),l=this.#l(this.#a,e,a,r,-o);break;case 90:c=this.#d(this.#c,e,t,r,o),l=this.#d(this.#a,e,t,r,o);break;case 180:c=this.#l(this.#c,n,t,-r,o),l=this.#l(this.#a,n,t,-r,o);break;case 270:c=this.#d(this.#c,n,a,-r,-o),l=this.#d(this.#a,n,a,-r,-o);break}return{outline:Array.from(c),points:[Array.from(l)]}}#l(e,t,n,a,s){let r=new Float64Array(e.length);for(let o=0,c=e.length;o<c;o+=2)r[o]=t+e[o]*a,r[o+1]=n+e[o+1]*s;return r}#d(e,t,n,a,s){let r=new Float64Array(e.length);for(let o=0,c=e.length;o<c;o+=2)r[o]=t+e[o+1]*a,r[o+1]=n+e[o]*s;return r}#o(e){let t=this.#c,n=t[4],a=t[5],s=n,r=a,o=n,c=a,l=n,d=a,h=e?Math.max:Math.min;for(let m=6,y=t.length;m<y;m+=6){if(isNaN(t[m]))s=Math.min(s,t[m+4]),r=Math.min(r,t[m+5]),o=Math.max(o,t[m+4]),c=Math.max(c,t[m+5]),d<t[m+5]?(l=t[m+4],d=t[m+5]):d===t[m+5]&&(l=h(l,t[m+4]));else{let v=T.bezierBoundingBox(n,a,...t.slice(m,m+6));s=Math.min(s,v[0]),r=Math.min(r,v[1]),o=Math.max(o,v[2]),c=Math.max(c,v[3]),d<v[3]?(l=v[2],d=v[3]):d===v[3]&&(l=h(l,v[2]))}n=t[m+4],a=t[m+5]}let u=s-this.#n,p=r-this.#n,f=o-s+2*this.#n,g=c-r+2*this.#n;this.#t={x:u,y:p,width:f,height:g,lastPoint:[l,d]}}get box(){return this.#t}newOutliner(e,t,n,a,s,r=0){return new pc(e,t,n,a,s,r)}getNewOutline(e,t){let{x:n,y:a,width:s,height:r}=this.#t,[o,c,l,d]=this.#e,h=s*l,u=r*d,p=n*l+o,f=a*d+c,g=this.newOutliner({x:this.#a[0]*h+p,y:this.#a[1]*u+f},this.#e,this.#s,e,this.#i,t??this.#n);for(let m=2;m<this.#a.length;m+=2)g.add({x:this.#a[m]*h+p,y:this.#a[m+1]*u+f});return g.getOutlines()}get mustRemoveSelfIntersections(){return!0}},gc=class{#e;#t=[];#n=[];constructor(e,t=0,n=0,a=!0){let s=1/0,r=-1/0,o=1/0,c=-1/0,d=10**-4;for(let{x:y,y:v,width:M,height:k}of e){let C=Math.floor((y-t)/d)*d,b=Math.ceil((y+M+t)/d)*d,I=Math.floor((v-t)/d)*d,E=Math.ceil((v+k+t)/d)*d,w=[C,I,E,!0],x=[b,I,E,!1];this.#t.push(w,x),s=Math.min(s,C),r=Math.max(r,b),o=Math.min(o,I),c=Math.max(c,E)}let h=r-s+2*n,u=c-o+2*n,p=s-n,f=o-n,g=this.#t.at(a?-1:-2),m=[g[0],g[2]];for(let y of this.#t){let[v,M,k]=y;y[0]=(v-p)/h,y[1]=(M-f)/u,y[2]=(k-f)/u}this.#e={x:p,y:f,width:h,height:u,lastPoint:m}}getOutlines(){this.#t.sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);let e=[];for(let t of this.#t)t[3]?(e.push(...this.#l(t)),this.#s(t)):(this.#c(t),e.push(...this.#l(t)));return this.#i(e)}#i(e){let t=[],n=new Set;for(let r of e){let[o,c,l]=r;t.push([o,c,r],[o,l,r])}t.sort((r,o)=>r[1]-o[1]||r[0]-o[0]);for(let r=0,o=t.length;r<o;r+=2){let c=t[r][2],l=t[r+1][2];c.push(l),l.push(c),n.add(c),n.add(l)}let a=[],s;for(;n.size>0;){let r=n.values().next().value,[o,c,l,d,h]=r;n.delete(r);let u=o,p=c;for(s=[o,l],a.push(s);;){let f;if(n.has(d))f=d;else if(n.has(h))f=h;else break;n.delete(f),[o,c,l,d,h]=f,u!==o&&(s.push(u,p,o,p===c?c:l),u=o),p=p===c?l:c}s.push(u,p)}return new ku(a,this.#e)}#a(e){let t=this.#n,n=0,a=t.length-1;for(;n<=a;){let s=n+a>>1,r=t[s][0];if(r===e)return s;r<e?n=s+1:a=s-1}return a+1}#s([,e,t]){let n=this.#a(e);this.#n.splice(n,0,[e,t])}#c([,e,t]){let n=this.#a(e);for(let a=n;a<this.#n.length;a++){let[s,r]=this.#n[a];if(s!==e)break;if(s===e&&r===t){this.#n.splice(a,1);return}}for(let a=n-1;a>=0;a--){let[s,r]=this.#n[a];if(s!==e)break;if(s===e&&r===t){this.#n.splice(a,1);return}}}#l(e){let[t,n,a]=e,s=[[t,n,a]],r=this.#a(a);for(let o=0;o<r;o++){let[c,l]=this.#n[o];for(let d=0,h=s.length;d<h;d++){let[,u,p]=s[d];if(!(l<=u||p<=c)){if(u>=c){if(p>l)s[d][1]=l;else{if(h===1)return[];s.splice(d,1),d--,h--}continue}s[d][2]=c,p>l&&s.push([t,l,p])}}}return s}},ku=class extends uc{#e;#t;constructor(e,t){super(),this.#t=e,this.#e=t}toSVGPath(){let e=[];for(let t of this.#t){let[n,a]=t;e.push(`M${n} ${a}`);for(let s=2;s<t.length;s+=2){let r=t[s],o=t[s+1];r===n?(e.push(`V${o}`),a=o):o===a&&(e.push(`H${r}`),n=r)}e.push("Z")}return e.join(" ")}serialize([e,t,n,a],s){let r=[],o=n-e,c=a-t;for(let l of this.#t){let d=new Array(l.length);for(let h=0;h<l.length;h+=2)d[h]=e+l[h]*o,d[h+1]=a-l[h+1]*c;r.push(d)}return r}get box(){return this.#e}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}},bs=class extends pc{newFreeDrawOutline(e,t,n,a,s,r){return new vu(e,t,n,a,s,r)}get classNamesForDrawing(){return["highlight","free"]}},vu=class extends fc{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,n,a,s,r=0){return new bs(e,t,n,a,s,r)}},yc=class i{#e=null;#t=null;#n;#i=null;#a=!1;#s=!1;#c=null;#l;#d=null;#o=null;#h;static#r=null;static get _keyboardManager(){return Y(this,"_keyboardManager",new ri([[["Escape","mac+Escape"],i.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],i.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],i.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],i.prototype._moveToPrevious],[["Home","mac+Home"],i.prototype._moveToBeginning],[["End","mac+End"],i.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#s=!1,this.#h=N.HIGHLIGHT_COLOR,this.#c=e):(this.#s=!0,this.#h=N.HIGHLIGHT_DEFAULT_COLOR),this.#o=e?._uiManager||t,this.#l=this.#o._eventBus,this.#n=e?.color||this.#o?.highlightColors.values().next().value||"#FFFF98",i.#r||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){let e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);let t=this.#o._signal;e.addEventListener("click",this.#g.bind(this),{signal:t}),e.addEventListener("keydown",this.#p.bind(this),{signal:t});let n=this.#t=document.createElement("span");return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=this.#n,e.append(n),e}renderMainDropdown(){let e=this.#i=this.#u();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#u(){let e=document.createElement("div"),t=this.#o._signal;e.addEventListener("contextmenu",yt,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(let[n,a]of this.#o.highlightColors){let s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",a),s.title=n,s.setAttribute("data-l10n-id",i.#r[n]);let r=document.createElement("span");s.append(r),r.className="swatch",r.style.backgroundColor=a,s.setAttribute("aria-selected",a===this.#n),s.addEventListener("click",this.#f.bind(this,a),{signal:t}),e.append(s)}return e.addEventListener("keydown",this.#p.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#l.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#g(e);return}let t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#y){this.#g(e);return}if(e.target===this.#e){this.#i.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#i?.firstChild||e.target===this.#e){this.#y&&this._hideDropdownFromKeyboard();return}this.#y||this.#g(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#y){this.#g(e);return}this.#i.firstChild?.focus()}_moveToEnd(e){if(!this.#y){this.#g(e);return}this.#i.lastChild?.focus()}#p(e){i._keyboardManager.exec(this,e)}#g(e){if(this.#y){this.hideDropdown();return}if(this.#a=e.detail===0,this.#d||(this.#d=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#o.combinedSignal(this.#d)})),this.#i){this.#i.classList.remove("hidden");return}let t=this.#i=this.#u();this.#e.append(t)}#m(e){this.#i?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#d?.abort(),this.#d=null}get#y(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#y){this.#c?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#i)return;let t=this.#o.highlightColors.values();for(let n of this.#i.children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#i?.remove(),this.#i=null}},mc=class i extends ae{#e=null;#t=0;#n;#i=null;#a=null;#s=null;#c=null;#l=0;#d=null;#o=null;#h=null;#r=!1;#u=null;#f;#p=null;#g="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=B.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){let e=i.prototype;return Y(this,"_keyboardManager",new ri([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(re(D({},e),{name:"highlightEditor"})),this.color=e.color||i._defaultColor,this.#m=e.thickness||i._defaultThickness,this.#f=e.opacity||i._defaultOpacity,this.#n=e.boxes||null,this.#y=e.methodOfCreation||"",this.#g=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#r=!0,this.#M(e),this.#S()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#c=e.focusNode,this.#l=e.focusOffset,this.#k(),this.#S(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#r?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#k(){let e=new gc(this.#n,.001);this.#o=e.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#o.box;let t=new gc(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=t.getOutlines();let{lastPoint:n}=this.#s.box;this.#u=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#M({highlightOutlines:e,highlightId:t,clipPathId:n}){this.#o=e;let a=1.5;if(this.#s=e.getNewOutline(this.#m/2+a,.0025),t>=0)this.#h=t,this.#i=n,this.parent.drawLayer.finalizeLine(t,e),this.#p=this.parent.drawLayer.drawOutline(this.#s);else if(this.parent){let d=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#h,e),this.parent.drawLayer.updateBox(this.#h,i.#x(this.#o.box,(d-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#p,this.#s),this.parent.drawLayer.updateBox(this.#p,i.#x(this.#s.box,d))}let{x:s,y:r,width:o,height:c}=e.box;switch(this.rotation){case 0:this.x=s,this.y=r,this.width=o,this.height=c;break;case 90:{let[d,h]=this.parentDimensions;this.x=r,this.y=1-s,this.width=o*h/d,this.height=c*d/h;break}case 180:this.x=1-s,this.y=1-r,this.width=o,this.height=c;break;case 270:{let[d,h]=this.parentDimensions;this.x=1-r,this.y=s,this.width=o*h/d,this.height=c*d/h;break}}let{lastPoint:l}=this.#s.box;this.#u=[(l[0]-s)/o,(l[1]-r)/c]}static initialize(e,t){ae.initialize(e,t),i._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case N.HIGHLIGHT_DEFAULT_COLOR:i._defaultColor=t;break;case N.HIGHLIGHT_THICKNESS:i._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#u}updateParams(e,t){switch(e){case N.HIGHLIGHT_COLOR:this.#C(t);break;case N.HIGHLIGHT_THICKNESS:this.#w(t);break}}static get defaultPropertiesToUpdate(){return[[N.HIGHLIGHT_DEFAULT_COLOR,i._defaultColor],[N.HIGHLIGHT_THICKNESS,i._defaultThickness]]}get propertiesToUpdate(){return[[N.HIGHLIGHT_COLOR,this.color||i._defaultColor],[N.HIGHLIGHT_THICKNESS,this.#m||i._defaultThickness],[N.HIGHLIGHT_FREE,this.#r]]}#C(e){let t=(s,r)=>{this.color=s,this.parent?.drawLayer.changeColor(this.#h,s),this.#a?.updateColor(s),this.#f=r,this.parent?.drawLayer.changeOpacity(this.#h,r)},n=this.color,a=this.#f;this.addCommands({cmd:t.bind(this,e,i._defaultOpacity),undo:t.bind(this,n,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:N.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#w(e){let t=this.#m,n=a=>{this.#m=a,this.#b(a)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:N.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}addEditToolbar(){return A(this,null,function*(){let e=yield pi(i.prototype,this,"addEditToolbar").call(this);return e?(this._uiManager.highlightColors&&(this.#a=new yc({editor:this}),e.addColorPicker(this.#a)),e):null})}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#D())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#_(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#_():e&&(this.#S(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#b(e){if(!this.#r)return;this.#M({highlightOutlines:this.#o.getNewOutline(e/2)}),this.fixAndSetPosition();let[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}#_(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#S(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#i}=e.drawLayer.draw(this.#o,this.color,this.#f),this.#p=e.drawLayer.drawOutline(this.#s),this.#d&&(this.#d.style.clipPath=this.#i))}static#x({x:e,y:t,width:n,height:a},s){switch(s){case 90:return{x:1-t-a,y:e,width:a,height:n};case 180:return{x:1-e-n,y:1-t-a,width:n,height:a};case 270:return{x:t,y:1-e-n,width:a,height:n}}return{x:e,y:t,width:n,height:a}}rotate(e){let{drawLayer:t}=this.parent,n;this.#r?(e=(e-this.rotation+360)%360,n=i.#x(this.#o.box,e)):n=i.#x(this,e),t.rotate(this.#h,e),t.rotate(this.#p,e),t.updateBox(this.#h,n),t.updateBox(this.#p,i.#x(this.#s.box,e))}render(){if(this.div)return this.div;let e=super.render();this.#g&&(e.setAttribute("aria-label",this.#g),e.setAttribute("role","mark")),this.#r?e.classList.add("free"):this.div.addEventListener("keydown",this.#E.bind(this),{signal:this._uiManager._signal});let t=this.#d=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#i;let[n,a]=this.parentDimensions;return this.setDims(this.width*n,this.height*a),qo(this,this.#d,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#p,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#p,"hovered")}#E(e){i._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#A(!0);break;case 1:case 3:this.#A(!1);break}}#A(e){if(!this.#e)return;let t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#c,this.#l)}select(){super.select(),this.#p&&(this.parent?.drawLayer.removeClass(this.#p,"hovered"),this.parent?.drawLayer.addClass(this.#p,"selected"))}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.removeClass(this.#p,"selected"),this.#r||this.#A(!1))}get _mustFixPosition(){return!this.#r}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(this.#h,e),this.parent.drawLayer.show(this.#p,e))}#D(){return this.#r?this.rotation:0}#P(){if(this.#r)return null;let[e,t]=this.pageDimensions,[n,a]=this.pageTranslation,s=this.#n,r=new Float32Array(s.length*8),o=0;for(let{x:c,y:l,width:d,height:h}of s){let u=c*e+n,p=(1-l-h)*t+a;r[o]=r[o+4]=u,r[o+1]=r[o+3]=p,r[o+2]=r[o+6]=u+d*e,r[o+5]=r[o+7]=p+h*t,o+=8}return r}#I(e){return this.#o.serialize(e,this.#D())}static startHighlighting(e,t,{target:n,x:a,y:s}){let{x:r,y:o,width:c,height:l}=n.getBoundingClientRect(),d=new AbortController,h=e.combinedSignal(d),u=f=>{f.preventDefault(),f.stopPropagation()},p=f=>{d.abort(),this.#L(e,f)};window.addEventListener("blur",p,{signal:h}),window.addEventListener("pointerup",p,{signal:h}),window.addEventListener("pointerdown",u,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",yt,{signal:h}),n.addEventListener("pointermove",this.#v.bind(this,e),{signal:h}),this._freeHighlight=new bs({x:a,y:s},[r,o,c,l],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static#v(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#L(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(e,t,n){return A(this,null,function*(){let a=null;if(e instanceof dc){let{data:{quadPoints:f,rect:g,rotation:m,id:y,color:v,opacity:M,popupRef:k},parent:{page:{pageNumber:C}}}=e;a=e={annotationType:B.HIGHLIGHT,color:Array.from(v),opacity:M,quadPoints:f,boxes:null,pageIndex:C-1,rect:g.slice(0),rotation:m,id:y,deleted:!1,popupRef:k}}else if(e instanceof ws){let{data:{inkLists:f,rect:g,rotation:m,id:y,color:v,borderStyle:{rawWidth:M},popupRef:k},parent:{page:{pageNumber:C}}}=e;a=e={annotationType:B.HIGHLIGHT,color:Array.from(v),thickness:M,inkLists:f,boxes:null,pageIndex:C-1,rect:g.slice(0),rotation:m,id:y,deleted:!1,popupRef:k}}let{color:s,quadPoints:r,inkLists:o,opacity:c}=e,l=yield pi(i,this,"deserialize").call(this,e,t,n);l.color=T.makeHexColor(...s),l.#f=c||1,o&&(l.#m=e.thickness),l.annotationElementId=e.id||null,l._initialData=a;let[d,h]=l.pageDimensions,[u,p]=l.pageTranslation;if(r){let f=l.#n=[];for(let g=0;g<r.length;g+=8)f.push({x:(r[g]-u)/d,y:1-(r[g+1]-p)/h,width:(r[g+2]-r[g])/d,height:(r[g+1]-r[g+5])/h});l.#k(),l.#S(),l.rotate(l.rotation)}else if(o){l.#r=!0;let f=o[0],g={x:f[0]-u,y:h-(f[1]-p)},m=new bs(g,[0,0,d,h],1,l.#m/2,!0,.001);for(let M=0,k=f.length;M<k;M+=2)g.x=f[M]-u,g.y=h-(f[M+1]-p),m.add(g);let{id:y,clipPathId:v}=t.drawLayer.draw(m,l.color,l._defaultOpacity,!0);l.#M({highlightOutlines:m.getOutlines(),highlightId:y,clipPathId:v}),l.#S()}return l})}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();let t=this.getRect(0,0),n=ae._colorManager.convert(this.color),a={annotationType:B.HIGHLIGHT,color:n,opacity:this.#f,thickness:this.#m,quadPoints:this.#P(),outlines:this.#I(t),pageIndex:this.pageIndex,rect:t,rotation:this.#D(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#T(a)?null:(a.id=this.annotationElementId,a)}#T(e){let{color:t}=this._initialData;return e.color.some((n,a)=>n!==t[a])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}},Mu=class i extends ae{#e=0;#t=0;#n=null;#i=new Path2D;#a=!1;#s=null;#c=!1;#l=!1;#d=null;#o=null;#h=0;#r=0;#u=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=B.INK;constructor(e){super(re(D({},e),{name:"inkEditor"})),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){ae.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case N.INK_THICKNESS:i._defaultThickness=t;break;case N.INK_COLOR:i._defaultColor=t;break;case N.INK_OPACITY:i._defaultOpacity=t/100;break}}updateParams(e,t){switch(e){case N.INK_THICKNESS:this.#f(t);break;case N.INK_COLOR:this.#p(t);break;case N.INK_OPACITY:this.#g(t);break}}static get defaultPropertiesToUpdate(){return[[N.INK_THICKNESS,i._defaultThickness],[N.INK_COLOR,i._defaultColor||ae._defaultLineColor],[N.INK_OPACITY,Math.round(i._defaultOpacity*100)]]}get propertiesToUpdate(){return[[N.INK_THICKNESS,this.thickness||i._defaultThickness],[N.INK_COLOR,this.color||i._defaultColor||ae._defaultLineColor],[N.INK_OPACITY,Math.round(100*(this.opacity??i._defaultOpacity))]]}#f(e){let t=a=>{this.thickness=a,this.#R()},n=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:N.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#p(e){let t=a=>{this.color=a,this.#x()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:N.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(e){let t=a=>{this.opacity=a,this.#x()};e/=100;let n=this.opacity;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:N.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#P(),this.#I()),this.isAttachedToDOM||(this.parent.add(this),this.#v()),this.#R()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#n&&(clearTimeout(this.#n),this.#n=null),this.#d?.disconnect(),this.#d=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){let[e,t]=this.parentDimensions,n=this.width*e,a=this.height*t;this.setDimensions(n,a)}enableEditMode(){this.#a||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.#E())}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#A())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#m(){let{parentRotation:e,parentDimensions:[t,n]}=this;switch(e){case 90:return[0,n,n,t];case 180:return[t,n,t,n];case 270:return[t,0,n,t];default:return[0,0,t,n]}}#y(){let{ctx:e,color:t,opacity:n,thickness:a,parentScale:s,scaleFactor:r}=this;e.lineWidth=a*s/r,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${Aw(n)}`}#k(e,t){this.canvas.addEventListener("contextmenu",yt,{signal:this._uiManager._signal}),this.#A(),this.#s=new AbortController;let n=this._uiManager.combinedSignal(this.#s);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:n}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:n}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:n}),this.isEditing=!0,this.#l||(this.#l=!0,this.#v(),this.thickness||=i._defaultThickness,this.color||=i._defaultColor||ae._defaultLineColor,this.opacity??=i._defaultOpacity),this.currentPath.push([e,t]),this.#c=!1,this.#y(),this.#u=()=>{this.#b(),this.#u&&window.requestAnimationFrame(this.#u)},window.requestAnimationFrame(this.#u)}#M(e,t){let[n,a]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===n&&t===a)return;let s=this.currentPath,r=this.#i;if(s.push([e,t]),this.#c=!0,s.length<=2){r.moveTo(...s[0]),r.lineTo(e,t);return}s.length===3&&(this.#i=r=new Path2D,r.moveTo(...s[0])),this.#_(r,...s.at(-3),...s.at(-2),e,t)}#C(){if(this.currentPath.length===0)return;let e=this.currentPath.at(-1);this.#i.lineTo(...e)}#w(e,t){this.#u=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#M(e,t),this.#C();let n;if(this.currentPath.length!==1)n=this.#S();else{let c=[e,t];n=[[c,c.slice(),c.slice(),c]]}let a=this.#i,s=this.currentPath;this.currentPath=[],this.#i=new Path2D;let r=()=>{this.allRawPaths.push(s),this.paths.push(n),this.bezierPath2D.push(a),this._uiManager.rebuild(this)},o=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#P(),this.#I()),this.#R())};this.addCommands({cmd:r,undo:o,mustExec:!0})}#b(){if(!this.#c)return;this.#c=!1;let e=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),n=t.map(d=>d[0]),a=t.map(d=>d[1]),s=Math.min(...n)-e,r=Math.max(...n)+e,o=Math.min(...a)-e,c=Math.max(...a)+e,{ctx:l}=this;l.save(),l.clearRect(0,0,this.canvas.width,this.canvas.height);for(let d of this.bezierPath2D)l.stroke(d);l.stroke(this.#i),l.restore()}#_(e,t,n,a,s,r,o){let c=(t+a)/2,l=(n+s)/2,d=(a+r)/2,h=(s+o)/2;e.bezierCurveTo(c+2*(a-c)/3,l+2*(s-l)/3,d+2*(a-d)/3,h+2*(s-h)/3,d,h)}#S(){let e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];let t=[],n,[a,s]=e[0];for(n=1;n<e.length-2;n++){let[u,p]=e[n],[f,g]=e[n+1],m=(u+f)/2,y=(p+g)/2,v=[a+2*(u-a)/3,s+2*(p-s)/3],M=[m+2*(u-m)/3,y+2*(p-y)/3];t.push([[a,s],v,M,[m,y]]),[a,s]=[m,y]}let[r,o]=e[n],[c,l]=e[n+1],d=[a+2*(r-a)/3,s+2*(o-s)/3],h=[c+2*(r-c)/3,l+2*(o-l)/3];return t.push([[a,s],d,h,[c,l]]),t}#x(){if(this.isEmpty()){this.#T();return}this.#y();let{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#T();for(let n of this.bezierPath2D)t.stroke(n)}commit(){this.#a||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#a=!0,this.div.classList.add("disabled"),this.#R(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}#E(){if(this.#o)return;this.#o=new AbortController;let e=this._uiManager.combinedSignal(this.#o);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}#A(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||this.#a||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#k(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#M(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#D(e)}canvasPointerleave(e){this.#D(e)}#D(e){this.#s?.abort(),this.#s=null,this.#E(),this.#n&&clearTimeout(this.#n),this.#n=setTimeout(()=>{this.#n=null,this.canvas.removeEventListener("contextmenu",yt)},10),this.#w(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#P(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#I(){this.#d=new ResizeObserver(e=>{let t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#d.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#d?.disconnect(),this.#d=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#a}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");let[n,a,s,r]=this.#m();if(this.setAt(n,a,0,0),this.setDims(s,r),this.#P(),this.width){let[o,c]=this.parentDimensions;this.setAspectRatio(this.width*o,this.height*c),this.setAt(e*o,t*c,this.width*o,this.height*c),this.#l=!0,this.#v(),this.setDims(this.width*o,this.height*c),this.#x(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#I(),this.div}#v(){if(!this.#l)return;let[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#T()}setDimensions(e,t){let n=Math.round(e),a=Math.round(t);if(this.#h===n&&this.#r===a)return;this.#h=n,this.#r=a,this.canvas.style.visibility="hidden";let[s,r]=this.parentDimensions;this.width=e/s,this.height=t/r,this.fixAndSetPosition(),this.#a&&this.#L(e,t),this.#v(),this.#x(),this.canvas.style.visibility="visible",this.fixDims()}#L(e,t){let n=this.#j(),a=(e-n)/this.#t,s=(t-n)/this.#e;this.scaleFactor=Math.min(a,s)}#T(){let e=this.#j()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#N(e){let t=new Path2D;for(let n=0,a=e.length;n<a;n++){let[s,r,o,c]=e[n];n===0&&t.moveTo(...s),t.bezierCurveTo(r[0],r[1],o[0],o[1],c[0],c[1])}return t}static#V(e,t,n){let[a,s,r,o]=t;switch(n){case 0:for(let c=0,l=e.length;c<l;c+=2)e[c]+=a,e[c+1]=o-e[c+1];break;case 90:for(let c=0,l=e.length;c<l;c+=2){let d=e[c];e[c]=e[c+1]+a,e[c+1]=d+s}break;case 180:for(let c=0,l=e.length;c<l;c+=2)e[c]=r-e[c],e[c+1]+=s;break;case 270:for(let c=0,l=e.length;c<l;c+=2){let d=e[c];e[c]=r-e[c+1],e[c+1]=o-d}break;default:throw new Error("Invalid rotation")}return e}static#B(e,t,n){let[a,s,r,o]=t;switch(n){case 0:for(let c=0,l=e.length;c<l;c+=2)e[c]-=a,e[c+1]=o-e[c+1];break;case 90:for(let c=0,l=e.length;c<l;c+=2){let d=e[c];e[c]=e[c+1]-s,e[c+1]=d-a}break;case 180:for(let c=0,l=e.length;c<l;c+=2)e[c]=r-e[c],e[c+1]-=s;break;case 270:for(let c=0,l=e.length;c<l;c+=2){let d=e[c];e[c]=o-e[c+1],e[c+1]=r-d}break;default:throw new Error("Invalid rotation")}return e}#F(e,t,n,a){let s=[],r=this.thickness/2,o=e*t+r,c=e*n+r;for(let l of this.paths){let d=[],h=[];for(let u=0,p=l.length;u<p;u++){let[f,g,m,y]=l[u];if(f[0]===y[0]&&f[1]===y[1]&&p===1){let x=e*f[0]+o,L=e*f[1]+c;d.push(x,L),h.push(x,L);break}let v=e*f[0]+o,M=e*f[1]+c,k=e*g[0]+o,C=e*g[1]+c,b=e*m[0]+o,I=e*m[1]+c,E=e*y[0]+o,w=e*y[1]+c;u===0&&(d.push(v,M),h.push(v,M)),d.push(k,C,b,I,E,w),h.push(k,C),u===p-1&&h.push(E,w)}s.push({bezier:i.#V(d,a,this.rotation),points:i.#V(h,a,this.rotation)})}return s}#H(){let e=1/0,t=-1/0,n=1/0,a=-1/0;for(let s of this.paths)for(let[r,o,c,l]of s){let d=T.bezierBoundingBox(...r,...o,...c,...l);e=Math.min(e,d[0]),n=Math.min(n,d[1]),t=Math.max(t,d[2]),a=Math.max(a,d[3])}return[e,n,t,a]}#j(){return this.#a?Math.ceil(this.thickness*this.parentScale):0}#R(e=!1){if(this.isEmpty())return;if(!this.#a){this.#x();return}let t=this.#H(),n=this.#j();this.#t=Math.max(ae.MIN_SIZE,t[2]-t[0]),this.#e=Math.max(ae.MIN_SIZE,t[3]-t[1]);let a=Math.ceil(n+this.#t*this.scaleFactor),s=Math.ceil(n+this.#e*this.scaleFactor),[r,o]=this.parentDimensions;this.width=a/r,this.height=s/o,this.setAspectRatio(a,s);let c=this.translationX,l=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#v(),this.#x(),this.#h=a,this.#r=s,this.setDims(a,s);let d=e?n/this.scaleFactor/2:0;this.translate(c-this.translationX-d,l-this.translationY-d)}static deserialize(e,t,n){return A(this,null,function*(){if(e instanceof ws)return null;let a=yield pi(i,this,"deserialize").call(this,e,t,n);a.thickness=e.thickness,a.color=T.makeHexColor(...e.color),a.opacity=e.opacity;let[s,r]=a.pageDimensions,o=a.width*s,c=a.height*r,l=a.parentScale,d=e.thickness/2;a.#a=!0,a.#h=Math.round(o),a.#r=Math.round(c);let{paths:h,rect:u,rotation:p}=e;for(let{bezier:g}of h){g=i.#B(g,u,p);let m=[];a.paths.push(m);let y=l*(g[0]-d),v=l*(g[1]-d);for(let k=2,C=g.length;k<C;k+=6){let b=l*(g[k]-d),I=l*(g[k+1]-d),E=l*(g[k+2]-d),w=l*(g[k+3]-d),x=l*(g[k+4]-d),L=l*(g[k+5]-d);m.push([[y,v],[b,I],[E,w],[x,L]]),y=x,v=L}let M=this.#N(m);a.bezierPath2D.push(M)}let f=a.#H();return a.#t=Math.max(ae.MIN_SIZE,f[2]-f[0]),a.#e=Math.max(ae.MIN_SIZE,f[3]-f[1]),a.#L(o,c),a})}serialize(){if(this.isEmpty())return null;let e=this.getRect(0,0),t=ae._colorManager.convert(this.ctx.strokeStyle);return{annotationType:B.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#F(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}},wu=class i extends ae{#e=null;#t=null;#n=null;#i=null;#a=null;#s="";#c=null;#l=null;#d=null;#o=!1;#h=!1;static _type="stamp";static _editorType=B.STAMP;constructor(e){super(re(D({},e),{name:"stampEditor"})),this.#i=e.bitmapUrl,this.#a=e.bitmapFile}static initialize(e,t){ae.initialize(e,t)}static get supportedTypes(){return Y(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return Y(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(B.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){let t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#r(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#o=e.isSvg),e.file&&(this.#s=e.file.name),this.#p()}#u(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#c){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(e=null,t=!0){return A(this,null,function*(){if(this.hasAltTextData())return null;let{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!(yield n.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");let{data:a,width:s,height:r}=e||this.copyCanvas(null,null,!0).imageData,o=yield n.guess({name:"altText",request:{data:a,width:s,height:r,channels:a.length/(s*r)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");let c=o.output;return yield this.setGuessedAltText(c),t&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c})}#f(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#r(n,!0)).finally(()=>this.#u());return}if(this.#i){let n=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(n).then(a=>this.#r(a)).finally(()=>this.#u());return}if(this.#a){let n=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(n).then(a=>this.#r(a)).finally(()=>this.#u());return}let e=document.createElement("input");e.type="file",e.accept=i.supportedTypesStr;let t=this._uiManager._signal;this.#n=new Promise(n=>{e.addEventListener("change",()=>A(this,null,function*(){if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let a=yield this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#r(a)}n()}),{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>this.#u()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#c?.remove(),this.#c=null,this.#l?.disconnect(),this.#l=null,this.#d&&(clearTimeout(this.#d),this.#d=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#f();return}super.rebuild(),this.div!==null&&(this.#t&&this.#c===null&&this.#f(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#a||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#p():this.#f(),this.width&&!this.annotationElementId){let[n,a]=this.parentDimensions;this.setAt(e*n,t*a,this.width*n,this.height*a)}return this.div}#p(){let{div:e}=this,{width:t,height:n}=this.#e,[a,s]=this.pageDimensions,r=.75;if(this.width)t=this.width*a,n=this.height*s;else if(t>r*a||n>r*s){let d=Math.min(r*a/t,r*s/n);t*=d,n*=d}let[o,c]=this.parentDimensions;this.setDims(t*o/a,n*c/s),this._uiManager.enableWaiting(!1);let l=this.#c=document.createElement("canvas");l.setAttribute("role","img"),this.addContainer(l),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#y(t,n),this.#M(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&l.setAttribute("aria-label",this.#s)}copyCanvas(e,t,n=!1){e||(e=224);let{width:a,height:s}=this.#e,r=new ps,o=this.#e,c=a,l=s,d=null;if(t){if(a>t||s>t){let b=Math.min(t/a,t/s);c=Math.floor(a*b),l=Math.floor(s*b)}d=document.createElement("canvas");let u=d.width=Math.ceil(c*r.sx),p=d.height=Math.ceil(l*r.sy);this.#o||(o=this.#m(u,p));let f=d.getContext("2d");f.filter=this._uiManager.hcmFilter;let g="white",m="#cfcfd8";this._uiManager.hcmFilter!=="none"?m="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",m="#42414d");let y=15,v=y*r.sx,M=y*r.sy,k=new OffscreenCanvas(v*2,M*2),C=k.getContext("2d");C.fillStyle=g,C.fillRect(0,0,v*2,M*2),C.fillStyle=m,C.fillRect(0,0,v,M),C.fillRect(v,M,v,M),f.fillStyle=f.createPattern(k,"repeat"),f.fillRect(0,0,u,p),f.drawImage(o,0,0,o.width,o.height,0,0,u,p)}let h=null;if(n){let u,p;if(r.symmetric&&o.width<e&&o.height<e)u=o.width,p=o.height;else if(o=this.#e,a>e||s>e){let m=Math.min(e/a,e/s);u=Math.floor(a*m),p=Math.floor(s*m),this.#o||(o=this.#m(u,p))}let g=new OffscreenCanvas(u,p).getContext("2d",{willReadFrequently:!0});g.drawImage(o,0,0,o.width,o.height,0,0,u,p),h={width:u,height:p,data:g.getImageData(0,0,u,p).data}}return{canvas:d,width:c,height:l,imageData:h}}#g(e,t){let[n,a]=this.parentDimensions;this.width=e/n,this.height=t/a,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#d!==null&&clearTimeout(this.#d);let s=200;this.#d=setTimeout(()=>{this.#d=null,this.#y(e,t)},s)}#m(e,t){let{width:n,height:a}=this.#e,s=n,r=a,o=this.#e;for(;s>2*e||r>2*t;){let c=s,l=r;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));let d=new OffscreenCanvas(s,r);d.getContext("2d").drawImage(o,0,0,c,l,0,0,s,r),o=d.transferToImageBitmap()}return o}#y(e,t){let n=new ps,a=Math.ceil(e*n.sx),s=Math.ceil(t*n.sy),r=this.#c;if(!r||r.width===a&&r.height===s)return;r.width=a,r.height=s;let o=this.#o?this.#e:this.#m(a,s),c=r.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(o,0,0,o.width,o.height,0,0,a,s)}getImageForAltText(){return this.#c}#k(e){if(e){if(this.#o){let a=this._uiManager.imageManager.getSvgUrl(this.#t);if(a)return a}let t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#o){let[t,n]=this.pageDimensions,a=Math.round(this.width*t*kn.PDF_TO_CSS_UNITS),s=Math.round(this.height*n*kn.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(a,s);return r.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,a,s),r.transferToImageBitmap()}return structuredClone(this.#e)}#M(){this._uiManager._signal&&(this.#l=new ResizeObserver(e=>{let t=e[0].contentRect;t.width&&t.height&&this.#g(t.width,t.height)}),this.#l.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#l?.disconnect(),this.#l=null},{once:!0}))}static deserialize(e,t,n){return A(this,null,function*(){let a=null;if(e instanceof hc){let{data:{rect:f,rotation:g,id:m,structParent:y,popupRef:v},container:M,parent:{page:{pageNumber:k}}}=e,C=M.querySelector("canvas"),b=n.imageManager.getFromCanvas(M.id,C);C.remove();let I=(yield t._structTree.getAriaAttributes(`${xu}${m}`))?.get("aria-label")||"";a=e={annotationType:B.STAMP,bitmapId:b.id,bitmap:b.bitmap,pageIndex:k-1,rect:f.slice(0),rotation:g,id:m,deleted:!1,accessibilityData:{decorative:!1,altText:I},isSvg:!1,structParent:y,popupRef:v}}let s=yield pi(i,this,"deserialize").call(this,e,t,n),{rect:r,bitmap:o,bitmapUrl:c,bitmapId:l,isSvg:d,accessibilityData:h}=e;l&&n.imageManager.isValidId(l)?(s.#t=l,o&&(s.#e=o)):s.#i=c,s.#o=d;let[u,p]=s.pageDimensions;return s.width=(r[2]-r[0])/u,s.height=(r[3]-r[1])/p,s.annotationElementId=e.id||null,h&&(s.altTextData=h),s._initialData=a,s.#h=!!a,s})}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let n={annotationType:B.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#o,structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=this.#k(!0),n.accessibilityData=this.serializeAltText(!0),n;let{decorative:a,altText:s}=this.serializeAltText(!1);if(!a&&s&&(n.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){let o=this.#C(n);if(o.isSame)return null;o.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,t===null)return n;t.stamps||=new Map;let r=this.#o?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:r,serialized:n}),n.bitmap=this.#k(!1);else if(this.#o){let o=t.stamps.get(this.#t);r>o.area&&(o.area=r,o.serialized.bitmap.close(),o.serialized.bitmap=this.#k(!1))}return n}#C(e){let{rect:t,pageIndex:n,accessibilityData:{altText:a}}=this._initialData,s=e.rect.every((c,l)=>Math.abs(c-t[l])<1),r=e.pageIndex===n,o=(e.accessibilityData?.alt||"")===a;return{isSame:s&&r&&o,isSameAltText:o}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}},nb=(()=>{class i{#e;#t=!1;#n=null;#i=null;#a=null;#s=new Map;#c=!1;#l=!1;#d=!1;#o=null;#h=null;#r;static _initialized=!1;static#u=new Map([mu,Mu,wu,mc].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:n,div:a,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:c,textLayer:l,viewport:d,l10n:h}){let u=[...i.#u.values()];if(!i._initialized){i._initialized=!0;for(let p of u)p.initialize(h,t)}t.registerEditorTypes(u),this.#r=t,this.pageIndex=n,this.div=a,this.#e=r,this.#n=o,this.viewport=d,this.#o=l,this.drawLayer=c,this._structTree=s,this.#r.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#r.getMode()===B.NONE}updateToolbar(t){this.#r.updateToolbar(t)}updateMode(t=this.#r.getMode()){switch(this.#y(),t){case B.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case B.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case B.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:n}=this.div;for(let a of i.#u.values())n.toggle(`${a._type}Editing`,t===a._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#o?.div}addInkEditorIfNeeded(t){if(this.#r.getMode()!==B.INK)return;if(!t){for(let a of this.#s.values())if(a.isEmpty()){a.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){this.#r.setEditingState(t)}addCommands(t){this.#r.addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}enable(){return A(this,null,function*(){this.div.tabIndex=0,this.togglePointerEvents(!0);let t=new Set;for(let a of this.#s.values())a.enableEditing(),a.show(!0),a.annotationElementId&&(this.#r.removeChangedExistingAnnotation(a),t.add(a.annotationElementId));if(!this.#n)return;let n=this.#n.getEditableAnnotations();for(let a of n){if(a.hide(),this.#r.isDeletedAnnotationElement(a.data.id)||t.has(a.data.id))continue;let s=yield this.deserialize(a);s&&(this.addOrRebuild(s),s.enableEditing())}})}disable(){this.#d=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);let t=new Map,n=new Map;for(let s of this.#s.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){t.set(s.annotationElementId,s);continue}else n.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#n){let s=this.#n.getEditableAnnotations();for(let r of s){let{id:o}=r.data;if(this.#r.isDeletedAnnotationElement(o))continue;let c=n.get(o);if(c){c.resetAnnotationElement(r),c.show(!1),r.show();continue}c=t.get(o),c&&(this.#r.addChangedExistingAnnotation(c),c.renderAnnotationElement(r)&&c.show(!1)),r.show()}}this.#y(),this.isEmpty&&(this.div.hidden=!0);let{classList:a}=this.div;for(let s of i.#u.values())a.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#d=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#r.getActive()!==t&&this.#r.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#o?.div&&!this.#h){this.#h=new AbortController;let t=this.#r.combinedSignal(this.#h);this.#o.div.addEventListener("pointerdown",this.#f.bind(this),{signal:t}),this.#o.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#o?.div&&this.#h&&(this.#h.abort(),this.#h=null,this.#o.div.classList.remove("highlighting"))}#f(t){this.#r.unselectAll();let{target:n}=t;if(n===this.#o.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#o.div.contains(n)){let{isMac:a}=He.platform;if(t.button!==0||t.ctrlKey&&a)return;this.#r.showAllEditors("highlight",!0,!0),this.#o.div.classList.add("free"),this.toggleDrawing(),mc.startHighlighting(this,this.#r.direction==="ltr",{target:this.#o.div,x:t.x,y:t.y}),this.#o.div.addEventListener("pointerup",()=>{this.#o.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#r._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;let t=this.#r.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);let{annotationElementId:n}=t;n&&this.#r.isDeletedAnnotationElement(n)&&this.#r.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#e?.removePointerInTextLayer(t.contentDiv),!this.#d&&t.annotationElementId&&this.#r.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#r.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#r.addDeletedAnnotationElement(t.annotationElementId),ae.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#r.addEditor(t),this.attach(t),!t.isAttachedToDOM){let n=t.render();this.div.append(n),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#r.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;let{activeElement:n}=document;t.div.contains(n)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#r._signal}),n.focus())},0)),t._structTreeParentId=this.#e?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){let n=()=>t._uiManager.rebuild(t),a=()=>{t.remove()};this.addCommands({cmd:n,undo:a,mustExec:!1})}getNextId(){return this.#r.getId()}get#p(){return i.#u.get(this.#r.getMode())}combinedSignal(t){return this.#r.combinedSignal(t)}#g(t){let n=this.#p;return n?new n.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#p?.canCreateNewEmptyEditor()}pasteEditor(t,n){this.#r.updateToolbar(t),this.#r.updateMode(t);let{offsetX:a,offsetY:s}=this.#m(),r=this.getNextId(),o=this.#g(D({parent:this,id:r,x:a,y:s,uiManager:this.#r,isCentered:!0},n));o&&this.add(o)}deserialize(t){return A(this,null,function*(){return(yield i.#u.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#r))||null})}createAndAddNewEditor(t,n,a={}){let s=this.getNextId(),r=this.#g(D({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#r,isCentered:n},a));return r&&this.add(r),r}#m(){let{x:t,y:n,width:a,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,n),c=Math.min(window.innerWidth,t+a),l=Math.min(window.innerHeight,n+s),d=(r+c)/2-t,h=(o+l)/2-n,[u,p]=this.viewport.rotation%180===0?[d,h]:[h,d];return{offsetX:u,offsetY:p}}addNewEditor(){this.createAndAddNewEditor(this.#m(),!0)}setSelected(t){this.#r.setSelected(t)}toggleSelected(t){this.#r.toggleSelected(t)}unselect(t){this.#r.unselect(t)}pointerup(t){let{isMac:n}=He.platform;if(!(t.button!==0||t.ctrlKey&&n)&&t.target===this.div&&this.#c){if(this.#c=!1,!this.#t){this.#t=!0;return}if(this.#r.getMode()===B.STAMP){this.#r.unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#r.getMode()===B.HIGHLIGHT&&this.enableTextSelection(),this.#c){this.#c=!1;return}let{isMac:n}=He.platform;if(t.button!==0||t.ctrlKey&&n||t.target!==this.div)return;this.#c=!0;let a=this.#r.getActive();this.#t=!a||a.isEmpty()}findNewParent(t,n,a){let s=this.#r.findParent(n,a);return s===null||s===this?!1:(s.changeParent(t),!0)}destroy(){this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(let t of this.#s.values())this.#e?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#r.removeLayer(this)}#y(){this.#l=!0;for(let t of this.#s.values())t.isEmpty()&&t.remove();this.#l=!1}render({viewport:t}){this.viewport=t,si(this.div,t);for(let n of this.#r.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:t}){this.#r.commitOrRemove(),this.#y();let n=this.viewport.rotation,a=t.rotation;if(this.viewport=t,si(this.div,{rotation:a}),n!==a)for(let s of this.#s.values())s.rotate(a);this.addInkEditorIfNeeded(!1)}get pageDimensions(){let{pageWidth:t,pageHeight:n}=this.viewport.rawDims;return[t,n]}get scale(){return this.#r.viewParameters.realScale}}return i})(),bu=class i{#e=null;#t=0;#n=new Map;#i=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#n.size>0)for(let t of this.#n.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Y(this,"_svgFactory",new vs)}static#a(e,{x:t=0,y:n=0,width:a=1,height:s=1}={}){let{style:r}=e;r.top=`${100*n}%`,r.left=`${100*t}%`,r.width=`${100*a}%`,r.height=`${100*s}%`}#s(e){let t=i._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),i.#a(t,e),t}#c(e,t){let n=i._svgFactory.createElement("clipPath");e.append(n);let a=`clip_${t}`;n.setAttribute("id",a),n.setAttribute("clipPathUnits","objectBoundingBox");let s=i._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),a}draw(e,t,n,a=!1){let s=this.#t++,r=this.#s(e.box);r.classList.add(...e.classNamesForDrawing);let o=i._svgFactory.createElement("defs");r.append(o);let c=i._svgFactory.createElement("path");o.append(c);let l=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",l),c.setAttribute("d",e.toSVGPath()),a&&this.#i.set(s,c);let d=this.#c(o,l),h=i._svgFactory.createElement("use");return r.append(h),r.setAttribute("fill",t),r.setAttribute("fill-opacity",n),h.setAttribute("href",`#${l}`),this.#n.set(s,r),{id:s,clipPathId:`url(#${d})`}}drawOutline(e){let t=this.#t++,n=this.#s(e.box);n.classList.add(...e.classNamesForOutlining);let a=i._svgFactory.createElement("defs");n.append(a);let s=i._svgFactory.createElement("path");a.append(s);let r=`path_p${this.pageIndex}_${t}`;s.setAttribute("id",r),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke");let o;if(e.mustRemoveSelfIntersections){let d=i._svgFactory.createElement("mask");a.append(d),o=`mask_p${this.pageIndex}_${t}`,d.setAttribute("id",o),d.setAttribute("maskUnits","objectBoundingBox");let h=i._svgFactory.createElement("rect");d.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");let u=i._svgFactory.createElement("use");d.append(u),u.setAttribute("href",`#${r}`),u.setAttribute("stroke","none"),u.setAttribute("fill","black"),u.setAttribute("fill-rule","nonzero"),u.classList.add("mask")}let c=i._svgFactory.createElement("use");n.append(c),c.setAttribute("href",`#${r}`),o&&c.setAttribute("mask",`url(#${o})`);let l=c.cloneNode();return n.append(l),c.classList.add("mainOutline"),l.classList.add("secondaryOutline"),this.#n.set(t,n),t}finalizeLine(e,t){let n=this.#i.get(e);this.#i.delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){this.#n.get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){this.#i.get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){i.#a(this.#n.get(e),t)}show(e,t){this.#n.get(e).classList.toggle("hidden",!t)}rotate(e,t){this.#n.get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){this.#n.get(e).setAttribute("fill",t)}changeOpacity(e,t){this.#n.get(e).setAttribute("fill-opacity",t)}addClass(e,t){this.#n.get(e).classList.add(t)}removeClass(e,t){this.#n.get(e).classList.remove(t)}getSVGRoot(e){return this.#n.get(e)}remove(e){this.#i.delete(e),this.#e!==null&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(let e of this.#n.values())e.remove();this.#n.clear(),this.#i.clear()}};var ib=j.AbortException,ab=j.AnnotationEditorLayer,sb=j.AnnotationEditorParamsType,_u=j.AnnotationEditorType,rb=j.AnnotationEditorUIManager,ob=j.AnnotationLayer,cb=j.AnnotationMode,lb=j.ColorPicker,db=j.DOMSVGFactory,hb=j.DrawLayer,ub=j.FeatureTest,Du=j.GlobalWorkerOptions,pb=j.ImageKind,fb=j.InvalidPDFException,gb=j.MissingPDFException,yb=j.OPS,mb=j.OutputScale,kb=j.PDFDataRangeTransport,vb=j.PDFDateString,Mb=j.PDFWorker,wb=j.PasswordResponses,bb=j.PermissionFlag,Cb=j.PixelsPerInch,xb=j.RenderingCancelledException,Ib=j.TextLayer,Ab=j.UnexpectedResponseException,Sb=j.Util,Tu=j.VerbosityLevel,Eb=j.XfaLayer,Lb=j.build,_b=j.createValidAbsoluteUrl,Db=j.fetchData,Pu=j.getDocument,Tb=j.getFilenameFromUrl,Pb=j.getPdfFilenameFromUrl,Rb=j.getXfaPageViewport,Ob=j.isDataScheme,Fb=j.isPdfFile,Nb=j.noContextMenu,Hb=j.normalizeUnicode,jb=j.setLayerDimensions,Bb=j.shadow,xs=j.version;var wp={};_p(wp,{AnnotationLayerBuilder:()=>S6,DownloadManager:()=>E6,EventBus:()=>L6,FindState:()=>_6,GenericL10n:()=>yp,LinkTarget:()=>hi,PDFFindController:()=>mp,PDFHistory:()=>D6,PDFLinkService:()=>kp,PDFPageView:()=>T6,PDFScriptingManager:()=>P6,PDFSinglePageViewer:()=>vp,PDFViewer:()=>Mp,ProgressBar:()=>R6,RenderingStates:()=>O6,ScrollMode:()=>F6,SimpleLinkService:()=>N6,SpreadMode:()=>H6,StructTreeLayerBuilder:()=>j6,TextLayerBuilder:()=>B6,XfaLayerBuilder:()=>V6,parseQueryString:()=>z6});var As={};As.d=(i,e)=>{for(var t in e)As.o(e,t)&&!As.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})};As.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var Me=globalThis.pdfjsViewer={};As.d(Me,{AnnotationLayerBuilder:()=>Rc,DownloadManager:()=>$u,EventBus:()=>Oc,FindState:()=>Mn,GenericL10n:()=>sa,LinkTarget:()=>ci,PDFFindController:()=>Uu,PDFHistory:()=>ip,PDFLinkService:()=>Tc,PDFPageView:()=>Vc,PDFScriptingManager:()=>up,PDFSinglePageViewer:()=>gp,PDFViewer:()=>zc,ProgressBar:()=>qu,RenderingStates:()=>Ce,ScrollMode:()=>J,SimpleLinkService:()=>Ls,SpreadMode:()=>ze,StructTreeLayerBuilder:()=>Hc,TextLayerBuilder:()=>jc,XfaLayerBuilder:()=>Bc,parseQueryString:()=>qc});var Vb="auto",cm=1,Ly=1.1,zb=.1,qb=10,Ru=0,Ub=1.25,_y=40,Dy=5,Ce={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},na={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};var Nt={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2},J={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},ze={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};function lm(i,e,t=!1){let n=i.offsetParent;if(!n){console.error("offsetParent is not set -- cannot scroll");return}let a=i.offsetTop+i.clientTop,s=i.offsetLeft+i.clientLeft;for(;n.clientHeight===n.scrollHeight&&n.clientWidth===n.scrollWidth||t&&(n.classList.contains("markedContent")||getComputedStyle(n).overflow==="hidden");)if(a+=n.offsetTop,s+=n.offsetLeft,n=n.offsetParent,!n)return;e&&(e.top!==void 0&&(a+=e.top),e.left!==void 0&&(s+=e.left,n.scrollLeft=s)),n.scrollTop=a}function Wb(i,e,t=void 0){let n=function(r){s||(s=window.requestAnimationFrame(function(){s=null;let c=i.scrollLeft,l=a.lastX;c!==l&&(a.right=c>l),a.lastX=c;let d=i.scrollTop,h=a.lastY;d!==h&&(a.down=d>h),a.lastY=d,e(a)}))},a={right:!0,down:!0,lastX:i.scrollLeft,lastY:i.scrollTop,_eventHandler:n},s=null;return i.addEventListener("scroll",n,{useCapture:!0,signal:t}),t?.addEventListener("abort",()=>window.cancelAnimationFrame(s),{once:!0}),a}function qc(i){let e=new Map;for(let[t,n]of new URLSearchParams(i))e.set(t.toLowerCase(),n);return e}var Ty=/[\x00-\x1F]/g;function Ss(i,e=!1){return Ty.test(i)?e?i.replaceAll(Ty,t=>t==="\0"?"":" "):i.replaceAll("\0",""):i}function Es(i,e,t=0){let n=t,a=i.length-1;if(a<0||!e(i[a]))return i.length;if(e(i[n]))return n;for(;n<a;){let s=n+a>>1,r=i[s];e(r)?a=s:n=s+1}return n}function Py(i){if(Math.floor(i)===i)return[i,1];let e=1/i,t=8;if(e>t)return[1,t];if(Math.floor(e)===e)return[1,e];let n=i>1?e:i,a=0,s=1,r=1,o=1;for(;;){let l=a+r,d=s+o;if(d>t)break;n<=l/d?(r=l,o=d):(a=l,s=d)}let c;return n-a/s<r/o-n?c=n===i?[a,s]:[s,a]:c=n===i?[r,o]:[o,r],c}function Ic(i,e){return i-i%e}function $b(i,e,t){if(i<2)return i;let n=e[i].div,a=n.offsetTop+n.clientTop;a>=t&&(n=e[i-1].div,a=n.offsetTop+n.clientTop);for(let s=i-2;s>=0&&(n=e[s].div,!(n.offsetTop+n.clientTop+n.clientHeight<=a));--s)i=s;return i}function Gb({scrollEl:i,views:e,sortByVisibility:t=!1,horizontal:n=!1,rtl:a=!1}){let s=i.scrollTop,r=s+i.clientHeight,o=i.scrollLeft,c=o+i.clientWidth;function l(v){let M=v.div;return M.offsetTop+M.clientTop+M.clientHeight>s}function d(v){let M=v.div,k=M.offsetLeft+M.clientLeft,C=k+M.clientWidth;return a?k<c:C>o}let h=[],u=new Set,p=e.length,f=Es(e,n?d:l);f>0&&f<p&&!n&&(f=$b(f,e,s));let g=n?c:-1;for(let v=f;v<p;v++){let M=e[v],k=M.div,C=k.offsetLeft+k.clientLeft,b=k.offsetTop+k.clientTop,I=k.clientWidth,E=k.clientHeight,w=C+I,x=b+E;if(g===-1)x>=r&&(g=x);else if((n?C:b)>g)break;if(x<=s||b>=r||w<=o||C>=c)continue;let L=Math.max(0,s-b)+Math.max(0,x-r),ee=Math.max(0,o-C)+Math.max(0,w-c),Q=(E-L)/E,$=(I-ee)/I,se=Q*$*100|0;h.push({id:M.id,x:C,y:b,view:M,percent:se,widthPercent:$*100|0}),u.add(M.id)}let m=h[0],y=h.at(-1);return t&&h.sort(function(v,M){let k=v.percent-M.percent;return Math.abs(k)>.001?-k:v.id-M.id}),{first:m,last:y,views:h,ids:u}}function dm(i){return Number.isInteger(i)&&i%90===0}function Xb(i){return Number.isInteger(i)&&Object.values(J).includes(i)&&i!==J.UNKNOWN}function Zb(i){return Number.isInteger(i)&&Object.values(ze).includes(i)&&i!==ze.UNKNOWN}function Ry(i){return i.width<=i.height}var ZO=new Promise(function(i){window.requestAnimationFrame(i)}),Kb=document.documentElement.style;function Yb(i,e,t){return Math.min(Math.max(i,e),t)}var qu=class{#e=null;#t=null;#n=0;#i=null;#a=!0;constructor(e){this.#e=e.classList,this.#i=e.style}get percent(){return this.#n}set percent(e){if(this.#n=Yb(e,0,100),isNaN(e)){this.#e.add("indeterminate");return}this.#e.remove("indeterminate"),this.#i.setProperty("--progressBar-percent",`${this.#n}%`)}setWidth(e){if(!e)return;let n=e.parentNode.offsetWidth-e.offsetWidth;n>0&&this.#i.setProperty("--progressBar-end-offset",`${n}px`)}setDisableAutoFetch(e=5e3){this.#n===100||isNaN(this.#n)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},e))}hide(){this.#a&&(this.#a=!1,this.#e.add("hidden"))}show(){this.#a||(this.#a=!0,this.#e.remove("hidden"))}};function Qb(i){let e=J.VERTICAL,t=ze.NONE;switch(i){case"SinglePage":e=J.PAGE;break;case"OneColumn":break;case"TwoPageLeft":e=J.PAGE;case"TwoColumnLeft":t=ze.ODD;break;case"TwoPageRight":e=J.PAGE;case"TwoColumnRight":t=ze.EVEN;break}return{scrollMode:e,spreadMode:t}}var Ac=(function(){let i=document.createElement("div");return i.style.width="round(down, calc(1.6666666666666665 * 792px), 1px)",i.style.width==="calc(1320px)"?Math.fround:e=>e})(),St={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};function Jb(i){return i<11904}function e8(i){return(i&65408)===0}function t8(i){return i>=97&&i<=122||i>=65&&i<=90}function n8(i){return i>=48&&i<=57}function i8(i){return i===32||i===9||i===13||i===10}function a8(i){return i>=13312&&i<=40959||i>=63744&&i<=64255}function s8(i){return i>=12448&&i<=12543}function r8(i){return i>=12352&&i<=12447}function o8(i){return i>=65376&&i<=65439}function c8(i){return(i&65408)===3584}function Sc(i){return Jb(i)?e8(i)?i8(i)?St.SPACE:t8(i)||n8(i)||i===95?St.ALPHA_LETTER:St.PUNCT:c8(i)?St.THAI_LETTER:i===160?St.SPACE:St.ALPHA_LETTER:a8(i)?St.HAN_LETTER:s8(i)?St.KATAKANA_LETTER:r8(i)?St.HIRAGANA_LETTER:o8(i)?St.HALFWIDTH_KATAKANA_LETTER:St.ALPHA_LETTER}var Oy;function l8(){return Oy||="\xA0\xA8\xAA\xAF\xB2-\xB5\xB8-\xBA\xBC-\xBE\u0132-\u0133\u013F-\u0140\u0149\u017F\u01C4-\u01CC\u01F1-\u01F3\u02B0-\u02B8\u02D8-\u02DD\u02E0-\u02E4\u0374\u037A\u037E\u0384-\u0385\u0387\u03D0-\u03D6\u03F0-\u03F2\u03F4-\u03F5\u03F9\u0587\u0675-\u0678\u0958-\u095F\u09DC-\u09DD\u09DF\u0A33\u0A36\u0A59-\u0A5B\u0A5E\u0B5C-\u0B5D\u0E33\u0EB3\u0EDC-\u0EDD\u0F0C\u0F43\u0F4D\u0F52\u0F57\u0F5C\u0F69\u10FC\u1D2C-\u1D2E\u1D30-\u1D3A\u1D3C-\u1D4D\u1D4F-\u1D6A\u1D78\u1D9B-\u1DBF\u1E9A-\u1E9B\u1F71\u1F73\u1F75\u1F77\u1F79\u1F7B\u1F7D\u1FBB\u1FBD-\u1FC1\u1FC9\u1FCB\u1FCD-\u1FCF\u1FD3\u1FDB\u1FDD-\u1FDF\u1FE3\u1FEB\u1FED-\u1FEF\u1FF9\u1FFB\u1FFD-\u1FFE\u2000-\u200A\u2011\u2017\u2024-\u2026\u202F\u2033-\u2034\u2036-\u2037\u203C\u203E\u2047-\u2049\u2057\u205F\u2070-\u2071\u2074-\u208E\u2090-\u209C\u20A8\u2100-\u2103\u2105-\u2107\u2109-\u2113\u2115-\u2116\u2119-\u211D\u2120-\u2122\u2124\u2126\u2128\u212A-\u212D\u212F-\u2131\u2133-\u2139\u213B-\u2140\u2145-\u2149\u2150-\u217F\u2189\u222C-\u222D\u222F-\u2230\u2329-\u232A\u2460-\u24EA\u2A0C\u2A74-\u2A76\u2ADC\u2C7C-\u2C7D\u2D6F\u2E9F\u2EF3\u2F00-\u2FD5\u3000\u3036\u3038-\u303A\u309B-\u309C\u309F\u30FF\u3131-\u318E\u3192-\u319F\u3200-\u321E\u3220-\u3247\u3250-\u327E\u3280-\u33FF\uA69C-\uA69D\uA770\uA7F2-\uA7F4\uA7F8-\uA7F9\uAB5C-\uAB5F\uAB69\uF900-\uFA0D\uFA10\uFA12\uFA15-\uFA1E\uFA20\uFA22\uFA25-\uFA26\uFA2A-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE10-\uFE19\uFE30-\uFE44\uFE47-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE72\uFE74\uFE76-\uFEFC\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6",Oy}var Mn={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},d8=250,h8=-50,u8=-400,Fy={"\u2010":"-","\u2018":"'","\u2019":"'","\u201A":"'","\u201B":"'","\u201C":'"',"\u201D":'"',"\u201E":'"',"\u201F":'"',"\xBC":"1/4","\xBD":"1/2","\xBE":"3/4"},Ny=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),Hy,p8=new RegExp("\\p{M}+","gu"),f8=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),g8=new RegExp("([^\\p{M}])\\p{M}*$","u"),y8=new RegExp("^\\p{M}*([^\\p{M}])","u"),m8=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,jy=new Map,k8="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",By=new Map,Ou=null,Fu=null;function Nu(i){let e=[],t;for(;(t=m8.exec(i))!==null;){let{index:p}=t;for(let f of t[0]){let g=jy.get(f);g||(g=f.normalize("NFD").length,jy.set(f,g)),e.push([g,p++])}}let n;if(e.length===0&&Ou)n=Ou;else if(e.length>0&&Fu)n=Fu;else{let p=Object.keys(Fy).join(""),f=l8(),v=`([${p}])|([${f}])|((?:\u3099|\u309A)\\n)|(\\p{M}+(?:-\\n)?)|(\\p{Ll}-\\n\\p{Lu})|(\\S-\\n)|((?:\\p{Ideographic}|[\u3040-\u30FF])\\n)|(\\n)`;e.length===0?n=Ou=new RegExp(v+"|(\\u0000)","gum"):n=Fu=new RegExp(v+`|(${k8})`,"gum")}let a=[];for(;(t=p8.exec(i))!==null;)a.push([t[0].length,t.index]);let s=i.normalize("NFD"),r=[[0,0]],o=0,c=0,l=0,d=0,h=0,u=!1;return s=s.replace(n,(p,f,g,m,y,v,M,k,C,b,I)=>{if(I-=d,f){let E=Fy[f],w=E.length;for(let x=1;x<w;x++)r.push([I-l+x,l-x]);return l-=w-1,E}if(g){let E=By.get(g);E||(E=g.normalize("NFKC"),By.set(g,E));let w=E.length;for(let x=1;x<w;x++)r.push([I-l+x,l-x]);return l-=w-1,E}if(m)return u=!0,I+h===a[o]?.[1]?++o:(r.push([I-1-l+1,l-1]),l-=1,d+=1),r.push([I-l+1,l]),d+=1,h+=1,m.charAt(0);if(y){let E=y.endsWith(`
`),w=E?y.length-2:y.length;u=!0;let x=w;I+h===a[o]?.[1]&&(x-=a[o][0],++o);for(let L=1;L<=x;L++)r.push([I-1-l+L,l-L]);return l-=x,d+=x,E?(I+=w-1,r.push([I-l+1,1+l]),l+=1,d+=1,h+=1,y.slice(0,w)):y}if(v)return r.push([I-l+3,1+l]),l+=1,d+=1,h+=1,v.replace(`
`,"");if(M){let E=M.length-2;return r.push([I-l+E,1+l]),l+=1,d+=1,h+=1,M.slice(0,-2)}if(k){let E=k.length-1;return r.push([I-l+E,l]),d+=1,h+=1,k.slice(0,-1)}if(C)return r.push([I-l+1,l-1]),l-=1,d+=1,h+=1," ";if(I+h===e[c]?.[1]){let E=e[c][0]-1;++c;for(let w=1;w<=E;w++)r.push([I-(l-w),l-w]);l-=E,d+=E}return b}),r.push([s.length,l]),[s,r,u]}function v8(i,e,t){if(!i)return[e,t];let n=e,a=e+t-1,s=Es(i,d=>d[0]>=n);i[s][0]>n&&--s;let r=Es(i,d=>d[0]>=a,s);i[r][0]>a&&--r;let o=n+i[s][1],l=a+i[r][1]+1-o;return[o,l]}var Uu=class{#e=null;#t=!0;#n=0;constructor({linkService:e,eventBus:t,updateMatchesCountOnProgress:n=!0}){this._linkService=e,this._eventBus=t,this.#t=n,this.onIsPageVisible=null,this.#a(),t._on("find",this.#i.bind(this)),t._on("findbarclose",this.#k.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(e){this._pdfDocument&&this.#a(),e&&(this._pdfDocument=e,this._firstPageCapability.resolve())}#i(e){if(!e)return;let t=this._pdfDocument,{type:n}=e;(this.#e===null||this.#c(e))&&(this._dirtyMatch=!0),this.#e=e,n!=="highlightallchange"&&this.#w(Mn.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||t&&this._pdfDocument!==t)return;this.#h();let a=!this._highlightMatches,s=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),n?this._dirtyMatch?this.#f():n==="again"?(this.#f(),a&&this.#e.highlightAll&&this.#u()):n==="highlightallchange"?(s?this.#f():this._highlightMatches=!0,this.#u()):this.#f():this._findTimeout=setTimeout(()=>{this.#f(),this._findTimeout=null},d8)})}scrollMatchIntoView({element:e=null,selectedLeft:t=0,pageIndex:n=-1,matchIndex:a=-1}){if(!this._scrollMatches||!e)return;if(a===-1||a!==this._selected.matchIdx)return;if(n===-1||n!==this._selected.pageIdx)return;this._scrollMatches=!1;let s={top:h8,left:t+u8};lm(e,s,!0)}#a(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#n=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()}get#s(){let{query:e}=this.#e;return typeof e=="string"?(e!==this._rawQuery&&(this._rawQuery=e,[this._normalizedQuery]=Nu(e)),this._normalizedQuery):(e||[]).filter(t=>!!t).map(t=>Nu(t)[0])}#c(e){let t=e.query,n=this.#e.query,a=typeof t;if(a!==typeof n)return!0;if(a==="string"){if(t!==n)return!0}else if(JSON.stringify(t)!==JSON.stringify(n))return!0;switch(e.type){case"again":let r=this._selected.pageIdx+1,o=this._linkService;return r>=1&&r<=o.pagesCount&&r!==o.page&&!(this.onIsPageVisible?.(r)??!0);case"highlightallchange":return!1}return!0}#l(e,t,n){let a=e.slice(0,t).match(g8);if(a){let s=e.charCodeAt(t),r=a[1].charCodeAt(0);if(Sc(s)===Sc(r))return!1}if(a=e.slice(t+n).match(y8),a){let s=e.charCodeAt(t+n-1),r=a[1].charCodeAt(0);if(Sc(s)===Sc(r))return!1}return!0}#d(e,t){let{matchDiacritics:n}=this.#e,a=!1;e=e.replaceAll(f8,(r,o,c,l,d,h)=>o?`[ ]*\\${o}[ ]*`:c?`[ ]*${c}[ ]*`:l?"[ ]+":n?d||h:d?Ny.has(d.charCodeAt(0))?d:"":t?(a=!0,`${h}\\p{M}*`):h);let s="[ ]*";return e.endsWith(s)&&(e=e.slice(0,e.length-s.length)),n&&t&&(Hy||=String.fromCharCode(...Ny),a=!0,e=`${e}(?=[${Hy}]|[^\\p{M}]|$)`),[a,e]}#o(e){let t=this.#s;if(t.length===0)return;let n=this._pageContents[e],a=this.match(t,n,e),s=this._pageMatches[e]=[],r=this._pageMatchesLength[e]=[],o=this._pageDiffs[e];a?.forEach(({index:l,length:d})=>{let[h,u]=v8(o,l,d);u&&(s.push(h),r.push(u))}),this.#e.highlightAll&&this.#r(e),this._resumePageIdx===e&&(this._resumePageIdx=null,this.#g());let c=s.length;this._matchesCountTotal+=c,this.#t?c>0&&this.#C():++this.#n===this._linkService.pagesCount&&this.#C()}match(e,t,n){let a=this._hasDiacritics[n],s=!1;if(typeof e=="string"?[s,e]=this.#d(e,a):e=e.sort().reverse().map(h=>{let[u,p]=this.#d(h,a);return s||=u,`(${p})`}).join("|"),!e)return;let{caseSensitive:r,entireWord:o}=this.#e,c=`g${s?"u":""}${r?"":"i"}`;e=new RegExp(e,c);let l=[],d;for(;(d=e.exec(t))!==null;)o&&!this.#l(t,d.index,d[0].length)||l.push({index:d.index,length:d[0].length});return l}#h(){if(this._extractTextPromises.length>0)return;let e=Promise.resolve(),t={disableNormalization:!0};for(let n=0,a=this._linkService.pagesCount;n<a;n++){let{promise:s,resolve:r}=Promise.withResolvers();this._extractTextPromises[n]=s,e=e.then(()=>this._pdfDocument.getPage(n+1).then(o=>o.getTextContent(t)).then(o=>{let c=[];for(let l of o.items)c.push(l.str),l.hasEOL&&c.push(`
`);[this._pageContents[n],this._pageDiffs[n],this._hasDiacritics[n]]=Nu(c.join("")),r()},o=>{console.error(`Unable to get text content for page ${n+1}`,o),this._pageContents[n]="",this._pageDiffs[n]=null,this._hasDiacritics[n]=!1,r()}))}}#r(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}#u(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#f(){let e=this.#e.findPrevious,t=this._linkService.page-1,n=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=t,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#n=0,this._matchesCountTotal=0,this.#u();for(let r=0;r<n;r++)this._pendingFindMatches.has(r)||(this._pendingFindMatches.add(r),this._extractTextPromises[r].then(()=>{this._pendingFindMatches.delete(r),this.#o(r)}))}if(this.#s.length===0){this.#w(Mn.FOUND);return}if(this._resumePageIdx)return;let s=this._offset;if(this._pagesToSearch=n,s.matchIdx!==null){let r=this._pageMatches[s.pageIdx].length;if(!e&&s.matchIdx+1<r||e&&s.matchIdx>0){s.matchIdx=e?s.matchIdx-1:s.matchIdx+1,this.#y(!0);return}this.#m(e)}this.#g()}#p(e){let t=this._offset,n=e.length,a=this.#e.findPrevious;return n?(t.matchIdx=a?n-1:0,this.#y(!0),!0):(this.#m(a),t.wrapped&&(t.matchIdx=null,this._pagesToSearch<0)?(this.#y(!1),!0):!1)}#g(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let e=null;do{let t=this._offset.pageIdx;if(e=this._pageMatches[t],!e){this._resumePageIdx=t;break}}while(!this.#p(e))}#m(e){let t=this._offset,n=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null,this._pagesToSearch--,(t.pageIdx>=n||t.pageIdx<0)&&(t.pageIdx=e?n-1:0,t.wrapped=!0)}#y(e=!1){let t=Mn.NOT_FOUND,n=this._offset.wrapped;if(this._offset.wrapped=!1,e){let a=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,t=n?Mn.WRAPPED:Mn.FOUND,a!==-1&&a!==this._selected.pageIdx&&this.#r(a)}this.#w(t,this.#e.findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,this.#r(this._selected.pageIdx))}#k(e){let t=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||t&&this._pdfDocument!==t||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#w(Mn.FOUND),this._highlightMatches=!1,this.#u())})}#M(){let{pageIdx:e,matchIdx:t}=this._selected,n=0,a=this._matchesCountTotal;if(t!==-1){for(let s=0;s<e;s++)n+=this._pageMatches[s]?.length||0;n+=t+1}return(n<1||n>a)&&(n=a=0),{current:n,total:a}}#C(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#M()})}#w(e,t=!1){!this.#t&&(this.#n!==this._linkService.pagesCount||e===Mn.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:t,entireWord:this.#e?.entireWord??null,matchesCount:this.#M(),rawQuery:this.#e?.query??null})}},M8="noopener noreferrer nofollow",ci={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},Tc=class i{externalLinkEnabled=!0;constructor({eventBus:e,externalLinkTarget:t=null,externalLinkRel:n=null,ignoreDestinationZoom:a=!1}={}){this.eventBus=e,this.externalLinkTarget=t,this.externalLinkRel=n,this._ignoreDestinationZoom=a,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(e,t=null){this.baseUrl=t,this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(e){this.pdfDocument&&(this.pdfViewer.currentPageNumber=e)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(e){this.pdfDocument&&(this.pdfViewer.pagesRotation=e)}get isInPresentationMode(){return this.pdfDocument?this.pdfViewer.isInPresentationMode:!1}goToDestination(e){return A(this,null,function*(){if(!this.pdfDocument)return;let t,n,a;if(typeof e=="string"?(t=e,n=yield this.pdfDocument.getDestination(e)):(t=null,n=yield e),!Array.isArray(n)){console.error(`goToDestination: "${n}" is not a valid destination array, for dest="${e}".`);return}let[s]=n;if(s&&typeof s=="object"){if(a=this.pdfDocument.cachedPageNumber(s),!a)try{a=(yield this.pdfDocument.getPageIndex(s))+1}catch{console.error(`goToDestination: "${s}" is not a valid page reference, for dest="${e}".`);return}}else Number.isInteger(s)&&(a=s+1);if(!a||a<1||a>this.pagesCount){console.error(`goToDestination: "${a}" is not a valid page number, for dest="${e}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:t,explicitDest:n,pageNumber:a})),this.pdfViewer.scrollPageIntoView({pageNumber:a,destArray:n,ignoreDestinationZoom:this._ignoreDestinationZoom})})}goToPage(e){if(!this.pdfDocument)return;let t=typeof e=="string"&&this.pdfViewer.pageLabelToPageNumber(e)||e|0;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(t)),this.pdfViewer.scrollPageIntoView({pageNumber:t})}addLinkAttributes(e,t,n=!1){if(!t||typeof t!="string")throw new Error('A valid "url" parameter must provided.');let a=n?ci.BLANK:this.externalLinkTarget,s=this.externalLinkRel;this.externalLinkEnabled?e.href=e.title=t:(e.href="",e.title=`Disabled: ${t}`,e.onclick=()=>!1);let r="";switch(a){case ci.NONE:break;case ci.SELF:r="_self";break;case ci.BLANK:r="_blank";break;case ci.PARENT:r="_parent";break;case ci.TOP:r="_top";break}e.target=r,e.rel=typeof s=="string"?s:M8}getDestinationHash(e){if(typeof e=="string"){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){let t=JSON.stringify(e);if(t.length>0)return this.getAnchorUrl("#"+escape(t))}return this.getAnchorUrl("")}getAnchorUrl(e){return this.baseUrl?this.baseUrl+e:e}setHash(e){if(!this.pdfDocument)return;let t,n;if(e.includes("=")){let a=qc(e);if(a.has("search")){let s=a.get("search").replaceAll('"',""),r=a.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:r?s:s.match(/\S+/g)})}if(a.has("page")&&(t=a.get("page")|0||1),a.has("zoom")){let s=a.get("zoom").split(","),r=s[0],o=parseFloat(r);r.includes("Fit")?r==="Fit"||r==="FitB"?n=[null,{name:r}]:r==="FitH"||r==="FitBH"||r==="FitV"||r==="FitBV"?n=[null,{name:r},s.length>1?s[1]|0:null]:r==="FitR"?s.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):n=[null,{name:r},s[1]|0,s[2]|0,s[3]|0,s[4]|0]:console.error(`PDFLinkService.setHash: "${r}" is not a valid zoom value.`):n=[null,{name:"XYZ"},s.length>1?s[1]|0:null,s.length>2?s[2]|0:null,o?o/100:r]}n?this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:n,allowNegativeOffset:!0}):t&&(this.page=t),a.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:a.get("pagemode")}),a.has("nameddest")&&this.goToDestination(a.get("nameddest"));return}n=unescape(e);try{n=JSON.parse(n),Array.isArray(n)||(n=n.toString())}catch{}if(typeof n=="string"||i.#e(n)){this.goToDestination(n);return}console.error(`PDFLinkService.setHash: "${unescape(e)}" is not a valid destination.`)}executeNamedAction(e){if(this.pdfDocument){switch(e){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break;default:break}this.eventBus.dispatch("namedaction",{source:this,action:e})}}executeSetOCGState(e){return A(this,null,function*(){if(!this.pdfDocument)return;let t=this.pdfDocument,n=yield this.pdfViewer.optionalContentConfigPromise;t===this.pdfDocument&&(n.setOCGState(e),this.pdfViewer.optionalContentConfigPromise=Promise.resolve(n))})}static#e(e){if(!Array.isArray(e)||e.length<2)return!1;let[t,n,...a]=e;if(!(typeof t=="object"&&Number.isInteger(t?.num)&&Number.isInteger(t?.gen))&&!Number.isInteger(t)||!(typeof n=="object"&&typeof n?.name=="string"))return!1;let s=a.length,r=!0;switch(n.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;r=!1;break;default:return!1}for(let o of a)if(!(typeof o=="number"||r&&o===null))return!1;return!0}},Ls=class extends Tc{setDocument(e,t=null){}},{AbortException:w8,AnnotationEditorLayer:b8,AnnotationEditorParamsType:KO,AnnotationEditorType:at,AnnotationEditorUIManager:C8,AnnotationLayer:x8,AnnotationMode:tn,build:YO,ColorPicker:QO,createValidAbsoluteUrl:I8,DOMSVGFactory:JO,DrawLayer:A8,FeatureTest:eF,fetchData:Vy,getDocument:tF,getFilenameFromUrl:nF,getPdfFilenameFromUrl:S8,getXfaPageViewport:iF,GlobalWorkerOptions:aF,ImageKind:sF,InvalidPDFException:rF,isDataScheme:oF,isPdfFile:E8,MissingPDFException:cF,noContextMenu:lF,normalizeUnicode:L8,OPS:dF,OutputScale:_8,PasswordResponses:hF,PDFDataRangeTransport:uF,PDFDateString:pF,PDFWorker:fF,PermissionFlag:Ec,PixelsPerInch:en,RenderingCancelledException:Wu,setLayerDimensions:D8,shadow:Pc,TextLayer:T8,UnexpectedResponseException:gF,Util:yF,VerbosityLevel:mF,version:zy,XfaLayer:Hu}=globalThis.pdfjsLib,Rc=class{#e=null;#t=null;constructor({pdfPage:e,linkService:t,downloadManager:n,annotationStorage:a=null,imageResourcesPath:s="",renderForms:r=!0,enableScripting:o=!1,hasJSActionsPromise:c=null,fieldObjectsPromise:l=null,annotationCanvasMap:d=null,accessibilityManager:h=null,annotationEditorUIManager:u=null,onAppend:p=null}){this.pdfPage=e,this.linkService=t,this.downloadManager=n,this.imageResourcesPath=s,this.renderForms=r,this.annotationStorage=a,this.enableScripting=o,this._hasJSActionsPromise=c||Promise.resolve(!1),this._fieldObjectsPromise=l||Promise.resolve(null),this._annotationCanvasMap=d,this._accessibilityManager=h,this._annotationEditorUIManager=u,this.#e=p,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=t.eventBus}render(e,t,n="display"){return A(this,null,function*(){if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:e.clone({dontFlip:!0})});return}let[a,s,r]=yield Promise.all([this.pdfPage.getAnnotations({intent:n}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;let o=this.div=document.createElement("div");if(o.className="annotationLayer",this.#e?.(o),a.length===0){this.hide();return}this.annotationLayer=new x8({div:o,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,annotationEditorUIManager:this._annotationEditorUIManager,page:this.pdfPage,viewport:e.clone({dontFlip:!0}),structTreeLayer:t?.structTreeLayer||null}),yield this.annotationLayer.render({annotations:a,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:s,fieldObjects:r}),this.linkService.isInPresentationMode&&this.#n(na.FULLSCREEN),this.#t||(this.#t=new AbortController,this._eventBus?._on("presentationmodechanged",c=>{this.#n(c.state)},{signal:this.#t.signal}))})}cancel(){this._cancelled=!0,this.#t?.abort(),this.#t=null}hide(){this.div&&(this.div.hidden=!0)}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}#n(e){if(!this.div)return;let t=!1;switch(e){case na.FULLSCREEN:t=!0;break;case na.NORMAL:break;default:return}for(let n of this.div.childNodes)n.hasAttribute("data-internal-link")||(n.inert=t)}};function qy(i,e){let t=document.createElement("a");if(!t.click)throw new Error('DownloadManager: "a.click()" is not supported.');t.href=i,t.target="_parent","download"in t&&(t.download=e),(document.body||document.documentElement).append(t),t.click(),t.remove()}var $u=class{#e=new WeakMap;downloadData(e,t,n){let a=URL.createObjectURL(new Blob([e],{type:n}));qy(a,t)}openOrDownloadData(e,t,n=null){let s=E8(t)?"application/pdf":"";return this.downloadData(e,t,s),!1}download(e,t,n){let a;if(e)a=URL.createObjectURL(new Blob([e],{type:"application/pdf"}));else{if(!I8(t,"http://example.com")){console.error(`download - not a valid URL: ${t}`);return}a=t+"#pdfjs.action=download"}qy(a,n)}},Uy={EVENT:"event",TIMEOUT:"timeout"};function P8(n){return A(this,arguments,function*({target:i,name:e,delay:t=0}){if(typeof i!="object"||!(e&&typeof e=="string")||!(Number.isInteger(t)&&t>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");let{promise:a,resolve:s}=Promise.withResolvers(),r=new AbortController;function o(d){r.abort(),clearTimeout(l),s(d)}let c=i instanceof Oc?"_on":"addEventListener";i[c](e,o.bind(null,Uy.EVENT),{signal:r.signal});let l=setTimeout(o.bind(null,Uy.TIMEOUT),t);return a})}var Oc=class{#e=Object.create(null);on(e,t,n=null){this._on(e,t,{external:!0,once:n?.once,signal:n?.signal})}off(e,t,n=null){this._off(e,t)}dispatch(e,t){let n=this.#e[e];if(!n||n.length===0)return;let a;for(let{listener:s,external:r,once:o}of n.slice(0)){if(o&&this._off(e,s),r){(a||=[]).push(s);continue}s(t)}if(a){for(let s of a)s(t);a=null}}_on(e,t,n=null){let a=null;if(n?.signal instanceof AbortSignal){let{signal:r}=n;if(r.aborted){console.error("Cannot use an `aborted` signal.");return}let o=()=>this._off(e,t);a=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}(this.#e[e]||=[]).push({listener:t,external:n?.external===!0,once:n?.once===!0,rmAbort:a})}_off(e,t,n=null){let a=this.#e[e];if(a)for(let s=0,r=a.length;s<r;s++){let o=a[s];if(o.listener===t){o.rmAbort?.(),a.splice(s,1);return}}}};var ia=class{constructor(e){this.value=e}valueOf(){return this.value}},xe=class extends ia{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}},Et=class extends ia{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),this.value.toString(10)}}},di=class extends ia{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),new Date(this.value).toISOString()}}},Wy=100,R8="\u2068",O8="\u2069";function F8(i,e,t){if(t===e||t instanceof Et&&e instanceof Et&&t.value===e.value)return!0;if(e instanceof Et&&typeof t=="string"){let n=i.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value);if(t===n)return!0}return!1}function $y(i,e,t){return e[t]?aa(i,e[t].value):(i.reportError(new RangeError("No default")),new xe)}function Gu(i,e){let t=[],n=Object.create(null);for(let a of e)a.type==="narg"?n[a.name]=_s(i,a.value):t.push(_s(i,a));return{positional:t,named:n}}function _s(i,e){switch(e.type){case"str":return e.value;case"num":return new Et(e.value,{minimumFractionDigits:e.precision});case"var":return N8(i,e);case"mesg":return H8(i,e);case"term":return j8(i,e);case"func":return B8(i,e);case"select":return V8(i,e);default:return new xe}}function N8(i,{name:e}){let t;if(i.params)if(Object.prototype.hasOwnProperty.call(i.params,e))t=i.params[e];else return new xe(`$${e}`);else if(i.args&&Object.prototype.hasOwnProperty.call(i.args,e))t=i.args[e];else return i.reportError(new ReferenceError(`Unknown variable: $${e}`)),new xe(`$${e}`);if(t instanceof ia)return t;switch(typeof t){case"string":return t;case"number":return new Et(t);case"object":if(t instanceof Date)return new di(t.getTime());default:return i.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof t}`)),new xe(`$${e}`)}}function H8(i,{name:e,attr:t}){let n=i.bundle._messages.get(e);if(!n)return i.reportError(new ReferenceError(`Unknown message: ${e}`)),new xe(e);if(t){let a=n.attributes[t];return a?aa(i,a):(i.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new xe(`${e}.${t}`))}return n.value?aa(i,n.value):(i.reportError(new ReferenceError(`No value: ${e}`)),new xe(e))}function j8(i,{name:e,attr:t,args:n}){let a=`-${e}`,s=i.bundle._terms.get(a);if(!s)return i.reportError(new ReferenceError(`Unknown term: ${a}`)),new xe(a);if(t){let o=s.attributes[t];if(o){i.params=Gu(i,n).named;let c=aa(i,o);return i.params=null,c}return i.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new xe(`${a}.${t}`)}i.params=Gu(i,n).named;let r=aa(i,s.value);return i.params=null,r}function B8(i,{name:e,args:t}){let n=i.bundle._functions[e];if(!n)return i.reportError(new ReferenceError(`Unknown function: ${e}()`)),new xe(`${e}()`);if(typeof n!="function")return i.reportError(new TypeError(`Function ${e}() is not callable`)),new xe(`${e}()`);try{let a=Gu(i,t);return n(a.positional,a.named)}catch(a){return i.reportError(a),new xe(`${e}()`)}}function V8(i,{selector:e,variants:t,star:n}){let a=_s(i,e);if(a instanceof xe)return $y(i,t,n);for(let s of t){let r=_s(i,s.key);if(F8(i,a,r))return aa(i,s.value)}return $y(i,t,n)}function hm(i,e){if(i.dirty.has(e))return i.reportError(new RangeError("Cyclic reference")),new xe;i.dirty.add(e);let t=[],n=i.bundle._useIsolating&&e.length>1;for(let a of e){if(typeof a=="string"){t.push(i.bundle._transform(a));continue}if(i.placeables++,i.placeables>Wy)throw i.dirty.delete(e),new RangeError(`Too many placeables expanded: ${i.placeables}, max allowed is ${Wy}`);n&&t.push(R8),t.push(_s(i,a).toString(i)),n&&t.push(O8)}return i.dirty.delete(e),t.join("")}function aa(i,e){return typeof e=="string"?i.bundle._transform(e):hm(i,e)}var Xu=class{constructor(e,t,n){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=t,this.args=n}reportError(e){if(!this.errors||!(e instanceof Error))throw e;this.errors.push(e)}memoizeIntlObject(e,t){let n=this.bundle._intls.get(e);n||(n={},this.bundle._intls.set(e,n));let a=JSON.stringify(t);return n[a]||(n[a]=new e(this.bundle.locales,t)),n[a]}};function Fc(i,e){let t=Object.create(null);for(let[n,a]of Object.entries(i))e.includes(n)&&(t[n]=a.valueOf());return t}var Gy=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function z8(i,e){let t=i[0];if(t instanceof xe)return new xe(`NUMBER(${t.valueOf()})`);if(t instanceof Et)return new Et(t.valueOf(),D(D({},t.opts),Fc(e,Gy)));if(t instanceof di)return new Et(t.valueOf(),D({},Fc(e,Gy)));throw new TypeError("Invalid argument to NUMBER")}var Xy=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function q8(i,e){let t=i[0];if(t instanceof xe)return new xe(`DATETIME(${t.valueOf()})`);if(t instanceof di)return new di(t.valueOf(),D(D({},t.opts),Fc(e,Xy)));if(t instanceof Et)return new di(t.valueOf(),D({},Fc(e,Xy)));throw new TypeError("Invalid argument to DATETIME")}var Zy=new Map;function U8(i){let e=Array.isArray(i)?i.join(" "):i,t=Zy.get(e);return t===void 0&&(t=new Map,Zy.set(e,t)),t}var Zu=class{constructor(e,{functions:t,useIsolating:n=!0,transform:a=s=>s}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(e)?e:[e],this._functions=D({NUMBER:z8,DATETIME:q8},t),this._useIsolating=n,this._transform=a,this._intls=U8(e)}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:t=!1}={}){let n=[];for(let a=0;a<e.body.length;a++){let s=e.body[a];if(s.id.startsWith("-")){if(t===!1&&this._terms.has(s.id)){n.push(new Error(`Attempt to override an existing term: "${s.id}"`));continue}this._terms.set(s.id,s)}else{if(t===!1&&this._messages.has(s.id)){n.push(new Error(`Attempt to override an existing message: "${s.id}"`));continue}this._messages.set(s.id,s)}}return n}formatPattern(e,t=null,n=null){if(typeof e=="string")return this._transform(e);let a=new Xu(this,n,t);try{return hm(a,e).toString(a)}catch(s){if(a.errors&&s instanceof Error)return a.errors.push(s),new xe().toString(a);throw s}}},ju=/^(-?[a-zA-Z][\w-]*) *= */gm,Ky=/\.([a-zA-Z][\w-]*) *= */y,W8=/\*?\[/y,Bu=/(-?[0-9]+(?:\.([0-9]+))?)/y,$8=/([a-zA-Z][\w-]*)/y,Yy=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,G8=/^[A-Z][A-Z0-9_-]*$/,Lc=/([^{}\n\r]+)/y,X8=/([^\\"\n\r]*)/y,Qy=/\\([\\"])/y,Jy=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,Z8=/^\n+/,em=/ +$/,K8=/ *\r?\n/g,Y8=/( *)$/,Q8=/{\s*/y,tm=/\s*}/y,J8=/\[\s*/y,e6=/\s*] */y,t6=/\s*\(\s*/y,n6=/\s*->\s*/y,i6=/\s*:\s*/y,a6=/\s*,?\s*/y,s6=/\s+/y,Ku=class{constructor(e){this.body=[],ju.lastIndex=0;let t=0;for(;;){let w=ju.exec(e);if(w===null)break;t=ju.lastIndex;try{this.body.push(c(w[1]))}catch(x){if(x instanceof SyntaxError)continue;throw x}}function n(w){return w.lastIndex=t,w.test(e)}function a(w,x){if(e[t]===w)return t++,!0;if(x)throw new x(`Expected ${w}`);return!1}function s(w,x){if(n(w))return t=w.lastIndex,!0;if(x)throw new x(`Expected ${w.toString()}`);return!1}function r(w){w.lastIndex=t;let x=w.exec(e);if(x===null)throw new SyntaxError(`Expected ${w.toString()}`);return t=w.lastIndex,x}function o(w){return r(w)[1]}function c(w){let x=d(),L=l();if(x===null&&Object.keys(L).length===0)throw new SyntaxError("Expected message value or attributes");return{id:w,value:x,attributes:L}}function l(){let w=Object.create(null);for(;n(Ky);){let x=o(Ky),L=d();if(L===null)throw new SyntaxError("Expected attribute value");w[x]=L}return w}function d(){let w;if(n(Lc)&&(w=o(Lc)),e[t]==="{"||e[t]==="}")return h(w?[w]:[],1/0);let x=b();return x?w?h([w,x],x.length):(x.value=I(x.value,Z8),h([x],x.length)):w?I(w,em):null}function h(w=[],x){for(;;){if(n(Lc)){w.push(o(Lc));continue}if(e[t]==="{"){w.push(u());continue}if(e[t]==="}")throw new SyntaxError("Unbalanced closing brace");let $=b();if($){w.push($),x=Math.min(x,$.length);continue}break}let L=w.length-1,ee=w[L];typeof ee=="string"&&(w[L]=I(ee,em));let Q=[];for(let $ of w)$ instanceof Nc&&($=$.value.slice(0,$.value.length-x)),$&&Q.push($);return Q}function u(){s(Q8,SyntaxError);let w=p();if(s(tm))return w;if(s(n6)){let x=m();return s(tm,SyntaxError),D({type:"select",selector:w},x)}throw new SyntaxError("Unclosed placeable")}function p(){if(e[t]==="{")return u();if(n(Yy)){let[,w,x,L=null]=r(Yy);if(w==="$")return{type:"var",name:x};if(s(t6)){let ee=f();if(w==="-")return{type:"term",name:x,attr:L,args:ee};if(G8.test(x))return{type:"func",name:x,args:ee};throw new SyntaxError("Function names must be all upper-case")}return w==="-"?{type:"term",name:x,attr:L,args:[]}:{type:"mesg",name:x,attr:L}}return v()}function f(){let w=[];for(;;){switch(e[t]){case")":return t++,w;case void 0:throw new SyntaxError("Unclosed argument list")}w.push(g()),s(a6)}}function g(){let w=p();return w.type!=="mesg"?w:s(i6)?{type:"narg",name:w.name,value:v()}:w}function m(){let w=[],x=0,L;for(;n(W8);){a("*")&&(L=x);let ee=y(),Q=d();if(Q===null)throw new SyntaxError("Expected variant value");w[x++]={key:ee,value:Q}}if(x===0)return null;if(L===void 0)throw new SyntaxError("Expected default variant");return{variants:w,star:L}}function y(){s(J8,SyntaxError);let w;return n(Bu)?w=M():w={type:"str",value:o($8)},s(e6,SyntaxError),w}function v(){if(n(Bu))return M();if(e[t]==='"')return k();throw new SyntaxError("Invalid expression")}function M(){let[,w,x=""]=r(Bu),L=x.length;return{type:"num",value:parseFloat(w),precision:L}}function k(){a('"',SyntaxError);let w="";for(;;){if(w+=o(X8),e[t]==="\\"){w+=C();continue}if(a('"'))return{type:"str",value:w};throw new SyntaxError("Unclosed string literal")}}function C(){if(n(Qy))return o(Qy);if(n(Jy)){let[,w,x]=r(Jy),L=parseInt(w||x,16);return L<=55295||57344<=L?String.fromCodePoint(L):"\uFFFD"}throw new SyntaxError("Unknown escape sequence")}function b(){let w=t;switch(s(s6),e[t]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return E(e.slice(w,t))}return e[t-1]===" "?E(e.slice(w,t)):!1}function I(w,x){return w.replace(x,"")}function E(w){let x=w.replace(K8,`
`),L=Y8.exec(w)[1].length;return new Nc(x,L)}}},Nc=class{constructor(e,t){this.value=e,this.length=t}},r6=/<|&#?\w+;/,o6={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},c6={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function l6(i,e){let{value:t}=e;if(typeof t=="string")if(i.localName==="title"&&i.namespaceURI==="http://www.w3.org/1999/xhtml")i.textContent=t;else if(!r6.test(t))i.textContent=t;else{let n=i.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");n.innerHTML=t,d6(n.content,i)}um(e,i)}function d6(i,e){for(let t of i.childNodes)if(t.nodeType!==t.TEXT_NODE){if(t.hasAttribute("data-l10n-name")){let n=u6(e,t);i.replaceChild(n,t);continue}if(f6(t)){let n=p6(t);i.replaceChild(n,t);continue}console.warn(`An element of forbidden type "${t.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),i.replaceChild(Yu(t),t)}e.textContent="",e.appendChild(i)}function h6(i,e){if(!i)return!1;for(let t of i)if(t.name===e)return!0;return!1}function um(i,e){let t=e.hasAttribute("data-l10n-attrs")?e.getAttribute("data-l10n-attrs").split(",").map(n=>n.trim()):null;for(let n of Array.from(e.attributes))nm(n.name,e,t)&&!h6(i.attributes,n.name)&&e.removeAttribute(n.name);if(i.attributes)for(let n of Array.from(i.attributes))nm(n.name,e,t)&&e.getAttribute(n.name)!==n.value&&e.setAttribute(n.name,n.value)}function u6(i,e){let t=e.getAttribute("data-l10n-name"),n=i.querySelector(`[data-l10n-name="${t}"]`);if(!n)return console.warn(`An element named "${t}" wasn't found in the source.`),Yu(e);if(n.localName!==e.localName)return console.warn(`An element named "${t}" was found in the translation but its type ${e.localName} didn't match the element found in the source (${n.localName}).`),Yu(e);i.removeChild(n);let a=n.cloneNode(!1);return pm(e,a)}function p6(i){let e=i.ownerDocument.createElement(i.localName);return pm(i,e)}function Yu(i){return i.ownerDocument.createTextNode(i.textContent)}function f6(i){let e=o6[i.namespaceURI];return e&&e.includes(i.localName)}function nm(i,e,t=null){if(t&&t.includes(i))return!0;let n=c6[e.namespaceURI];if(!n)return!1;let a=i.toLowerCase(),s=e.localName;if(n.global.includes(a))return!0;if(!n[s])return!1;if(n[s].includes(a))return!0;if(e.namespaceURI==="http://www.w3.org/1999/xhtml"&&s==="input"&&a==="value"){let r=e.type.toLowerCase();if(r==="submit"||r==="button"||r==="reset")return!0}return!1}function pm(i,e){return e.textContent=i.textContent,um(i,e),e}var Qu=class extends Array{static from(e){return e instanceof this?e:new this(e)}};var Ju=class extends Qu{constructor(e){if(super(),Symbol.asyncIterator in Object(e))this.iterator=e[Symbol.asyncIterator]();else if(Symbol.iterator in Object(e))this.iterator=e[Symbol.iterator]();else throw new TypeError("Argument must implement the iteration protocol.")}[Symbol.asyncIterator](){let e=this,t=0;return{next(){return A(this,null,function*(){return e.length<=t&&e.push(e.iterator.next()),e[t++]})}}}touchNext(e=1){return A(this,null,function*(){let t=0;for(;t++<e;){let n=this[this.length-1];if(n&&(yield n).done)break;this.push(this.iterator.next())}return this[this.length-1]})}},ep=class{constructor(e=[],t){this.resourceIds=e,this.generateBundles=t,this.onChange(!0)}addResourceIds(e,t=!1){return this.resourceIds.push(...e),this.onChange(t),this.resourceIds.length}removeResourceIds(e){return this.resourceIds=this.resourceIds.filter(t=>!e.includes(t)),this.onChange(),this.resourceIds.length}formatWithFallback(e,t){return A(this,null,function*(){let n=[],a=!1;try{for(var s=Dp(this.bundles),r,o,c;r=!(o=yield s.next()).done;r=!1){let l=o.value;a=!0;let d=m6(t,l,e,n);if(d.size===0)break;if(typeof console<"u"){let h=l.locales[0],u=Array.from(d).join(", ");console.warn(`[fluent] Missing translations in ${h}: ${u}`)}}}catch{c=[o]}finally{try{r&&(o=s.return)&&(yield o.call(s))}finally{if(c)throw c[0]}}return!a&&typeof console<"u"&&console.warn(`[fluent] Request for keys failed because no resource bundles got generated.
  keys: ${JSON.stringify(e)}.
  resourceIds: ${JSON.stringify(this.resourceIds)}.`),n})}formatMessages(e){return this.formatWithFallback(e,y6)}formatValues(e){return this.formatWithFallback(e,g6)}formatValue(e,t){return A(this,null,function*(){let[n]=yield this.formatValues([{id:e,args:t}]);return n})}handleEvent(){this.onChange()}onChange(e=!1){this.bundles=Ju.from(this.generateBundles(this.resourceIds)),e&&this.bundles.touchNext(2)}};function g6(i,e,t,n){return t.value?i.formatPattern(t.value,n,e):null}function y6(i,e,t,n){let a={value:null,attributes:null};t.value&&(a.value=i.formatPattern(t.value,n,e));let s=Object.keys(t.attributes);if(s.length>0){a.attributes=new Array(s.length);for(let[r,o]of s.entries()){let c=i.formatPattern(t.attributes[o],n,e);a.attributes[r]={name:o,value:c}}}return a}function m6(i,e,t,n){let a=[],s=new Set;return t.forEach(({id:r,args:o},c)=>{if(n[c]!==void 0)return;let l=e.getMessage(r);if(l){if(a.length=0,n[c]=i(e,a,l,o),a.length>0&&typeof console<"u"){let d=e.locales[0],h=a.join(", ");console.warn(`[fluent][resolver] errors in ${d}/${r}: ${h}.`)}}else s.add(r)}),s}var li="data-l10n-id",Is="data-l10n-args",k6=`[${li}]`,tp=class extends ep{constructor(e,t){super(e,t),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[li,Is]}}onChange(e=!1){super.onChange(e),this.roots&&this.translateRoots()}setAttributes(e,t,n){return e.setAttribute(li,t),n?e.setAttribute(Is,JSON.stringify(n)):e.removeAttribute(Is),e}getAttributes(e){return{id:e.getAttribute(li),args:JSON.parse(e.getAttribute(Is)||null)}}connectRoot(e){for(let t of this.roots)if(t===e||t.contains(e)||e.contains(t))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==e.ownerDocument.defaultView)throw new Error(`Cannot connect a root:
          DOMLocalization already has a root from a different window.`)}else this.windowElement=e.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(t=>this.translateMutations(t));this.roots.add(e),this.mutationObserver.observe(e,this.observerConfig)}disconnectRoot(e){return this.roots.delete(e),this.pauseObserving(),this.roots.size===0?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){let e=Array.from(this.roots);return Promise.all(e.map(t=>this.translateFragment(t)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(let e of this.roots)this.mutationObserver.observe(e,this.observerConfig)}translateMutations(e){for(let t of e)switch(t.type){case"attributes":t.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(t.target);break;case"childList":for(let n of t.addedNodes)if(n.nodeType===n.ELEMENT_NODE)if(n.childElementCount)for(let a of this.getTranslatables(n))this.pendingElements.add(a);else n.hasAttribute(li)&&this.pendingElements.add(n);break}this.pendingElements.size>0&&this.pendingrAF===null&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(e){return this.translateElements(this.getTranslatables(e))}translateElements(e){return A(this,null,function*(){if(!e.length)return;let t=e.map(this.getKeysForElement),n=yield this.formatMessages(t);return this.applyTranslations(e,n)})}applyTranslations(e,t){this.pauseObserving();for(let n=0;n<e.length;n++)t[n]!==void 0&&l6(e[n],t[n]);this.resumeObserving()}getTranslatables(e){let t=Array.from(e.querySelectorAll(k6));return typeof e.hasAttribute=="function"&&e.hasAttribute(li)&&t.push(e),t}getKeysForElement(e){return{id:e.getAttribute(li),args:JSON.parse(e.getAttribute(Is)||null)}}},np=class i{#e;#t;#n;#i;constructor({lang:e,isRTL:t},n=null){this.#n=i.#a(e),this.#i=n,this.#e=t??i.#s(this.#n)?"rtl":"ltr"}_setL10n(e){this.#i=e}getLanguage(){return this.#n}getDirection(){return this.#e}get(e,t=null,n){return A(this,null,function*(){return Array.isArray(e)?(e=e.map(r=>({id:r})),(yield this.#i.formatMessages(e)).map(r=>r.value)):(yield this.#i.formatMessages([{id:e,args:t}]))[0]?.value||n})}translate(e){return A(this,null,function*(){(this.#t||=new Set).add(e);try{this.#i.connectRoot(e),yield this.#i.translateRoots()}catch{}})}translateOnce(e){return A(this,null,function*(){try{yield this.#i.translateElements([e])}catch(t){console.error(`translateOnce: "${t}".`)}})}destroy(){return A(this,null,function*(){if(this.#t){for(let e of this.#t)this.#i.disconnectRoot(e);this.#t.clear(),this.#t=null}this.#i.pauseObserving()})}pause(){this.#i.pauseObserving()}resume(){this.#i.resumeObserving()}static#a(e){return e=e?.toLowerCase()||"en-us",{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[e]||e}static#s(e){let t=e.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(t)}};function im(i,e){let t=new Ku(e),n=new Zu(i),a=n.addResource(t);return a.length&&console.error("L10n errors",a),n}var sa=class i extends np{constructor(e){super({lang:e});let t=e?i.#e.bind(i,"en-us",this.getLanguage()):i.#i.bind(i,this.getLanguage());this._setL10n(new tp([],t))}static#e(e,t){return Kc(this,null,function*(){let{baseURL:n,paths:a}=yield new Rs(this.#n()),s=[t];if(e!==t){let r=t.split("-",1)[0];r!==t&&s.push(r),s.push(e)}for(let r of s){let o=yield new Rs(this.#t(r,n,a));o?yield o:r==="en-us"&&(yield this.#a(r))}})}static#t(e,t,n){return A(this,null,function*(){let a=n[e];if(!a)return null;let s=new URL(a,t),r=yield Vy(s,"text");return im(e,r)})}static#n(){return A(this,null,function*(){try{let{href:e}=document.querySelector('link[type="application/l10n"]'),t=yield Vy(e,"json");return{baseURL:e.replace(/[^/]*$/,"")||"./",paths:t}}catch{}return{baseURL:"./",paths:Object.create(null)}})}static#i(e){return Kc(this,null,function*(){yield this.#a(e)})}static#a(e){return A(this,null,function*(){return im(e,`pdfjs-previous-button =
    .title = Previous Page
pdfjs-previous-button-label = Previous
pdfjs-next-button =
    .title = Next Page
pdfjs-next-button-label = Next
pdfjs-page-input =
    .title = Page
pdfjs-of-pages = of { $pagesCount }
pdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })
pdfjs-zoom-out-button =
    .title = Zoom Out
pdfjs-zoom-out-button-label = Zoom Out
pdfjs-zoom-in-button =
    .title = Zoom In
pdfjs-zoom-in-button-label = Zoom In
pdfjs-zoom-select =
    .title = Zoom
pdfjs-presentation-mode-button =
    .title = Switch to Presentation Mode
pdfjs-presentation-mode-button-label = Presentation Mode
pdfjs-open-file-button =
    .title = Open File
pdfjs-open-file-button-label = Open
pdfjs-print-button =
    .title = Print
pdfjs-print-button-label = Print
pdfjs-save-button =
    .title = Save
pdfjs-save-button-label = Save
pdfjs-download-button =
    .title = Download
pdfjs-download-button-label = Download
pdfjs-bookmark-button =
    .title = Current Page (View URL from Current Page)
pdfjs-bookmark-button-label = Current Page
pdfjs-tools-button =
    .title = Tools
pdfjs-tools-button-label = Tools
pdfjs-first-page-button =
    .title = Go to First Page
pdfjs-first-page-button-label = Go to First Page
pdfjs-last-page-button =
    .title = Go to Last Page
pdfjs-last-page-button-label = Go to Last Page
pdfjs-page-rotate-cw-button =
    .title = Rotate Clockwise
pdfjs-page-rotate-cw-button-label = Rotate Clockwise
pdfjs-page-rotate-ccw-button =
    .title = Rotate Counterclockwise
pdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise
pdfjs-cursor-text-select-tool-button =
    .title = Enable Text Selection Tool
pdfjs-cursor-text-select-tool-button-label = Text Selection Tool
pdfjs-cursor-hand-tool-button =
    .title = Enable Hand Tool
pdfjs-cursor-hand-tool-button-label = Hand Tool
pdfjs-scroll-page-button =
    .title = Use Page Scrolling
pdfjs-scroll-page-button-label = Page Scrolling
pdfjs-scroll-vertical-button =
    .title = Use Vertical Scrolling
pdfjs-scroll-vertical-button-label = Vertical Scrolling
pdfjs-scroll-horizontal-button =
    .title = Use Horizontal Scrolling
pdfjs-scroll-horizontal-button-label = Horizontal Scrolling
pdfjs-scroll-wrapped-button =
    .title = Use Wrapped Scrolling
pdfjs-scroll-wrapped-button-label = Wrapped Scrolling
pdfjs-spread-none-button =
    .title = Do not join page spreads
pdfjs-spread-none-button-label = No Spreads
pdfjs-spread-odd-button =
    .title = Join page spreads starting with odd-numbered pages
pdfjs-spread-odd-button-label = Odd Spreads
pdfjs-spread-even-button =
    .title = Join page spreads starting with even-numbered pages
pdfjs-spread-even-button-label = Even Spreads
pdfjs-document-properties-button =
    .title = Document Properties\u2026
pdfjs-document-properties-button-label = Document Properties\u2026
pdfjs-document-properties-file-name = File name:
pdfjs-document-properties-file-size = File size:
pdfjs-document-properties-size-kb = { NUMBER($kb, maximumSignificantDigits: 3) } KB ({ $b } bytes)
pdfjs-document-properties-size-mb = { NUMBER($mb, maximumSignificantDigits: 3) } MB ({ $b } bytes)
pdfjs-document-properties-title = Title:
pdfjs-document-properties-author = Author:
pdfjs-document-properties-subject = Subject:
pdfjs-document-properties-keywords = Keywords:
pdfjs-document-properties-creation-date = Creation Date:
pdfjs-document-properties-modification-date = Modification Date:
pdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }
pdfjs-document-properties-creator = Creator:
pdfjs-document-properties-producer = PDF Producer:
pdfjs-document-properties-version = PDF Version:
pdfjs-document-properties-page-count = Page Count:
pdfjs-document-properties-page-size = Page Size:
pdfjs-document-properties-page-size-unit-inches = in
pdfjs-document-properties-page-size-unit-millimeters = mm
pdfjs-document-properties-page-size-orientation-portrait = portrait
pdfjs-document-properties-page-size-orientation-landscape = landscape
pdfjs-document-properties-page-size-name-a-three = A3
pdfjs-document-properties-page-size-name-a-four = A4
pdfjs-document-properties-page-size-name-letter = Letter
pdfjs-document-properties-page-size-name-legal = Legal
pdfjs-document-properties-page-size-dimension-string = { $width } \xD7 { $height } { $unit } ({ $orientation })
pdfjs-document-properties-page-size-dimension-name-string = { $width } \xD7 { $height } { $unit } ({ $name }, { $orientation })
pdfjs-document-properties-linearized = Fast Web View:
pdfjs-document-properties-linearized-yes = Yes
pdfjs-document-properties-linearized-no = No
pdfjs-document-properties-close-button = Close
pdfjs-print-progress-message = Preparing document for printing\u2026
pdfjs-print-progress-percent = { $progress }%
pdfjs-print-progress-close-button = Cancel
pdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.
pdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.
pdfjs-toggle-sidebar-button =
    .title = Toggle Sidebar
pdfjs-toggle-sidebar-notification-button =
    .title = Toggle Sidebar (document contains outline/attachments/layers)
pdfjs-toggle-sidebar-button-label = Toggle Sidebar
pdfjs-document-outline-button =
    .title = Show Document Outline (double-click to expand/collapse all items)
pdfjs-document-outline-button-label = Document Outline
pdfjs-attachments-button =
    .title = Show Attachments
pdfjs-attachments-button-label = Attachments
pdfjs-layers-button =
    .title = Show Layers (double-click to reset all layers to the default state)
pdfjs-layers-button-label = Layers
pdfjs-thumbs-button =
    .title = Show Thumbnails
pdfjs-thumbs-button-label = Thumbnails
pdfjs-current-outline-item-button =
    .title = Find Current Outline Item
pdfjs-current-outline-item-button-label = Current Outline Item
pdfjs-findbar-button =
    .title = Find in Document
pdfjs-findbar-button-label = Find
pdfjs-additional-layers = Additional Layers
pdfjs-thumb-page-title =
    .title = Page { $page }
pdfjs-thumb-page-canvas =
    .aria-label = Thumbnail of Page { $page }
pdfjs-find-input =
    .title = Find
    .placeholder = Find in document\u2026
pdfjs-find-previous-button =
    .title = Find the previous occurrence of the phrase
pdfjs-find-previous-button-label = Previous
pdfjs-find-next-button =
    .title = Find the next occurrence of the phrase
pdfjs-find-next-button-label = Next
pdfjs-find-highlight-checkbox = Highlight All
pdfjs-find-match-case-checkbox-label = Match Case
pdfjs-find-match-diacritics-checkbox-label = Match Diacritics
pdfjs-find-entire-word-checkbox-label = Whole Words
pdfjs-find-reached-top = Reached top of document, continued from bottom
pdfjs-find-reached-bottom = Reached end of document, continued from top
pdfjs-find-match-count =
    { $total ->
        [one] { $current } of { $total } match
       *[other] { $current } of { $total } matches
    }
pdfjs-find-match-count-limit =
    { $limit ->
        [one] More than { $limit } match
       *[other] More than { $limit } matches
    }
pdfjs-find-not-found = Phrase not found
pdfjs-page-scale-width = Page Width
pdfjs-page-scale-fit = Page Fit
pdfjs-page-scale-auto = Automatic Zoom
pdfjs-page-scale-actual = Actual Size
pdfjs-page-scale-percent = { $scale }%
pdfjs-page-landmark =
    .aria-label = Page { $page }
pdfjs-loading-error = An error occurred while loading the PDF.
pdfjs-invalid-file-error = Invalid or corrupted PDF file.
pdfjs-missing-file-error = Missing PDF file.
pdfjs-unexpected-response-error = Unexpected server response.
pdfjs-rendering-error = An error occurred while rendering the page.
pdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }
pdfjs-text-annotation-type =
    .alt = [{ $type } Annotation]
pdfjs-password-label = Enter the password to open this PDF file.
pdfjs-password-invalid = Invalid password. Please try again.
pdfjs-password-ok-button = OK
pdfjs-password-cancel-button = Cancel
pdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.
pdfjs-editor-free-text-button =
    .title = Text
pdfjs-editor-free-text-button-label = Text
pdfjs-editor-ink-button =
    .title = Draw
pdfjs-editor-ink-button-label = Draw
pdfjs-editor-stamp-button =
    .title = Add or edit images
pdfjs-editor-stamp-button-label = Add or edit images
pdfjs-editor-highlight-button =
    .title = Highlight
pdfjs-editor-highlight-button-label = Highlight
pdfjs-highlight-floating-button1 =
    .title = Highlight
    .aria-label = Highlight
pdfjs-highlight-floating-button-label = Highlight
pdfjs-editor-remove-ink-button =
    .title = Remove drawing
pdfjs-editor-remove-freetext-button =
    .title = Remove text
pdfjs-editor-remove-stamp-button =
    .title = Remove image
pdfjs-editor-remove-highlight-button =
    .title = Remove highlight
pdfjs-editor-free-text-color-input = Color
pdfjs-editor-free-text-size-input = Size
pdfjs-editor-ink-color-input = Color
pdfjs-editor-ink-thickness-input = Thickness
pdfjs-editor-ink-opacity-input = Opacity
pdfjs-editor-stamp-add-image-button =
    .title = Add image
pdfjs-editor-stamp-add-image-button-label = Add image
pdfjs-editor-free-highlight-thickness-input = Thickness
pdfjs-editor-free-highlight-thickness-title =
    .title = Change thickness when highlighting items other than text
pdfjs-free-text2 =
    .aria-label = Text Editor
    .default-content = Start typing\u2026
pdfjs-ink =
    .aria-label = Draw Editor
pdfjs-ink-canvas =
    .aria-label = User-created image
pdfjs-editor-alt-text-button =
    .aria-label = Alt text
pdfjs-editor-alt-text-button-label = Alt text
pdfjs-editor-alt-text-edit-button =
    .aria-label = Edit alt text
pdfjs-editor-alt-text-dialog-label = Choose an option
pdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can\u2019t see the image or when it doesn\u2019t load.
pdfjs-editor-alt-text-add-description-label = Add a description
pdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.
pdfjs-editor-alt-text-mark-decorative-label = Mark as decorative
pdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.
pdfjs-editor-alt-text-cancel-button = Cancel
pdfjs-editor-alt-text-save-button = Save
pdfjs-editor-alt-text-decorative-tooltip = Marked as decorative
pdfjs-editor-alt-text-textarea =
    .placeholder = For example, \u201CA young man sits down at a table to eat a meal\u201D
pdfjs-editor-resizer-top-left =
    .aria-label = Top left corner \u2014 resize
pdfjs-editor-resizer-top-middle =
    .aria-label = Top middle \u2014 resize
pdfjs-editor-resizer-top-right =
    .aria-label = Top right corner \u2014 resize
pdfjs-editor-resizer-middle-right =
    .aria-label = Middle right \u2014 resize
pdfjs-editor-resizer-bottom-right =
    .aria-label = Bottom right corner \u2014 resize
pdfjs-editor-resizer-bottom-middle =
    .aria-label = Bottom middle \u2014 resize
pdfjs-editor-resizer-bottom-left =
    .aria-label = Bottom left corner \u2014 resize
pdfjs-editor-resizer-middle-left =
    .aria-label = Middle left \u2014 resize
pdfjs-editor-highlight-colorpicker-label = Highlight color
pdfjs-editor-colorpicker-button =
    .title = Change color
pdfjs-editor-colorpicker-dropdown =
    .aria-label = Color choices
pdfjs-editor-colorpicker-yellow =
    .title = Yellow
pdfjs-editor-colorpicker-green =
    .title = Green
pdfjs-editor-colorpicker-blue =
    .title = Blue
pdfjs-editor-colorpicker-pink =
    .title = Pink
pdfjs-editor-colorpicker-red =
    .title = Red
pdfjs-editor-highlight-show-all-button-label = Show all
pdfjs-editor-highlight-show-all-button =
    .title = Show all
pdfjs-editor-new-alt-text-dialog-edit-label = Edit alt text (image description)
pdfjs-editor-new-alt-text-dialog-add-label = Add alt text (image description)
pdfjs-editor-new-alt-text-textarea =
    .placeholder = Write your description here\u2026
pdfjs-editor-new-alt-text-description = Short description for people who can\u2019t see the image or when the image doesn\u2019t load.
pdfjs-editor-new-alt-text-disclaimer1 = This alt text was created automatically and may be inaccurate.
pdfjs-editor-new-alt-text-disclaimer-learn-more-url = Learn more
pdfjs-editor-new-alt-text-create-automatically-button-label = Create alt text automatically
pdfjs-editor-new-alt-text-not-now-button = Not now
pdfjs-editor-new-alt-text-error-title = Couldn\u2019t create alt text automatically
pdfjs-editor-new-alt-text-error-description = Please write your own alt text or try again later.
pdfjs-editor-new-alt-text-error-close-button = Close
pdfjs-editor-new-alt-text-ai-model-downloading-progress = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)
    .aria-valuetext = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)
pdfjs-editor-new-alt-text-added-button =
    .aria-label = Alt text added
pdfjs-editor-new-alt-text-added-button-label = Alt text added
pdfjs-editor-new-alt-text-missing-button =
    .aria-label = Missing alt text
pdfjs-editor-new-alt-text-missing-button-label = Missing alt text
pdfjs-editor-new-alt-text-to-review-button =
    .aria-label = Review alt text
pdfjs-editor-new-alt-text-to-review-button-label = Review alt text
pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer = Created automatically: { $generatedAltText }
pdfjs-image-alt-text-settings-button =
    .title = Image alt text settings
pdfjs-image-alt-text-settings-button-label = Image alt text settings
pdfjs-editor-alt-text-settings-dialog-label = Image alt text settings
pdfjs-editor-alt-text-settings-automatic-title = Automatic alt text
pdfjs-editor-alt-text-settings-create-model-button-label = Create alt text automatically
pdfjs-editor-alt-text-settings-create-model-description = Suggests descriptions to help people who can\u2019t see the image or when the image doesn\u2019t load.
pdfjs-editor-alt-text-settings-download-model-label = Alt text AI model ({ $totalSize } MB)
pdfjs-editor-alt-text-settings-ai-model-description = Runs locally on your device so your data stays private. Required for automatic alt text.
pdfjs-editor-alt-text-settings-delete-model-button = Delete
pdfjs-editor-alt-text-settings-download-model-button = Download
pdfjs-editor-alt-text-settings-downloading-model-button = Downloading\u2026
pdfjs-editor-alt-text-settings-editor-title = Alt text editor
pdfjs-editor-alt-text-settings-show-dialog-button-label = Show alt text editor right away when adding an image
pdfjs-editor-alt-text-settings-show-dialog-description = Helps you make sure all your images have alt text.
pdfjs-editor-alt-text-settings-close-button = Close`)})}},v6=1e3,Vu=50,am=1e3;function zu(){return document.location.hash}var ip=class{#e=null;constructor({linkService:e,eventBus:t}){this.linkService=e,this.eventBus=t,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",n=>{this._isPagesLoaded=!!n.pagesCount},{once:!0})})}initialize({fingerprint:e,resetHistory:t=!1,updateUrl:n=!1}){if(!e||typeof e!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();let a=this._fingerprint!==""&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=n===!0,this._initialized=!0,this.#h();let s=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=zu(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this.#a(s,!0)||t){let{hash:o,page:c,rotation:l}=this.#c(!0);if(!o||a||t){this.#t(null,!0);return}this.#t({hash:o,page:c,rotation:l},!0);return}let r=s.destination;this.#s(r,s.uid,!0),r.rotation!==void 0&&(this._initialRotation=r.rotation),r.dest?(this._initialBookmark=JSON.stringify(r.dest),this._destination.page=null):r.hash?this._initialBookmark=r.hash:r.page&&(this._initialBookmark=`page=${r.page}`)}reset(){this._initialized&&(this.#o(),this._initialized=!1,this.#r()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:e=null,explicitDest:t,pageNumber:n}){if(!this._initialized)return;if(e&&typeof e!="string"){console.error(`PDFHistory.push: "${e}" is not a valid namedDest parameter.`);return}else if(Array.isArray(t)){if(!this.#i(n)&&(n!==null||this._destination)){console.error(`PDFHistory.push: "${n}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${t}" is not a valid explicitDest parameter.`);return}let a=e||JSON.stringify(t);if(!a)return;let s=!1;if(this._destination&&(M6(this._destination.hash,a)||w6(this._destination.dest,t))){if(this._destination.page)return;s=!0}this._popStateInProgress&&!s||(this.#t({dest:t,hash:a,page:n,rotation:this.linkService.rotation},s),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(e){if(this._initialized){if(!this.#i(e)){console.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`);return}this._destination?.page!==e&&(this._popStateInProgress||(this.#t({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this.#n()}back(){if(!this._initialized||this._popStateInProgress)return;let e=window.history.state;this.#a(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;let e=window.history.state;this.#a(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}#t(e,t=!1){let n=t||!this._destination,a={fingerprint:this._fingerprint,uid:n?this._uid:this._uid+1,destination:e};this.#s(e,a.uid);let s;if(this._updateUrl&&e?.hash){let r=document.location.href.split("#",1)[0];r.startsWith("file://")||(s=`${r}#${e.hash}`)}n?window.history.replaceState(a,"",s):window.history.pushState(a,"",s)}#n(e=!1){if(!this._position)return;let t=this._position;if(e&&(t=Object.assign(Object.create(null),this._position),t.temporary=!0),!this._destination){this.#t(t);return}if(this._destination.temporary){this.#t(t,!0);return}if(this._destination.hash===t.hash||!this._destination.page&&(Vu<=0||this._numPositionUpdates<=Vu))return;let n=!1;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(this._destination.dest!==void 0||!this._destination.first)return;n=!0}this.#t(t,n)}#i(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}#a(e,t=!1){if(!e)return!1;if(e.fingerprint!==this._fingerprint)if(t){if(typeof e.fingerprint!="string"||e.fingerprint.length!==this._fingerprint.length)return!1;let[n]=performance.getEntriesByType("navigation");if(n?.type!=="reload")return!1}else return!1;return!(!Number.isInteger(e.uid)||e.uid<0||e.destination===null||typeof e.destination!="object")}#s(e,t,n=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),n&&e?.temporary&&delete e.temporary,this._destination=e,this._uid=t,this._maxUid=Math.max(this._maxUid,t),this._numPositionUpdates=0}#c(e=!1){let t=unescape(zu()).substring(1),n=qc(t),a=n.get("nameddest")||"",s=n.get("page")|0;return(!this.#i(s)||e&&a.length>0)&&(s=null),{hash:t,page:s,rotation:this.linkService.rotation}}#l({location:e}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation},!this._popStateInProgress&&(Vu>0&&this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,am>0&&(this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this.#n(!0),this._updateViewareaTimeout=null},am)))}#d({state:e}){let t=zu(),n=this._currentHash!==t;if(this._currentHash=t,!e){this._uid++;let{hash:s,page:r,rotation:o}=this.#c();this.#t({hash:s,page:r,rotation:o},!0);return}if(!this.#a(e))return;this._popStateInProgress=!0,n&&(this._blockHashChange++,P8({target:window,name:"hashchange",delay:v6}).then(()=>{this._blockHashChange--}));let a=e.destination;this.#s(a,e.uid,!0),dm(a.rotation)&&(this.linkService.rotation=a.rotation),a.dest?this.linkService.goToDestination(a.dest):a.hash?this.linkService.setHash(a.hash):a.page&&(this.linkService.page=a.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}#o(){(!this._destination||this._destination.temporary)&&this.#n()}#h(){if(this.#e)return;this.#e=new AbortController;let{signal:e}=this.#e;this.eventBus._on("updateviewarea",this.#l.bind(this),{signal:e}),window.addEventListener("popstate",this.#d.bind(this),{signal:e}),window.addEventListener("pagehide",this.#o.bind(this),{signal:e})}#r(){this.#e?.abort(),this.#e=null}};function M6(i,e){return typeof i!="string"||typeof e!="string"?!1:i===e||qc(i).get("nameddest")===e}function w6(i,e){function t(n,a){if(typeof n!=typeof a||Array.isArray(n)||Array.isArray(a))return!1;if(n!==null&&typeof n=="object"&&a!==null){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(let s in n)if(!t(n[s],a[s]))return!1;return!0}return n===a||Number.isNaN(n)&&Number.isNaN(a)}if(!(Array.isArray(i)&&Array.isArray(e))||i.length!==e.length)return!1;for(let n=0,a=i.length;n<a;n++)if(!t(i[n],e[n]))return!1;return!0}var ap=class{#e=null;#t=null;#n=null;#i=null;#a=null;#s;constructor(e){this.pdfPage=e.pdfPage,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n,this.l10n||=new sa,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#s=e.uiManager,this.#e=e.annotationLayer||null,this.#a=e.textLayer||null,this.#t=e.drawLayer||null,this.#n=e.onAppend||null,this.#i=e.structTreeLayer||null}render(e,t="display"){return A(this,null,function*(){if(t!=="display"||this._cancelled)return;let n=e.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:n}),this.show();return}let a=this.div=document.createElement("div");a.className="annotationEditorLayer",a.hidden=!0,a.dir=this.#s.direction,this.#n?.(a),this.annotationEditorLayer=new b8({uiManager:this.#s,div:a,structTreeLayer:this.#i,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:n,annotationLayer:this.#e,textLayer:this.#a,drawLayer:this.#t});let s={viewport:n,div:a,annotations:null,intent:t};this.annotationEditorLayer.render(s),this.show()})}cancel(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isInvisible||(this.div.hidden=!1)}};{Dc=new Map;let i=navigator.userAgent||"",e=navigator.platform||"",t=navigator.maxTouchPoints||1,n=/Android/.test(i),a=/\b(iPad|iPhone|iPod)(?=;)/.test(i)||e==="MacIntel"&&t>1;(function(){(a||n)&&Dc.set("maxCanvasPixels",5242880)})(),(function(){n&&Dc.set("useSystemFonts",!1)})()}var Dc,S={BROWSER:1,VIEWER:2,API:4,WORKER:8,EVENT_DISPATCH:16,PREFERENCE:128},sp={BOOLEAN:1,NUMBER:2,OBJECT:4,STRING:8,UNDEFINED:16},Ht={allowedGlobalEvents:{value:null,kind:S.BROWSER},canvasMaxAreaInBytes:{value:-1,kind:S.BROWSER+S.API},isInAutomation:{value:!1,kind:S.BROWSER},localeProperties:{value:{lang:navigator.language||"en-US"},kind:S.BROWSER},nimbusDataStr:{value:"",kind:S.BROWSER},supportsCaretBrowsingMode:{value:!1,kind:S.BROWSER},supportsDocumentFonts:{value:!0,kind:S.BROWSER},supportsIntegratedFind:{value:!1,kind:S.BROWSER},supportsMouseWheelZoomCtrlKey:{value:!0,kind:S.BROWSER},supportsMouseWheelZoomMetaKey:{value:!0,kind:S.BROWSER},supportsPinchToZoom:{value:!0,kind:S.BROWSER},toolbarDensity:{value:0,kind:S.BROWSER+S.EVENT_DISPATCH},altTextLearnMoreUrl:{value:"",kind:S.VIEWER+S.PREFERENCE},annotationEditorMode:{value:0,kind:S.VIEWER+S.PREFERENCE},annotationMode:{value:2,kind:S.VIEWER+S.PREFERENCE},cursorToolOnLoad:{value:0,kind:S.VIEWER+S.PREFERENCE},debuggerSrc:{value:"./debugger.mjs",kind:S.VIEWER},defaultZoomDelay:{value:400,kind:S.VIEWER+S.PREFERENCE},defaultZoomValue:{value:"",kind:S.VIEWER+S.PREFERENCE},disableHistory:{value:!1,kind:S.VIEWER},disablePageLabels:{value:!1,kind:S.VIEWER+S.PREFERENCE},enableAltText:{value:!1,kind:S.VIEWER+S.PREFERENCE},enableAltTextModelDownload:{value:!0,kind:S.VIEWER+S.PREFERENCE+S.EVENT_DISPATCH},enableGuessAltText:{value:!0,kind:S.VIEWER+S.PREFERENCE+S.EVENT_DISPATCH},enableHighlightFloatingButton:{value:!1,kind:S.VIEWER+S.PREFERENCE},enableNewAltTextWhenAddingImage:{value:!0,kind:S.VIEWER+S.PREFERENCE},enablePermissions:{value:!1,kind:S.VIEWER+S.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:S.VIEWER+S.PREFERENCE},enableScripting:{value:!0,kind:S.VIEWER+S.PREFERENCE},enableUpdatedAddImage:{value:!1,kind:S.VIEWER+S.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:S.VIEWER},externalLinkTarget:{value:0,kind:S.VIEWER+S.PREFERENCE},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:S.VIEWER+S.PREFERENCE},historyUpdateUrl:{value:!1,kind:S.VIEWER+S.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:S.VIEWER+S.PREFERENCE},imageResourcesPath:{value:"./images/",kind:S.VIEWER},maxCanvasPixels:{value:2**25,kind:S.VIEWER},forcePageColors:{value:!1,kind:S.VIEWER+S.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:S.VIEWER+S.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:S.VIEWER+S.PREFERENCE},pdfBugEnabled:{value:!1,kind:S.VIEWER+S.PREFERENCE},printResolution:{value:150,kind:S.VIEWER},sidebarViewOnLoad:{value:-1,kind:S.VIEWER+S.PREFERENCE},scrollModeOnLoad:{value:-1,kind:S.VIEWER+S.PREFERENCE},spreadModeOnLoad:{value:-1,kind:S.VIEWER+S.PREFERENCE},textLayerMode:{value:1,kind:S.VIEWER+S.PREFERENCE},viewOnLoad:{value:0,kind:S.VIEWER+S.PREFERENCE},cMapPacked:{value:!0,kind:S.API},cMapUrl:{value:"../web/cmaps/",kind:S.API},disableAutoFetch:{value:!1,kind:S.API+S.PREFERENCE},disableFontFace:{value:!1,kind:S.API+S.PREFERENCE},disableRange:{value:!1,kind:S.API+S.PREFERENCE},disableStream:{value:!1,kind:S.API+S.PREFERENCE},docBaseUrl:{value:"",kind:S.API},enableHWA:{value:!0,kind:S.API+S.VIEWER+S.PREFERENCE},enableXfa:{value:!0,kind:S.API+S.PREFERENCE},fontExtraProperties:{value:!1,kind:S.API},isEvalSupported:{value:!0,kind:S.API},isOffscreenCanvasSupported:{value:!0,kind:S.API},maxImageSize:{value:-1,kind:S.API},pdfBug:{value:!1,kind:S.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:S.API},useSystemFonts:{value:void 0,kind:S.API,type:sp.BOOLEAN+sp.UNDEFINED},verbosity:{value:1,kind:S.API},workerPort:{value:null,kind:S.WORKER},workerSrc:{value:"../build/pdf.worker.mjs",kind:S.WORKER}};Ht.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:S.VIEWER},Ht.sandboxBundleSrc={value:"../build/pdf.sandbox.mjs",kind:S.VIEWER},Ht.viewerCssTheme={value:0,kind:S.VIEWER+S.PREFERENCE},Ht.enableFakeMLManager={value:!0,kind:S.VIEWER};Ht.disablePreferences={value:!1,kind:S.VIEWER};var rp=class{static eventBus;static#e=new Map;static{for(let e in Ht)this.#e.set(e,Ht[e].value);for(let[e,t]of Dc)this.#e.set(e,t);this._hasInvokedSet=!1,this._checkDisablePreferences=()=>this.get("disablePreferences")?!0:(this._hasInvokedSet&&console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.'),!1)}static get(e){return this.#e.get(e)}static getAll(e=null,t=!1){let n=Object.create(null);for(let a in Ht){let s=Ht[a];e&&!(e&s.kind)||(n[a]=t?s.value:this.#e.get(a))}return n}static set(e,t){this.setAll({[e]:t})}static setAll(e,t=!1){this._hasInvokedSet||=!0;let n;for(let a in e){let s=Ht[a],r=e[a];if(!s||!(typeof r==typeof s.value||sp[(typeof r).toUpperCase()]&s.type))continue;let{kind:o}=s;t&&!(o&S.BROWSER||o&S.PREFERENCE)||(this.eventBus&&o&S.EVENT_DISPATCH&&(n||=new Map).set(a,r),this.#e.set(a,r))}if(n)for(let[a,s]of n)this.eventBus.dispatch(a.toLowerCase(),{source:this,value:s})}},op=class{#e=null;constructor(e){this.pageIndex=e.pageIndex}render(e="display"){return A(this,null,function*(){e!=="display"||this.#e||this._cancelled||(this.#e=new A8({pageIndex:this.pageIndex}))})}cancel(){this._cancelled=!0,this.#e&&(this.#e.destroy(),this.#e=null)}setParent(e){this.#e?.setParent(e)}getDrawLayer(){return this.#e}},sm={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},b6=/^H(\d+)$/,Hc=class{#e;#t=null;#n;#i=new Map;#a;#s=null;constructor(e,t){this.#e=e.getStructTree(),this.#a=t}render(){return A(this,null,function*(){if(this.#n)return this.#n;let{promise:e,resolve:t,reject:n}=Promise.withResolvers();this.#n=e;try{this.#t=this.#d(yield this.#e)}catch(a){n(a)}return this.#e=null,this.#t?.classList.add("structTree"),t(this.#t),e})}getAriaAttributes(e){return A(this,null,function*(){try{return yield this.render(),this.#i.get(e)}catch{}return null})}hide(){this.#t&&!this.#t.hidden&&(this.#t.hidden=!0)}show(){this.#t?.hidden&&(this.#t.hidden=!1)}#c(e,t){let{alt:n,id:a,lang:s}=e;if(n!==void 0){let r=!1,o=Ss(n);for(let c of e.children)if(c.type==="annotation"){let l=this.#i.get(c.id);l||(l=new Map,this.#i.set(c.id,l)),l.set("aria-label",o),r=!0}r||t.setAttribute("aria-label",o)}a!==void 0&&t.setAttribute("aria-owns",a),s!==void 0&&t.setAttribute("lang",Ss(s,!0))}#l(e,t){let{alt:n,bbox:a,children:s}=e,r=s?.[0];if(!this.#a||!n||!a||r?.type!=="content")return!1;let{id:o}=r;if(!o)return!1;t.setAttribute("aria-owns",o);let c=document.createElement("span");(this.#s||=new Map).set(o,c),c.setAttribute("role","img"),c.setAttribute("aria-label",Ss(n));let{pageHeight:l,pageX:d,pageY:h}=this.#a,u="calc(var(--scale-factor)*",{style:p}=c;return p.width=`${u}${a[2]-a[0]}px)`,p.height=`${u}${a[3]-a[1]}px)`,p.left=`${u}${a[0]-d}px)`,p.top=`${u}${l-a[3]+h}px)`,!0}addElementsToTextLayer(){if(this.#s){for(let[e,t]of this.#s)document.getElementById(e)?.append(t);this.#s.clear(),this.#s=null}}#d(e){if(!e)return null;let t=document.createElement("span");if("role"in e){let{role:n}=e,a=n.match(b6);if(a?(t.setAttribute("role","heading"),t.setAttribute("aria-level",a[1])):sm[n]&&t.setAttribute("role",sm[n]),n==="Figure"&&this.#l(e,t))return t}if(this.#c(e,t),e.children)if(e.children.length===1&&"id"in e.children[0])this.#c(e.children[0],t);else for(let n of e.children)t.append(this.#d(n));return t}},cp=class i{#e=!1;#t=null;#n=new Map;#i=new Map;setTextMapping(e){this.#t=e}static#a(e,t){let n=e.getBoundingClientRect(),a=t.getBoundingClientRect();if(n.width===0&&n.height===0)return 1;if(a.width===0&&a.height===0)return-1;let s=n.y,r=n.y+n.height,o=n.y+n.height/2,c=a.y,l=a.y+a.height,d=a.y+a.height/2;if(o<=c&&d>=r)return-1;if(d<=s&&o>=l)return 1;let h=n.x+n.width/2,u=a.x+a.width/2;return h-u}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(i.#a),this.#n.size>0){let e=this.#t;for(let[t,n]of this.#n){if(!document.getElementById(t)){this.#n.delete(t);continue}this.#s(t,e[n])}}for(let[e,t]of this.#i)this.addPointerInTextLayer(e,t);this.#i.clear()}disable(){this.#e&&(this.#i.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(e){if(!this.#e){this.#i.delete(e);return}let t=this.#t;if(!t||t.length===0)return;let{id:n}=e,a=this.#n.get(n);if(a===void 0)return;let s=t[a];this.#n.delete(n);let r=s.getAttribute("aria-owns");r?.includes(n)&&(r=r.split(" ").filter(o=>o!==n).join(" "),r?s.setAttribute("aria-owns",r):(s.removeAttribute("aria-owns"),s.setAttribute("role","presentation")))}#s(e,t){let n=t.getAttribute("aria-owns");n?.includes(e)||t.setAttribute("aria-owns",n?`${n} ${e}`:e),t.removeAttribute("role")}addPointerInTextLayer(e,t){let{id:n}=e;if(!n)return null;if(!this.#e)return this.#i.set(e,t),null;t&&this.removePointerInTextLayer(e);let a=this.#t;if(!a||a.length===0)return null;let s=Es(a,l=>i.#a(e,l)<0),r=Math.max(0,s-1),o=a[r];this.#s(n,o),this.#n.set(n,r);let c=o.parentNode;return c?.classList.contains("markedContent")?c.id:null}moveElementInDOM(e,t,n,a){let s=this.addPointerInTextLayer(n,a);if(!e.hasChildNodes())return e.append(t),s;let r=Array.from(e.childNodes).filter(l=>l!==t);if(r.length===0)return s;let o=n||t,c=Es(r,l=>i.#a(o,l)<0);return c===0?r[0].before(t):r[c-1].after(t),s}},lp=class{#e=null;constructor({findController:e,eventBus:t,pageIndex:n}){this.findController=e,this.matches=[],this.eventBus=t,this.pageIdx=n,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(e,t){this.textDivs=e,this.textContentItemsStr=t}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this.#e||(this.#e=new AbortController,this.eventBus._on("updatetextlayermatches",e=>{(e.pageIndex===this.pageIdx||e.pageIndex===-1)&&this._updateMatches()},{signal:this.#e.signal})),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this.#e?.abort(),this.#e=null,this._updateMatches(!0))}_convertMatches(e,t){if(!e)return[];let{textContentItemsStr:n}=this,a=0,s=0,r=n.length-1,o=[];for(let c=0,l=e.length;c<l;c++){let d=e[c];for(;a!==r&&d>=s+n[a].length;)s+=n[a].length,a++;a===n.length&&console.error("Could not find a matching mapping");let h={begin:{divIdx:a,offset:d-s}};for(d+=t[c];a!==r&&d>s+n[a].length;)s+=n[a].length,a++;h.end={divIdx:a,offset:d-s},o.push(h)}return o}_renderMatches(e){if(e.length===0)return;let{findController:t,pageIdx:n}=this,{textContentItemsStr:a,textDivs:s}=this,r=n===t.selected.pageIdx,o=t.selected.matchIdx,c=t.state.highlightAll,l=null,d={divIdx:-1,offset:void 0};function h(y,v){let M=y.divIdx;return s[M].textContent="",u(M,0,y.offset,v)}function u(y,v,M,k){let C=s[y];if(C.nodeType===Node.TEXT_NODE){let E=document.createElement("span");C.before(E),E.append(C),s[y]=E,C=E}let b=a[y].substring(v,M),I=document.createTextNode(b);if(k){let E=document.createElement("span");return E.className=`${k} appended`,E.append(I),C.append(E),k.includes("selected")?E.offsetLeft:0}return C.append(I),0}let p=o,f=p+1;if(c)p=0,f=e.length;else if(!r)return;let g=-1,m=-1;for(let y=p;y<f;y++){let v=e[y],M=v.begin;if(M.divIdx===g&&M.offset===m)continue;g=M.divIdx,m=M.offset;let k=v.end,C=r&&y===o,b=C?" selected":"",I=0;if(!l||M.divIdx!==l.divIdx?(l!==null&&u(l.divIdx,l.offset,d.offset),h(M)):u(l.divIdx,l.offset,M.offset),M.divIdx===k.divIdx)I=u(M.divIdx,M.offset,k.offset,"highlight"+b);else{I=u(M.divIdx,M.offset,d.offset,"highlight begin"+b);for(let E=M.divIdx+1,w=k.divIdx;E<w;E++)s[E].className="highlight middle"+b;h(k,"highlight end"+b)}l=k,C&&t.scrollMatchIntoView({element:s[M.divIdx],selectedLeft:I,pageIndex:n,matchIndex:o})}l&&u(l.divIdx,l.offset,d.offset)}_updateMatches(e=!1){if(!this.enabled&&!e)return;let{findController:t,matches:n,pageIdx:a}=this,{textContentItemsStr:s,textDivs:r}=this,o=-1;for(let d of n){let h=Math.max(o,d.begin.divIdx);for(let u=h,p=d.end.divIdx;u<=p;u++){let f=r[u];f.textContent=s[u],f.className=""}o=d.end.divIdx+1}if(!t?.highlightMatches||e)return;let c=t.pageMatches[a]||null,l=t.pageMatchesLength[a]||null;this.matches=this._convertMatches(c,l),this._renderMatches(this.matches)}},jc=class i{#e=!1;#t=null;#n=!1;#i=null;static#a=new Map;static#s=null;constructor({pdfPage:e,highlighter:t=null,accessibilityManager:n=null,enablePermissions:a=!1,onAppend:s=null}){this.pdfPage=e,this.highlighter=t,this.accessibilityManager=n,this.#e=a===!0,this.#t=s,this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}render(e,t=null){return A(this,null,function*(){if(this.#n&&this.#i){this.#i.update({viewport:e,onBefore:this.hide.bind(this)}),this.show();return}this.cancel(),this.#i=new T8({textContentSource:this.pdfPage.streamTextContent(t||{includeMarkedContent:!0,disableNormalization:!0}),container:this.div,viewport:e});let{textDivs:n,textContentItemsStr:a}=this.#i;this.highlighter?.setTextMapping(n,a),this.accessibilityManager?.setTextMapping(n),yield this.#i.render(),this.#n=!0;let s=document.createElement("div");s.className="endOfContent",this.div.append(s),this.#c(s),this.#t?.(this.div),this.highlighter?.enable(),this.accessibilityManager?.enable()})}hide(){!this.div.hidden&&this.#n&&(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.#n&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.#i?.cancel(),this.#i=null,this.highlighter?.disable(),this.accessibilityManager?.disable(),i.#l(this.div)}#c(e){let{div:t}=this;t.addEventListener("mousedown",()=>{t.classList.add("selecting")}),t.addEventListener("copy",n=>{if(!this.#e){let a=document.getSelection();n.clipboardData.setData("text/plain",Ss(L8(a.toString())))}n.preventDefault(),n.stopPropagation()}),i.#a.set(t,e),i.#d()}static#l(e){this.#a.delete(e),this.#a.size===0&&(this.#s?.abort(),this.#s=null)}static#d(){if(this.#s)return;this.#s=new AbortController;let{signal:e}=this.#s,t=(r,o)=>{o.append(r),r.style.width="",r.style.height="",o.classList.remove("selecting")},n=!1;document.addEventListener("pointerdown",()=>{n=!0},{signal:e}),document.addEventListener("pointerup",()=>{n=!1,this.#a.forEach(t)},{signal:e}),window.addEventListener("blur",()=>{n=!1,this.#a.forEach(t)},{signal:e}),document.addEventListener("keyup",()=>{n||this.#a.forEach(t)},{signal:e});var a,s;document.addEventListener("selectionchange",()=>{let r=document.getSelection();if(r.rangeCount===0){this.#a.forEach(t);return}let o=new Set;for(let p=0;p<r.rangeCount;p++){let f=r.getRangeAt(p);for(let g of this.#a.keys())!o.has(g)&&f.intersectsNode(g)&&o.add(g)}for(let[p,f]of this.#a)o.has(p)?p.classList.add("selecting"):t(f,p);if(a??=getComputedStyle(this.#a.values().next().value).getPropertyValue("-moz-user-select")==="none",a)return;let c=r.getRangeAt(0),l=s&&(c.compareBoundaryPoints(Range.END_TO_END,s)===0||c.compareBoundaryPoints(Range.START_TO_END,s)===0),d=l?c.startContainer:c.endContainer;d.nodeType===Node.TEXT_NODE&&(d=d.parentNode);let h=d.parentElement?.closest(".textLayer"),u=this.#a.get(h);u&&(u.style.width=h.style.width,u.style.height=h.style.height,d.parentElement.insertBefore(u,l?d:d.nextSibling)),s=c.cloneRange()},{signal:e})}},Bc=class{constructor({pdfPage:e,annotationStorage:t=null,linkService:n,xfaHtml:a=null}){this.pdfPage=e,this.annotationStorage=t,this.linkService=n,this.xfaHtml=a,this.div=null,this._cancelled=!1}render(e,t="display"){return A(this,null,function*(){if(t==="print"){let s={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};return this.div=document.createElement("div"),s.div=this.div,Hu.render(s)}let n=yield this.pdfPage.getXfa();if(this._cancelled||!n)return{textDivs:[]};let a={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:n,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};return this.div?Hu.update(a):(this.div=document.createElement("div"),a.div=this.div,Hu.render(a))})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}},C6={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new Ls}},x6=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]),Vc=class{#e=tn.ENABLE_FORMS;#t=!1;#n=!1;#i=!1;#a=null;#s=null;#c=null;#l=1;#d=1;#o=null;#h=Ce.INITIAL;#r=Nt.ENABLE;#u={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#f=new WeakMap;#p=[null,null,null,null];constructor(e){let t=e.container,n=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,this.#a=e.layerProperties||C6,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||cm,this.viewport=n,this.pdfPageRotate=n.rotation,this._optionalContentConfigPromise=e.optionalContentConfigPromise||null,this.#r=e.textLayerMode??Nt.ENABLE,this.#e=e.annotationMode??tn.ENABLE_FORMS,this.imageResourcesPath=e.imageResourcesPath||"",this.maxCanvasPixels=e.maxCanvasPixels??rp.get("maxCanvasPixels"),this.pageColors=e.pageColors||null,this.#t=e.enableHWA||!1,this.eventBus=e.eventBus,this.renderingQueue=e.renderingQueue,this.l10n=e.l10n,this.l10n||=new sa,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=t,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null;let a=document.createElement("div");if(a.className="page",a.setAttribute("data-page-number",this.id),a.setAttribute("role","region"),a.setAttribute("data-l10n-id","pdfjs-page-landmark"),a.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=a,this.#m(),t?.append(a),this._isStandalone){t?.style.setProperty("--scale-factor",this.scale*en.PDF_TO_CSS_UNITS),this.pageColors?.background&&t?.style.setProperty("--page-bg-color",this.pageColors.background);let{optionalContentConfigPromise:s}=e;s&&s.then(r=>{s===this._optionalContentConfigPromise&&(this.#u.initialOptionalContent=r.hasInitialVisibility)}),e.l10n||this.l10n.translate(this.div)}}#g(e,t){let n=x6.get(t),a=this.#p[n];if(this.#p[n]=e,a){a.replaceWith(e);return}for(let s=n-1;s>=0;s--){let r=this.#p[s];if(r){r.after(e);return}}this.div.prepend(e)}get renderingState(){return this.#h}set renderingState(e){if(e!==this.#h)switch(this.#h=e,this.#s&&(clearTimeout(this.#s),this.#s=null),e){case Ce.PAUSED:this.div.classList.remove("loading");break;case Ce.RUNNING:this.div.classList.add("loadingIcon"),this.#s=setTimeout(()=>{this.div.classList.add("loading"),this.#s=null},0);break;case Ce.INITIAL:case Ce.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}#m(){let{viewport:e}=this;if(this.pdfPage){if(this.#c===e.rotation)return;this.#c=e.rotation}D8(this.div,e,!0,!1)}setPdfPage(e){this._isStandalone&&(this.pageColors?.foreground==="CanvasText"||this.pageColors?.background==="Canvas")&&(this._container?.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),this._container?.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=e,this.pdfPageRotate=e.rotate;let t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:this.scale*en.PDF_TO_CSS_UNITS,rotation:t}),this.#m(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}get _textHighlighter(){return Pc(this,"_textHighlighter",new lp({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#a.findController}))}#y(e,t){this.eventBus.dispatch(e,{source:this,pageNumber:this.id,error:t})}#k(){return A(this,null,function*(){let e=null;try{yield this.annotationLayer.render(this.viewport,{structTreeLayer:this.structTreeLayer},"display")}catch(t){console.error(`#renderAnnotationLayer: "${t}".`),e=t}finally{this.#y("annotationlayerrendered",e)}})}#M(){return A(this,null,function*(){let e=null;try{yield this.annotationEditorLayer.render(this.viewport,"display")}catch(t){console.error(`#renderAnnotationEditorLayer: "${t}".`),e=t}finally{this.#y("annotationeditorlayerrendered",e)}})}#C(){return A(this,null,function*(){try{yield this.drawLayer.render("display")}catch(e){console.error(`#renderDrawLayer: "${e}".`)}})}#w(){return A(this,null,function*(){let e=null;try{let t=yield this.xfaLayer.render(this.viewport,"display");t?.textDivs&&this._textHighlighter&&this.#S(t.textDivs)}catch(t){console.error(`#renderXfaLayer: "${t}".`),e=t}finally{this.xfaLayer?.div&&(this.l10n.pause(),this.#g(this.xfaLayer.div,"xfaLayer"),this.l10n.resume()),this.#y("xfalayerrendered",e)}})}#b(){return A(this,null,function*(){if(!this.textLayer)return;let e=null;try{yield this.textLayer.render(this.viewport)}catch(t){if(t instanceof w8)return;console.error(`#renderTextLayer: "${t}".`),e=t}this.#y("textlayerrendered",e),this.#_()})}#_(){return A(this,null,function*(){if(!this.textLayer)return;let e=yield this.structTreeLayer?.render();e&&(this.l10n.pause(),this.structTreeLayer?.addElementsToTextLayer(),this.canvas&&e.parentNode!==this.canvas&&this.canvas.append(e),this.l10n.resume()),this.structTreeLayer?.show()})}#S(e){return A(this,null,function*(){let t=yield this.pdfPage.getTextContent(),n=[];for(let a of t.items)n.push(a.str);this._textHighlighter.setTextMapping(e,n),this._textHighlighter.enable()})}_resetZoomLayer(e=!1){if(!this.zoomLayer)return;let t=this.zoomLayer.firstChild;this.#f.delete(t),t.width=0,t.height=0,e&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:e=!1,keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:n=!1,keepXfaLayer:a=!1,keepTextLayer:s=!1}={}){this.cancelRendering({keepAnnotationLayer:t,keepAnnotationEditorLayer:n,keepXfaLayer:a,keepTextLayer:s}),this.renderingState=Ce.INITIAL;let r=this.div,o=r.childNodes,c=e&&this.zoomLayer||null,l=t&&this.annotationLayer?.div||null,d=n&&this.annotationEditorLayer?.div||null,h=a&&this.xfaLayer?.div||null,u=s&&this.textLayer?.div||null;for(let p=o.length-1;p>=0;p--){let f=o[p];switch(f){case c:case l:case d:case h:case u:continue}f.remove();let g=this.#p.indexOf(f);g>=0&&(this.#p[g]=null)}r.removeAttribute("data-loaded"),l&&this.annotationLayer.hide(),d&&this.annotationEditorLayer.hide(),h&&this.xfaLayer.hide(),u&&this.textLayer.hide(),this.structTreeLayer?.hide(),c||(this.canvas&&(this.#f.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}toggleEditingMode(e){this.hasEditableAnnotations()&&(this.#i=e,this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0}))}update({scale:e=0,rotation:t=null,optionalContentConfigPromise:n=null,drawingDelay:a=-1}){this.scale=e||this.scale,typeof t=="number"&&(this.rotation=t),n instanceof Promise&&(this._optionalContentConfigPromise=n,n.then(r=>{n===this._optionalContentConfigPromise&&(this.#u.initialOptionalContent=r.hasInitialVisibility)})),this.#u.directDrawing=!0;let s=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*en.PDF_TO_CSS_UNITS,rotation:s}),this.#m(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.canvas){let r=!1;if(this.#n){if(this.maxCanvasPixels===0)r=!0;else if(this.maxCanvasPixels>0){let{width:c,height:l}=this.viewport,{sx:d,sy:h}=this.outputScale;r=(Math.floor(c)*d|0)*(Math.floor(l)*h|0)>this.maxCanvasPixels}}let o=a>=0&&a<1e3;if(o||r){if(o&&!r&&this.renderingState!==Ce.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:a}),this.renderingState=Ce.FINISHED,this.#u.directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!o,hideTextLayer:o}),o)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#o});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:t=!1,keepXfaLayer:n=!1,keepTextLayer:a=!1,cancelExtraDelay:s=0}={}){this.renderTask&&(this.renderTask.cancel(s),this.renderTask=null),this.resume=null,this.textLayer&&(!a||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!e||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationEditorLayer&&(!t||!this.annotationEditorLayer.div)&&(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!n||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:e,redrawAnnotationLayer:t=!1,redrawAnnotationEditorLayer:n=!1,redrawXfaLayer:a=!1,redrawTextLayer:s=!1,hideTextLayer:r=!1}){if(!e.hasAttribute("zooming")){e.setAttribute("zooming",!0);let{style:c}=e;c.width=c.height=""}let o=this.#f.get(e);if(this.viewport!==o){let c=this.viewport.rotation-o.rotation,l=Math.abs(c),d=1,h=1;if(l===90||l===270){let{width:u,height:p}=this.viewport;d=p/u,h=u/p}e.style.transform=`rotate(${c}deg) scale(${d}, ${h})`}t&&this.annotationLayer&&this.#k(),n&&this.annotationEditorLayer&&(this.drawLayer&&this.#C(),this.#M()),a&&this.xfaLayer&&this.#w(),this.textLayer&&(r?(this.textLayer.hide(),this.structTreeLayer?.hide()):s&&this.#b())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(e,t){return this.viewport.convertToPdfPoint(e,t)}#x(e,t=null){return A(this,null,function*(){if(e===this.renderTask&&(this.renderTask=null),t instanceof Wu){this.#o=null;return}if(this.#o=t,this.renderingState=Ce.FINISHED,this._resetZoomLayer(!0),this.#u.regularAnnotations=!e.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this.#o}),t)throw t})}draw(){return A(this,null,function*(){this.renderingState!==Ce.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());let{div:e,l10n:t,pageColors:n,pdfPage:a,viewport:s}=this;if(!a)throw this.renderingState=Ce.FINISHED,new Error("pdfPage is not loaded");this.renderingState=Ce.RUNNING;let r=document.createElement("div");if(r.classList.add("canvasWrapper"),this.#g(r,"canvasWrapper"),!this.textLayer&&this.#r!==Nt.DISABLE&&!a.isPureXfa&&(this._accessibilityManager||=new cp,this.textLayer=new jc({pdfPage:a,highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,enablePermissions:this.#r===Nt.ENABLE_PERMISSIONS,onAppend:w=>{this.l10n.pause(),this.#g(w,"textLayer"),this.l10n.resume()}})),!this.annotationLayer&&this.#e!==tn.DISABLE){let{annotationStorage:w,annotationEditorUIManager:x,downloadManager:L,enableScripting:ee,fieldObjectsPromise:Q,hasJSActionsPromise:$,linkService:se}=this.#a;this._annotationCanvasMap||=new Map,this.annotationLayer=new Rc({pdfPage:a,annotationStorage:w,imageResourcesPath:this.imageResourcesPath,renderForms:this.#e===tn.ENABLE_FORMS,linkService:se,downloadManager:L,enableScripting:ee,hasJSActionsPromise:$,fieldObjectsPromise:Q,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager,annotationEditorUIManager:x,onAppend:we=>{this.#g(we,"annotationLayer")}})}let o=w=>{if(u?.(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=Ce.PAUSED,this.resume=()=>{this.renderingState=Ce.RUNNING,w()};return}w()},{width:c,height:l}=s,d=document.createElement("canvas");d.setAttribute("role","presentation"),d.hidden=!0;let h=!!(n?.background&&n?.foreground),u=w=>{(!h||w)&&(d.hidden=!1,u=null)};r.append(d),this.canvas=d;let p=d.getContext("2d",{alpha:!1,willReadFrequently:!this.#t}),f=this.outputScale=new _8;if(this.maxCanvasPixels===0){let w=1/this.scale;f.sx*=w,f.sy*=w,this.#n=!0}else if(this.maxCanvasPixels>0){let w=c*l,x=Math.sqrt(this.maxCanvasPixels/w);f.sx>x||f.sy>x?(f.sx=x,f.sy=x,this.#n=!0):this.#n=!1}let g=Py(f.sx),m=Py(f.sy),y=d.width=Ic(Ac(c*f.sx),g[0]),v=d.height=Ic(Ac(l*f.sy),m[0]),M=Ic(Ac(c),g[1]),k=Ic(Ac(l),m[1]);f.sx=y/M,f.sy=v/k,this.#l!==g[1]&&(e.style.setProperty("--scale-round-x",`${g[1]}px`),this.#l=g[1]),this.#d!==m[1]&&(e.style.setProperty("--scale-round-y",`${m[1]}px`),this.#d=m[1]),this.#f.set(d,s);let C=f.scaled?[f.sx,0,0,f.sy,0,0]:null,b={canvasContext:p,transform:C,viewport:s,annotationMode:this.#e,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:n,isEditing:this.#i},I=this.renderTask=a.render(b);I.onContinue=o;let E=I.promise.then(()=>A(this,null,function*(){u?.(!0),yield this.#x(I),this.structTreeLayer||=new Hc(a,s.rawDims),this.#b(),this.annotationLayer&&(yield this.#k());let{annotationEditorUIManager:w}=this.#a;w&&(this.drawLayer||=new op({pageIndex:this.id}),yield this.#C(),this.drawLayer.setParent(r),this.annotationEditorLayer||=new ap({uiManager:w,pdfPage:a,l10n:t,structTreeLayer:this.structTreeLayer,accessibilityManager:this._accessibilityManager,annotationLayer:this.annotationLayer?.annotationLayer,textLayer:this.textLayer,drawLayer:this.drawLayer.getDrawLayer(),onAppend:x=>{this.#g(x,"annotationEditorLayer")}}),this.#M())}),w=>(w instanceof Wu||u?.(!0),this.#x(I,w)));if(a.isPureXfa){if(!this.xfaLayer){let{annotationStorage:w,linkService:x}=this.#a;this.xfaLayer=new Bc({pdfPage:a,annotationStorage:w,linkService:x})}this.#w()}return e.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),E})}setPageLabel(e){this.pageLabel=typeof e=="string"?e:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:this.pageLabel??this.id})),this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){let{directDrawing:e,initialOptionalContent:t,regularAnnotations:n}=this.#u;return e&&t&&n?this.canvas:null}};function I6(i){return A(this,null,function*(){let t="".split("#",1)[0],{info:n,metadata:a,contentDispositionFilename:s,contentLength:r}=yield i.getMetadata();if(!r){let{length:o}=yield i.getDownloadInfo();r=o}return re(D({},n),{baseURL:t,filesize:r,filename:s||S8(""),metadata:a?.getRaw(),authors:a?.get("dc:creator"),numPages:i.numPages,URL:""})})}var dp=class{constructor(e){this._ready=new Promise((t,n)=>{import(e).then(s=>{t(s.QuickJSSandbox())}).catch(n)})}createSandbox(e){return A(this,null,function*(){(yield this._ready).create(e)})}dispatchEventInSandbox(e){return A(this,null,function*(){let t=yield this._ready;setTimeout(()=>t.dispatchEvent(e),0)})}destroySandbox(){return A(this,null,function*(){(yield this._ready).nukeSandbox()})}},hp=class{#e=null;#t=null;#n=null;#i=null;#a=null;#s=null;#c=null;#l=null;#d=!1;#o=null;#h=null;constructor({eventBus:e,externalServices:t=null,docProperties:n=null}){this.#a=e,this.#s=t,this.#n=n}setViewer(e){this.#l=e}setDocument(e){return A(this,null,function*(){if(this.#c&&(yield this.#g()),this.#c=e,!e)return;let[t,n,a]=yield Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(!t&&!a){yield this.#g();return}if(e!==this.#c)return;try{this.#o=this.#p()}catch(o){console.error(`setDocument: "${o.message}".`),yield this.#g();return}let s=this.#a;this.#i=new AbortController;let{signal:r}=this.#i;s._on("updatefromsandbox",o=>{o?.source===window&&this.#r(o.detail)},{signal:r}),s._on("dispatcheventinsandbox",o=>{this.#o?.dispatchEventInSandbox(o.detail)},{signal:r}),s._on("pagechanging",({pageNumber:o,previous:c})=>{o!==c&&(this.#f(c),this.#u(o))},{signal:r}),s._on("pagerendered",({pageNumber:o})=>{this._pageOpenPending.has(o)&&o===this.#l.currentPageNumber&&this.#u(o)},{signal:r}),s._on("pagesdestroy",()=>A(this,null,function*(){yield this.#f(this.#l.currentPageNumber),yield this.#o?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),this.#e?.resolve()}),{signal:r});try{let o=yield this.#n(e);if(e!==this.#c)return;yield this.#o.createSandbox({objects:t,calculationOrder:n,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:re(D({},o),{actions:a})}),s.dispatch("sandboxcreated",{source:this})}catch(o){console.error(`setDocument: "${o.message}".`),yield this.#g();return}yield this.#o?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield this.#u(this.#l.currentPageNumber,!0),Promise.resolve().then(()=>{e===this.#c&&(this.#d=!0)})})}dispatchWillSave(){return A(this,null,function*(){return this.#o?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})}dispatchDidSave(){return A(this,null,function*(){return this.#o?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})}dispatchWillPrint(){return A(this,null,function*(){if(this.#o){yield this.#h?.promise,this.#h=Promise.withResolvers();try{yield this.#o.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(e){throw this.#h.resolve(),this.#h=null,e}yield this.#h.promise}})}dispatchDidPrint(){return A(this,null,function*(){return this.#o?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})}get destroyPromise(){return this.#t?.promise||null}get ready(){return this.#d}get _pageOpenPending(){return Pc(this,"_pageOpenPending",new Set)}get _visitedPages(){return Pc(this,"_visitedPages",new Map)}#r(e){return A(this,null,function*(){let t=this.#l,n=t.isInPresentationMode||t.isChangingPresentationMode,{id:a,siblings:s,command:r,value:o}=e;if(!a){switch(r){case"clear":console.clear();break;case"error":console.error(o);break;case"layout":if(!n){let l=Qb(o);t.spreadMode=l.spreadMode}break;case"page-num":t.currentPageNumber=o+1;break;case"print":yield t.pagesPromise,this.#a.dispatch("print",{source:this});break;case"println":console.log(o);break;case"zoom":n||(t.currentScaleValue=o);break;case"SaveAs":this.#a.dispatch("download",{source:this});break;case"FirstPage":t.currentPageNumber=1;break;case"LastPage":t.currentPageNumber=t.pagesCount;break;case"NextPage":t.nextPage();break;case"PrevPage":t.previousPage();break;case"ZoomViewIn":n||t.increaseScale();break;case"ZoomViewOut":n||t.decreaseScale();break;case"WillPrintFinished":this.#h?.resolve(),this.#h=null;break}return}if(n&&e.focus)return;delete e.id,delete e.siblings;let c=s?[a,...s]:[a];for(let l of c){let d=document.querySelector(`[data-element-id="${l}"]`);d?d.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e})):this.#c?.annotationStorage.setValue(l,e)}})}#u(e,t=!1){return A(this,null,function*(){let n=this.#c,a=this._visitedPages;if(t&&(this.#e=Promise.withResolvers()),!this.#e)return;let s=this.#l.getPageView(e-1);if(s?.renderingState!==Ce.FINISHED){this._pageOpenPending.add(e);return}this._pageOpenPending.delete(e);let r=A(this,null,function*(){let o=yield a.has(e)?null:s.pdfPage?.getJSActions();n===this.#c&&(yield this.#o?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:e,actions:o}))});a.set(e,r)})}#f(e){return A(this,null,function*(){let t=this.#c,n=this._visitedPages;if(!this.#e||this._pageOpenPending.has(e))return;let a=n.get(e);a&&(n.set(e,null),yield a,t===this.#c&&(yield this.#o?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e})))})}#p(){if(this.#t=Promise.withResolvers(),this.#o)throw new Error("#initScripting: Scripting already exists.");return this.#s.createScripting()}#g(){return A(this,null,function*(){if(!this.#o){this.#c=null,this.#t?.resolve();return}this.#e&&(yield Promise.race([this.#e.promise,new Promise(e=>{setTimeout(e,1e3)})]).catch(()=>{}),this.#e=null),this.#c=null;try{yield this.#o.destroySandbox()}catch{}this.#h?.reject(new Error("Scripting destroyed.")),this.#h=null,this.#i?.abort(),this.#i=null,this._pageOpenPending.clear(),this._visitedPages.clear(),this.#o=null,this.#d=!1,this.#t?.resolve()})}},up=class extends hp{constructor(e){e.externalServices||window.addEventListener("updatefromsandbox",t=>{e.eventBus.dispatch("updatefromsandbox",{source:window,detail:t.detail})}),e.externalServices||={createScripting:()=>new dp(e.sandboxBundleSrc)},e.docProperties||=t=>I6(t),super(e)}},A6=3e4,pp=class{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}renderHighestPriority(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),A6)))}getHighestPriority(e,t,n,a=!1){let s=e.views,r=s.length;if(r===0)return null;for(let h=0;h<r;h++){let u=s[h].view;if(!this.isViewFinished(u))return u}let o=e.first.id,c=e.last.id;if(c-o+1>r){let h=e.ids;for(let u=1,p=c-o;u<p;u++){let f=n?o+u:c-u;if(h.has(f))continue;let g=t[f-1];if(!this.isViewFinished(g))return g}}let l=n?c:o-2,d=t[l];return d&&!this.isViewFinished(d)||a&&(l+=n?1:-1,d=t[l],d&&!this.isViewFinished(d))?d:null}isViewFinished(e){return e.renderingState===Ce.FINISHED}renderView(e){switch(e.renderingState){case Ce.FINISHED:return!1;case Ce.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case Ce.RUNNING:this.highestPriorityPage=e.renderingId;break;case Ce.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(t=>{t instanceof Wu||console.error(`renderView: "${t}"`)});break}return!0}},rm=10,_c={FORCE_SCROLL_MODE_PAGE:1e4,FORCE_LAZY_PAGE_INIT:5e3,PAUSE_EAGER_PAGE_INIT:250};function om(i){return Object.values(at).includes(i)&&i!==at.DISABLE}var fp=class{#e=new Set;#t=0;constructor(e){this.#t=e}push(e){let t=this.#e;t.has(e)&&t.delete(e),t.add(e),t.size>this.#t&&this.#n()}resize(e,t=null){this.#t=e;let n=this.#e;if(t){let a=n.size,s=1;for(let r of n)if(t.has(r.id)&&(n.delete(r),n.add(r)),++s>a)break}for(;n.size>this.#t;)this.#n()}has(e){return this.#e.has(e)}[Symbol.iterator](){return this.#e.keys()}#n(){let e=this.#e.keys().next().value;e?.destroy(),this.#e.delete(e)}},zc=class{#e=null;#t=null;#n=null;#i=at.NONE;#a=null;#s=tn.ENABLE_FORMS;#c=null;#l=!1;#d=!1;#o=!1;#h=!1;#r=!1;#u=null;#f=null;#p=null;#g=null;#m=!1;#y=null;#k=!1;#M=0;#C=new ResizeObserver(this.#H.bind(this));#w=null;#b=null;#_=Nt.ENABLE;constructor(e){let t="4.8.69";if(zy!==t)throw new Error(`The API version "${zy}" does not match the Viewer version "${t}".`);if(this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,this.container?.tagName!=="DIV"||this.viewer?.tagName!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");this.#C.observe(this.container),this.eventBus=e.eventBus,this.linkService=e.linkService||new Ls,this.downloadManager=e.downloadManager||null,this.findController=e.findController||null,this.#t=e.altTextManager||null,this.findController&&(this.findController.onIsPageVisible=a=>this._getVisiblePages().ids.has(a)),this._scriptingManager=e.scriptingManager||null,this.#_=e.textLayerMode??Nt.ENABLE,this.#s=e.annotationMode??tn.ENABLE_FORMS,this.#i=e.annotationEditorMode??at.NONE,this.#n=e.annotationEditorHighlightColors||null,this.#d=e.enableHighlightFloatingButton===!0,this.#h=e.enableUpdatedAddImage===!0,this.#r=e.enableNewAltTextWhenAddingImage===!0,this.imageResourcesPath=e.imageResourcesPath||"",this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.removePageBorders=e.removePageBorders||!1,this.maxCanvasPixels=e.maxCanvasPixels,this.l10n=e.l10n,this.l10n||=new sa,this.#o=e.enablePermissions||!1,this.pageColors=e.pageColors||null,this.#f=e.mlManager||null,this.#l=e.enableHWA||!1,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new pp,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue;let{abortSignal:n}=e;n?.addEventListener("abort",()=>{this.#C.disconnect(),this.#C=null},{once:!0}),this.scroll=Wb(this.container,this._scrollUpdate.bind(this),n),this.presentationModeState=na.UNKNOWN,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#F(),this.eventBus._on("thumbnailrendered",({pageNumber:a,pdfPage:s})=>{let r=this._pages[a-1];this.#e.has(r)||s?.cleanup()}),e.l10n||this.l10n.translate(this.container)}get pagesCount(){return this._pages.length}getPageView(e){return this._pages[e]}getCachedPageViews(){return new Set(this.#e)}get pageViewsReady(){return this._pages.every(e=>e?.pdfPage)}get renderForms(){return this.#s===tn.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(e,!0)||console.error(`currentPageNumber: "${e}" is not a valid page.`))}_setCurrentPageNumber(e,t=!1){if(this._currentPageNumber===e)return t&&this.#T(),!0;if(!(0<e&&e<=this.pagesCount))return!1;let n=this._currentPageNumber;return this._currentPageNumber=e,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:this._pageLabels?.[e-1]??null,previous:n}),t&&this.#T(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(e){if(!this.pdfDocument)return;let t=e|0;if(this._pageLabels){let n=this._pageLabels.indexOf(e);n>=0&&(t=n+1)}this._setCurrentPageNumber(t,!0)||console.error(`currentPageLabel: "${e}" is not a valid page.`)}get currentScale(){return this._currentScale!==Ru?this._currentScale:cm}set currentScale(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#L(e,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(e){this.pdfDocument&&this.#L(e,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!dm(e))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(e%=360,e<0&&(e+=360),this._pagesRotation===e))return;this._pagesRotation=e;let t=this._currentPageNumber;this.refresh(!0,{rotation:e}),this._currentScaleValue&&this.#L(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){let e=this;return Pc(this,"_layerProperties",{get annotationEditorUIManager(){return e.#a},get annotationStorage(){return e.pdfDocument?.annotationStorage},get downloadManager(){return e.downloadManager},get enableScripting(){return!!e._scriptingManager},get fieldObjectsPromise(){return e.pdfDocument?.getFieldObjects()},get findController(){return e.findController},get hasJSActionsPromise(){return e.pdfDocument?.hasJSActions()},get linkService(){return e.linkService}})}#S(e){let t={annotationEditorMode:this.#i,annotationMode:this.#s,textLayerMode:this.#_};return e&&(!e.includes(Ec.COPY)&&this.#_===Nt.ENABLE&&(t.textLayerMode=Nt.ENABLE_PERMISSIONS),e.includes(Ec.MODIFY_CONTENTS)||(t.annotationEditorMode=at.DISABLE),!e.includes(Ec.MODIFY_ANNOTATIONS)&&!e.includes(Ec.FILL_INTERACTIVE_FORMS)&&this.#s===tn.ENABLE_FORMS&&(t.annotationMode=tn.ENABLE)),t}#x(e){return A(this,null,function*(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return;let t=Promise.withResolvers(),n=new AbortController;document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&t.resolve()},{signal:typeof AbortSignal.any=="function"?AbortSignal.any([e,n.signal]):e}),yield Promise.race([this._onePageRenderedCapability.promise,t.promise]),n.abort()})}getAllText(){return A(this,null,function*(){let e=[],t=[];for(let n=1,a=this.pdfDocument.numPages;n<=a;++n){if(this.#k)return null;t.length=0;let s=yield this.pdfDocument.getPage(n),{items:r}=yield s.getTextContent();for(let o of r)o.str&&t.push(o.str),o.hasEOL&&t.push(`
`);e.push(Ss(t.join("")))}return e.join(`
`)})}#E(e,t){let n=document.getSelection(),{focusNode:a,anchorNode:s}=n;if(s&&a&&n.containsNode(this.#y)){if(this.#m||e===Nt.ENABLE_PERMISSIONS){t.preventDefault(),t.stopPropagation();return}this.#m=!0;let{classList:r}=this.viewer;r.add("copyAll");let o=new AbortController;window.addEventListener("keydown",c=>this.#k=c.key==="Escape",{signal:o.signal}),this.getAllText().then(c=>A(this,null,function*(){c!==null&&(yield navigator.clipboard.writeText(c))})).catch(c=>{console.warn(`Something goes wrong when extracting the text: ${c.message}`)}).finally(()=>{this.#m=!1,this.#k=!1,o.abort(),r.remove("copyAll")}),t.preventDefault(),t.stopPropagation()}}setDocument(e){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#a?.destroy(),this.#a=null),this.pdfDocument=e,!e)return;let t=e.numPages,n=e.getPage(1),a=e.getOptionalContentConfig({intent:"display"}),s=this.#o?e.getPermissions():Promise.resolve(),{eventBus:r,pageColors:o,viewer:c}=this;this.#u=new AbortController;let{signal:l}=this.#u;if(t>_c.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");let u=this._scrollMode=J.PAGE;r.dispatch("scrollmodechanged",{source:this,mode:u})}this._pagesCapability.promise.then(()=>{r.dispatch("pagesloaded",{source:this,pagesCount:t})},()=>{});let d=u=>{let p=this._pages[u.pageNumber-1];p&&this.#e.push(p)};r._on("pagerender",d,{signal:l});let h=u=>{u.cssTransform||(this._onePageRenderedCapability.resolve({timestamp:u.timestamp}),r._off("pagerendered",h))};r._on("pagerendered",h,{signal:l}),Promise.all([n,s]).then(([u,p])=>{if(e!==this.pdfDocument)return;this._firstPageCapability.resolve(u),this._optionalContentConfigPromise=a;let{annotationEditorMode:f,annotationMode:g,textLayerMode:m}=this.#S(p);if(m!==Nt.DISABLE){let k=this.#y=document.createElement("div");k.id="hiddenCopyElement",c.before(k)}if(typeof AbortSignal.any=="function"&&f!==at.DISABLE){let k=f;e.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):om(k)?(this.#a=new C8(this.container,c,this.#t,r,e,o,this.#n,this.#d,this.#h,this.#r,this.#f),r.dispatch("annotationeditoruimanager",{source:this,uiManager:this.#a}),k!==at.NONE&&(k===at.STAMP&&this.#f?.loadModel("altText"),this.#a.updateMode(k))):console.error(`Invalid AnnotationEditor mode: ${k}`)}let y=this._scrollMode===J.PAGE?null:c,v=this.currentScale,M=u.getViewport({scale:v*en.PDF_TO_CSS_UNITS});c.style.setProperty("--scale-factor",M.scale),o?.background&&c.style.setProperty("--page-bg-color",o.background),(o?.foreground==="CanvasText"||o?.background==="Canvas")&&(c.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),c.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(let k=1;k<=t;++k){let C=new Vc({container:y,eventBus:r,id:k,scale:v,defaultViewport:M.clone(),optionalContentConfigPromise:a,renderingQueue:this.renderingQueue,textLayerMode:m,annotationMode:g,imageResourcesPath:this.imageResourcesPath,maxCanvasPixels:this.maxCanvasPixels,pageColors:o,l10n:this.l10n,layerProperties:this._layerProperties,enableHWA:this.#l});this._pages.push(C)}this._pages[0]?.setPdfPage(u),this._scrollMode===J.PAGE?this.#A():this._spreadMode!==ze.NONE&&this._updateSpreadMode(),this.#x(l).then(()=>A(this,null,function*(){if(e!==this.pdfDocument)return;if(this.findController?.setDocument(e),this._scriptingManager?.setDocument(e),this.#y&&document.addEventListener("copy",this.#E.bind(this,m),{signal:l}),this.#a&&r.dispatch("annotationeditormodechanged",{source:this,mode:this.#i}),e.loadingParams.disableAutoFetch||t>_c.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let k=t-1;if(k<=0){this._pagesCapability.resolve();return}for(let C=2;C<=t;++C){let b=e.getPage(C).then(I=>{let E=this._pages[C-1];E.pdfPage||E.setPdfPage(I),--k===0&&this._pagesCapability.resolve()},I=>{console.error(`Unable to get page ${C} to initialize viewer`,I),--k===0&&this._pagesCapability.resolve()});C%_c.PAUSE_EAGER_PAGE_INIT===0&&(yield b)}})),r.dispatch("pagesinit",{source:this}),e.getMetadata().then(({info:k})=>{e===this.pdfDocument&&k.Language&&(c.lang=k.Language)}),this.defaultRenderingQueue&&this.update()}).catch(u=>{console.error("Unable to initialize viewer",u),this._pagesCapability.reject(u)})}setPageLabels(e){if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let t=0,n=this._pages.length;t<n;t++)this._pages[t].setPageLabel(this._pageLabels?.[t]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=Ru,this._currentScaleValue=null,this._pageLabels=null,this.#e=new fp(rm),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=J.VERTICAL,this._previousScrollMode=J.UNKNOWN,this._spreadMode=ze.NONE,this.#w={previousPageNumber:1,scrollDown:!0,pages:[]},this.#u?.abort(),this.#u=null,this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#y?.remove(),this.#y=null,this.#j()}#A(){if(this._scrollMode!==J.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");let e=this._currentPageNumber,t=this.#w,n=this.viewer;if(n.textContent="",t.pages.length=0,this._spreadMode===ze.NONE&&!this.isInPresentationMode){let a=this._pages[e-1];n.append(a.div),t.pages.push(a)}else{let a=new Set,s=this._spreadMode-1;s===-1?a.add(e-1):e%2!==s?(a.add(e-1),a.add(e)):(a.add(e-2),a.add(e-1));let r=document.createElement("div");if(r.className="spread",this.isInPresentationMode){let o=document.createElement("div");o.className="dummyPage",r.append(o)}for(let o of a){let c=this._pages[o];c&&(r.append(c.div),t.pages.push(c))}n.append(r)}t.scrollDown=e>=t.previousPageNumber,t.previousPageNumber=e}_scrollUpdate(){this.pagesCount!==0&&this.update()}#D(e,t=null){let{div:n,id:a}=e;if(this._currentPageNumber!==a&&this._setCurrentPageNumber(a),this._scrollMode===J.PAGE&&(this.#A(),this.update()),!t&&!this.isInPresentationMode){let s=n.offsetLeft+n.clientLeft,r=s+n.clientWidth,{scrollLeft:o,clientWidth:c}=this.container;(this._scrollMode===J.HORIZONTAL||s<o||r>o+c)&&(t={left:0,top:0})}lm(n,t),!this._currentScaleValue&&this._location&&(this._location=null)}#P(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}#I(e,t,{noScroll:n=!1,preset:a=!1,drawingDelay:s=-1,origin:r=null}){if(this._currentScaleValue=t.toString(),this.#P(e)){a&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t});return}this.viewer.style.setProperty("--scale-factor",e*en.PDF_TO_CSS_UNITS);let o=s>=0&&s<1e3;this.refresh(!0,{scale:e,drawingDelay:o?s:-1}),o&&(this.#b=setTimeout(()=>{this.#b=null,this.refresh()},s));let c=this._currentScale;if(this._currentScale=e,!n){let l=this._currentPageNumber,d;if(this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(l=this._location.pageNumber,d=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:l,destArray:d,allowNegativeOffset:!0}),Array.isArray(r)){let h=e/c-1,[u,p]=this.containerTopLeft;this.container.scrollLeft+=(r[0]-p)*h,this.container.scrollTop+=(r[1]-u)*h}}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:a?t:void 0}),this.defaultRenderingQueue&&this.update()}get#v(){return this._spreadMode!==ze.NONE&&this._scrollMode!==J.HORIZONTAL?2:1}#L(e,t){let n=parseFloat(e);if(n>0)t.preset=!1,this.#I(n,e,t);else{let a=this._pages[this._currentPageNumber-1];if(!a)return;let s=_y,r=Dy;this.isInPresentationMode?(s=r=4,this._spreadMode!==ze.NONE&&(s*=2)):this.removePageBorders?s=r=0:this._scrollMode===J.HORIZONTAL&&([s,r]=[r,s]);let o=(this.container.clientWidth-s)/a.width*a.scale/this.#v,c=(this.container.clientHeight-r)/a.height*a.scale;switch(e){case"page-actual":n=1;break;case"page-width":n=o;break;case"page-height":n=c;break;case"page-fit":n=Math.min(o,c);break;case"auto":let l=Ry(a)?o:Math.min(c,o);n=Math.min(Ub,l);break;default:console.error(`#setScale: "${e}" is an unknown zoom value.`);return}t.preset=!0,this.#I(n,e,t)}}#T(){let e=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#L(this._currentScaleValue,{noScroll:!0}),this.#D(e)}pageLabelToPageNumber(e){if(!this._pageLabels)return null;let t=this._pageLabels.indexOf(e);return t<0?null:t+1}scrollPageIntoView({pageNumber:e,destArray:t=null,allowNegativeOffset:n=!1,ignoreDestinationZoom:a=!1}){if(!this.pdfDocument)return;let s=Number.isInteger(e)&&this._pages[e-1];if(!s){console.error(`scrollPageIntoView: "${e}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!t){this._setCurrentPageNumber(e,!0);return}let r=0,o=0,c=0,l=0,d,h,u=s.rotation%180!==0,p=(u?s.height:s.width)/s.scale/en.PDF_TO_CSS_UNITS,f=(u?s.width:s.height)/s.scale/en.PDF_TO_CSS_UNITS,g=0;switch(t[1].name){case"XYZ":r=t[2],o=t[3],g=t[4],r=r!==null?r:0,o=o!==null?o:f;break;case"Fit":case"FitB":g="page-fit";break;case"FitH":case"FitBH":o=t[2],g="page-width",o===null&&this._location?(r=this._location.left,o=this._location.top):(typeof o!="number"||o<0)&&(o=f);break;case"FitV":case"FitBV":r=t[2],c=p,l=f,g="page-height";break;case"FitR":r=t[2],o=t[3],c=t[4]-r,l=t[5]-o;let M=_y,k=Dy;this.removePageBorders&&(M=k=0),d=(this.container.clientWidth-M)/c/en.PDF_TO_CSS_UNITS,h=(this.container.clientHeight-k)/l/en.PDF_TO_CSS_UNITS,g=Math.min(Math.abs(d),Math.abs(h));break;default:console.error(`scrollPageIntoView: "${t[1].name}" is not a valid destination type.`);return}if(a||(g&&g!==this._currentScale?this.currentScaleValue=g:this._currentScale===Ru&&(this.currentScaleValue=Vb)),g==="page-fit"&&!t[4]){this.#D(s);return}let m=[s.viewport.convertToViewportPoint(r,o),s.viewport.convertToViewportPoint(r+c,o+l)],y=Math.min(m[0][0],m[1][0]),v=Math.min(m[0][1],m[1][1]);n||(y=Math.max(y,0),v=Math.max(v,0)),this.#D(s,{left:y,top:v})}_updateLocation(e){let t=this._currentScale,n=this._currentScaleValue,a=parseFloat(n)===t?Math.round(t*1e4)/100:n,s=e.id,r=this._pages[s-1],o=this.container,c=r.getPagePoint(o.scrollLeft-e.x,o.scrollTop-e.y),l=Math.round(c[0]),d=Math.round(c[1]),h=`#page=${s}`;this.isInPresentationMode||(h+=`&zoom=${a},${l},${d}`),this._location={pageNumber:s,scale:a,top:d,left:l,rotation:this._pagesRotation,pdfOpenParams:h}}update(){let e=this._getVisiblePages(),t=e.views,n=t.length;if(n===0)return;let a=Math.max(rm,2*n+1);this.#e.resize(a,e.ids),this.renderingQueue.renderHighestPriority(e);let s=this._spreadMode===ze.NONE&&(this._scrollMode===J.PAGE||this._scrollMode===J.VERTICAL),r=this._currentPageNumber,o=!1;for(let c of t){if(c.percent<100)break;if(c.id===r&&s){o=!0;break}}this._setCurrentPageNumber(o?r:t[0].id),this._updateLocation(e.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}#N(){let e=this._getVisiblePages(),t=[],{ids:n,views:a}=e;for(let s of a){let{view:r}=s;if(!r.hasEditableAnnotations()){n.delete(r.id);continue}t.push(s)}return t.length===0?null:(this.renderingQueue.renderHighestPriority({first:t[0],last:t.at(-1),views:t,ids:n}),n)}containsElement(e){return this.container.contains(e)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===na.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===na.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){let e=this._scrollMode===J.PAGE?this.#w.pages:this._pages,t=this._scrollMode===J.HORIZONTAL,n=t&&this._isContainerRtl;return Gb({scrollEl:this.container,views:e,sortByVisibility:!0,horizontal:t,rtl:n})}cleanup(){for(let e of this._pages)e.renderingState!==Ce.FINISHED&&e.reset()}_cancelRendering(){for(let e of this._pages)e.cancelRendering()}#V(e){return A(this,null,function*(){if(e.pdfPage)return e.pdfPage;try{let t=yield this.pdfDocument.getPage(e.id);return e.pdfPage||e.setPdfPage(t),t}catch(t){return console.error("Unable to get page for page view",t),null}})}#B(e){if(e.first?.id===1)return!0;if(e.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case J.PAGE:return this.#w.scrollDown;case J.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(e){let t=e||this._getVisiblePages(),n=this.#B(t),a=this._spreadMode!==ze.NONE&&this._scrollMode!==J.HORIZONTAL,s=this.renderingQueue.getHighestPriority(t,this._pages,n,a);return s?(this.#V(s).then(()=>{this.renderingQueue.renderView(s)}),!0):!1}get hasEqualPageSizes(){let e=this._pages[0];for(let t=1,n=this._pages.length;t<n;++t){let a=this._pages[t];if(a.width!==e.width||a.height!==e.height)return!1}return!0}getPagesOverview(){let e;return this._pages.map(t=>{let n=t.pdfPage.getViewport({scale:1}),a=Ry(n);if(e===void 0)e=a;else if(this.enablePrintAutoRotate&&a!==e)return{width:n.height,height:n.width,rotation:(n.rotation-90)%360};return{width:n.width,height:n.height,rotation:n.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)}set optionalContentConfigPromise(e){if(!(e instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${e}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=e,this.refresh(!1,{optionalContentConfigPromise:e}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e}))}get scrollMode(){return this._scrollMode}set scrollMode(e){if(this._scrollMode!==e){if(!Xb(e))throw new Error(`Invalid scroll mode: ${e}`);this.pagesCount>_c.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=e,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(e=null){let t=this._scrollMode,n=this.viewer;n.classList.toggle("scrollHorizontal",t===J.HORIZONTAL),n.classList.toggle("scrollWrapped",t===J.WRAPPED),!(!this.pdfDocument||!e)&&(t===J.PAGE?this.#A():this._previousScrollMode===J.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#L(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(e){if(this._spreadMode!==e){if(!Zb(e))throw new Error(`Invalid spread mode: ${e}`);this._spreadMode=e,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(e=null){if(!this.pdfDocument)return;let t=this.viewer,n=this._pages;if(this._scrollMode===J.PAGE)this.#A();else if(t.textContent="",this._spreadMode===ze.NONE)for(let a of this._pages)t.append(a.div);else{let a=this._spreadMode-1,s=null;for(let r=0,o=n.length;r<o;++r)s===null?(s=document.createElement("div"),s.className="spread",t.append(s)):r%2===a&&(s=s.cloneNode(!1),t.append(s)),s.append(n[r].div)}e&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#L(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}_getPageAdvance(e,t=!1){switch(this._scrollMode){case J.WRAPPED:{let{views:n}=this._getVisiblePages(),a=new Map;for(let{id:s,y:r,percent:o,widthPercent:c}of n){if(o===0||c<100)continue;let l=a.get(r);l||a.set(r,l||=[]),l.push(s)}for(let s of a.values()){let r=s.indexOf(e);if(r===-1)continue;let o=s.length;if(o===1)break;if(t)for(let c=r-1,l=0;c>=l;c--){let d=s[c],h=s[c+1]-1;if(d<h)return e-h}else for(let c=r+1,l=o;c<l;c++){let d=s[c],h=s[c-1]+1;if(d>h)return h-e}if(t){let c=s[0];if(c<e)return e-c+1}else{let c=s[o-1];if(c>e)return c-e+1}break}break}case J.HORIZONTAL:break;case J.PAGE:case J.VERTICAL:{if(this._spreadMode===ze.NONE)break;let n=this._spreadMode-1;if(t&&e%2!==n)break;if(!t&&e%2===n)break;let{views:a}=this._getVisiblePages(),s=t?e-1:e+1;for(let{id:r,percent:o,widthPercent:c}of a)if(r===s){if(o>0&&c===100)return 2;break}break}}return 1}nextPage(){let e=this._currentPageNumber,t=this.pagesCount;if(e>=t)return!1;let n=this._getPageAdvance(e,!1)||1;return this.currentPageNumber=Math.min(e+n,t),!0}previousPage(){let e=this._currentPageNumber;if(e<=1)return!1;let t=this._getPageAdvance(e,!0)||1;return this.currentPageNumber=Math.max(e-t,1),!0}updateScale({drawingDelay:e,scaleFactor:t=null,steps:n=null,origin:a}){if(n===null&&t===null)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(!this.pdfDocument)return;let s=this._currentScale;if(t>0&&t!==1)s=Math.round(s*t*100)/100;else if(n){let r=n>0?Ly:1/Ly,o=n>0?Math.ceil:Math.floor;n=Math.abs(n);do s=o((s*r).toFixed(2)*10)/10;while(--n>0)}s=Math.max(zb,Math.min(qb,s)),this.#L(s,{noScroll:!1,drawingDelay:e,origin:a})}increaseScale(e={}){this.updateScale(re(D({},e),{steps:e.steps??1}))}decreaseScale(e={}){this.updateScale(re(D({},e),{steps:-(e.steps??1)}))}#F(e=this.container.clientHeight){e!==this.#M&&(this.#M=e,Kb.setProperty("--viewer-container-height",`${e}px`))}#H(e){for(let t of e)if(t.target===this.container){this.#F(Math.floor(t.borderBoxSize[0].blockSize)),this.#c=null;break}}get containerTopLeft(){return this.#c||=[this.container.offsetTop,this.container.offsetLeft]}#j(){this.#p?.abort(),this.#p=null,this.#g!==null&&(clearTimeout(this.#g),this.#g=null)}get annotationEditorMode(){return this.#a?this.#i:at.DISABLE}set annotationEditorMode({mode:e,editId:t=null,isFromKeyboard:n=!1}){if(!this.#a)throw new Error("The AnnotationEditor is not enabled.");if(this.#i===e)return;if(!om(e))throw new Error(`Invalid AnnotationEditor mode: ${e}`);if(!this.pdfDocument)return;e===at.STAMP&&this.#f?.loadModel("altText");let{eventBus:a}=this,s=()=>{this.#j(),this.#i=e,this.#a.updateMode(e,t,n),a.dispatch("annotationeditormodechanged",{source:this,mode:e})};if(e===at.NONE||this.#i===at.NONE){let r=e!==at.NONE;r||this.pdfDocument.annotationStorage.resetModifiedIds();for(let c of this._pages)c.toggleEditingMode(r);let o=this.#N();if(r&&o){this.#j(),this.#p=new AbortController;let c=AbortSignal.any([this.#u.signal,this.#p.signal]);a._on("pagerendered",({pageNumber:l})=>{o.delete(l),o.size===0&&(this.#g=setTimeout(s,0))},{signal:c});return}}s()}refresh(e=!1,t=Object.create(null)){if(this.pdfDocument){for(let n of this._pages)n.update(t);this.#b!==null&&(clearTimeout(this.#b),this.#b=null),e||this.update()}}},gp=class extends zc{_resetView(){super._resetView(),this._scrollMode=J.PAGE,this._spreadMode=ze.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}};var S6=Me.AnnotationLayerBuilder,E6=Me.DownloadManager,L6=Me.EventBus,_6=Me.FindState,yp=Me.GenericL10n,hi=Me.LinkTarget,mp=Me.PDFFindController,D6=Me.PDFHistory,kp=Me.PDFLinkService,T6=Me.PDFPageView,P6=Me.PDFScriptingManager,vp=Me.PDFSinglePageViewer,Mp=Me.PDFViewer,R6=Me.ProgressBar,O6=Me.RenderingStates,F6=Me.ScrollMode,N6=Me.SimpleLinkService,H6=Me.SpreadMode,j6=Me.StructTreeLayerBuilder,B6=Me.TextLayerBuilder,V6=Me.XfaLayerBuilder,z6=Me.parseQueryString;var q6=["pdfViewerContainer"];function U6(i,e){let t=new i.EventBus;return W6(t,e),t}function W6(i,e){pe(i,"documentload").pipe(fe(e)).subscribe(()=>{let t=document.createEvent("CustomEvent");t.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(t)}),pe(i,"pagerendered").pipe(fe(e)).subscribe(({pageNumber:t,cssTransform:n,source:a})=>{let s=document.createEvent("CustomEvent");s.initCustomEvent("pagerendered",!0,!0,{pageNumber:t,cssTransform:n}),a.div.dispatchEvent(s)}),pe(i,"textlayerrendered").pipe(fe(e)).subscribe(({pageNumber:t,source:n})=>{let a=document.createEvent("CustomEvent");a.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:t}),n.textLayerDiv?.dispatchEvent(a)}),pe(i,"pagechanging").pipe(fe(e)).subscribe(({pageNumber:t,source:n})=>{let a=document.createEvent("UIEvents");a.initEvent("pagechanging",!0,!0),a.pageNumber=t,n.container.dispatchEvent(a)}),pe(i,"pagesinit").pipe(fe(e)).subscribe(({source:t})=>{let n=document.createEvent("CustomEvent");n.initCustomEvent("pagesinit",!0,!0,null),t.container.dispatchEvent(n)}),pe(i,"pagesloaded").pipe(fe(e)).subscribe(({pagesCount:t,source:n})=>{let a=document.createEvent("CustomEvent");a.initCustomEvent("pagesloaded",!0,!0,{pagesCount:t}),n.container.dispatchEvent(a)}),pe(i,"scalechange").pipe(fe(e)).subscribe(({scale:t,presetValue:n,source:a})=>{let s=document.createEvent("UIEvents");s.initEvent("scalechange",!0,!0),s.scale=t,s.presetValue=n,a.container.dispatchEvent(s)}),pe(i,"updateviewarea").pipe(fe(e)).subscribe(({location:t,source:n})=>{let a=document.createEvent("UIEvents");a.initEvent("updateviewarea",!0,!0),a.location=t,n.container.dispatchEvent(a)}),pe(i,"find").pipe(fe(e)).subscribe(({source:t,type:n,query:a,phraseSearch:s,caseSensitive:r,highlightAll:o,findPrevious:c})=>{if(t===window)return;let l=document.createEvent("CustomEvent");l.initCustomEvent("find"+n,!0,!0,{query:a,phraseSearch:s,caseSensitive:r,highlightAll:o,findPrevious:c}),window.dispatchEvent(l)}),pe(i,"attachmentsloaded").pipe(fe(e)).subscribe(({attachmentsCount:t,source:n})=>{let a=document.createEvent("CustomEvent");a.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:t}),n.container.dispatchEvent(a)}),pe(i,"sidebarviewchanged").pipe(fe(e)).subscribe(({view:t,source:n})=>{let a=document.createEvent("CustomEvent");a.initCustomEvent("sidebarviewchanged",!0,!0,{view:t}),n.outerContainer.dispatchEvent(a)}),pe(i,"pagemode").pipe(fe(e)).subscribe(({mode:t,source:n})=>{let a=document.createEvent("CustomEvent");a.initCustomEvent("pagemode",!0,!0,{mode:t}),n.pdfViewer.container.dispatchEvent(a)}),pe(i,"namedaction").pipe(fe(e)).subscribe(({action:t,source:n})=>{let a=document.createEvent("CustomEvent");a.initCustomEvent("namedaction",!0,!0,{action:t}),n.pdfViewer.container.dispatchEvent(a)}),pe(i,"presentationmodechanged").pipe(fe(e)).subscribe(({active:t,switchInProgress:n})=>{let a=document.createEvent("CustomEvent");a.initCustomEvent("presentationmodechanged",!0,!0,{active:t,switchInProgress:n}),window.dispatchEvent(a)}),pe(i,"outlineloaded").pipe(fe(e)).subscribe(({outlineCount:t,source:n})=>{let a=document.createEvent("CustomEvent");a.initCustomEvent("outlineloaded",!0,!0,{outlineCount:t}),n.container.dispatchEvent(a)})}function bp(i,e,t){i[e]=t}function Ds(){return typeof window>"u"}Ds()||bp(ta,"verbosity",Tu.INFOS);typeof Promise.withResolvers>"u"&&window&&(window.Promise.withResolvers=()=>{let i,e;return{promise:new Promise((n,a)=>{i=n,e=a}),resolve:i,reject:e}});var Cp=(function(i){return i[i.DISABLED=0]="DISABLED",i[i.ENABLED=1]="ENABLED",i[i.ENHANCED=2]="ENHANCED",i})(Cp||{}),fm=(()=>{class i{element;ngZone;static CSS_UNITS=96/72;static BORDER_WIDTH=9;pdfViewerContainer;eventBus;pdfLinkService;pdfFindController;pdfViewer;isVisible=!1;_cMapsUrl=typeof ta<"u"?`https://unpkg.com/pdfjs-dist@${xs}/cmaps/`:null;_imageResourcesPath=typeof ta<"u"?`https://unpkg.com/pdfjs-dist@${xs}/web/images/`:void 0;_renderText=!0;_renderTextMode=Cp.ENABLED;_stickToPage=!1;_originalSize=!0;_pdf;_page=1;_zoom=1;_zoomScale="page-width";_rotation=0;_showAll=!0;_canAutoResize=!0;_fitToPage=!1;_externalLinkTarget="blank";_showBorders=!1;lastLoaded;_latestScrolledPage;pageScrollTimeout=null;isInitialized=!1;loadingTask;destroy$=new kt;afterLoadComplete=new Te;pageRendered=new Te;pageInitialized=new Te;textLayerRendered=new Te;onError=new Te;onProgress=new Te;pageChange=new Te(!0);src;set cMapsUrl(t){this._cMapsUrl=t}set page(t){t=parseInt(t,10)||1;let n=t;this._pdf&&(t=this.getValidPageNumber(t)),this._page=t,n!==t&&this.pageChange.emit(t)}set renderText(t){this._renderText=t}set renderTextMode(t){this._renderTextMode=t}set originalSize(t){this._originalSize=t}set showAll(t){this._showAll=t}set stickToPage(t){this._stickToPage=t}set zoom(t){t<=0||(this._zoom=t)}get zoom(){return this._zoom}set zoomScale(t){this._zoomScale=t}get zoomScale(){return this._zoomScale}set rotation(t){if(!(typeof t=="number"&&t%90===0)){console.warn("Invalid pages rotation angle.");return}this._rotation=t}set externalLinkTarget(t){this._externalLinkTarget=t}set autoresize(t){this._canAutoResize=!!t}set fitToPage(t){this._fitToPage=!!t}set showBorders(t){this._showBorders=!!t}static getLinkTarget(t){switch(t){case"blank":return hi.BLANK;case"none":return hi.NONE;case"self":return hi.SELF;case"parent":return hi.PARENT;case"top":return hi.TOP}return null}constructor(t,n){if(this.element=t,this.ngZone=n,Ds())return;let a,s=xs,r=window[`pdfWorkerSrc${s}`];r?a=r:window.hasOwnProperty("pdfWorkerSrc")&&typeof window.pdfWorkerSrc=="string"&&window.pdfWorkerSrc?a=window.pdfWorkerSrc:a=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${s}/legacy/build/pdf.worker.min.mjs`,bp(Du,"workerSrc",a)}ngAfterViewChecked(){if(this.isInitialized)return;let t=this.pdfViewerContainer.nativeElement.offsetParent;if(this.isVisible===!0&&t==null){this.isVisible=!1;return}this.isVisible===!1&&t!=null&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})}))}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(t){if(!(Ds()||!this.isVisible)){if("src"in t)this.loadPDF();else if(this._pdf){if(("renderText"in t||"showAll"in t)&&(this.setupViewer(),this.resetPdfDocument()),"page"in t){let{page:n}=t;if(n.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}}updateSize(){ar(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe(fe(this.destroy$)).subscribe({next:t=>{let n=this._rotation+t.rotate,a=t.getViewport({scale:this._zoom,rotation:n}).width*i.CSS_UNITS,s=this._zoom,r=!0;if(!this._originalSize||this._fitToPage&&a>this.pdfViewerContainer.nativeElement.clientWidth){let o=t.getViewport({scale:1,rotation:n});s=this.getScale(o.width,o.height),r=!this._stickToPage}this.pdfViewer.currentScale=s,r&&this.pdfViewer.scrollPageIntoView({pageNumber:t.pageNumber,ignoreDestinationZoom:!0})}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){let t=i.getLinkTarget(this._externalLinkTarget);return t?{externalLinkTarget:t}:{}}initEventBus(){this.eventBus=U6(wp,this.destroy$),pe(this.eventBus,"pagerendered").pipe(fe(this.destroy$)).subscribe(t=>{this.pageRendered.emit(t)}),pe(this.eventBus,"pagesinit").pipe(fe(this.destroy$)).subscribe(t=>{this.pageInitialized.emit(t)}),pe(this.eventBus,"pagechanging").pipe(fe(this.destroy$)).subscribe(({pageNumber:t})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=t,this.pageChange.emit(t)},100)}),pe(this.eventBus,"textlayerrendered").pipe(fe(this.destroy$)).subscribe(t=>{this.textLayerRendered.emit(t)})}initPDFServices(){this.pdfLinkService=new kp(D({eventBus:this.eventBus},this.getPDFLinkServiceConfig())),this.pdfFindController=new mp({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:Cp.DISABLED,findController:this.pdfFindController,l10n:new yp("en"),imageResourcesPath:this._imageResourcesPath,annotationEditorMode:_u.DISABLE}}setupViewer(){this.pdfViewer&&this.pdfViewer.setDocument(null),bp(ta,"disableTextLayer",!this._renderText),this.initPDFServices(),this._showAll?this.pdfViewer=new Mp(this.getPDFOptions()):this.pdfViewer=new vp(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(t){return t<1?1:t>this._pdf.numPages?this._pdf.numPages:t}getDocumentParams(){let t=typeof this.src;if(!this._cMapsUrl)return this.src;let n={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return n.isEvalSupported=!1,t==="string"?n.url=this.src:t==="object"&&(this.src.byteLength!==void 0?n.data=this.src:Object.assign(n,this.src)),n}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src){this.update();return}this.clear(),this.setupViewer(),this.loadingTask=Pu(this.getDocumentParams()),this.loadingTask.onProgress=n=>{this.onProgress.emit(n)};let t=this.src;ar(this.loadingTask.promise).pipe(fe(this.destroy$)).subscribe({next:n=>{this._pdf=n,this.lastLoaded=t,this.afterLoadComplete.emit(n),this.resetPdfDocument(),this.update()},error:n=>{this.lastLoaded=null,this.onError.emit(n)}})}update(){this.page=this._page,this.render()}render(){if(this._page=this.getValidPageNumber(this._page),(this._rotation!==0||this.pdfViewer.pagesRotation!==this._rotation)&&this.pdfViewer.firstPagePromise?.then(()=>this.pdfViewer.pagesRotation=this._rotation),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.pdfViewer._pages?.length)this.updateSize();else{let t=this.pageInitialized.subscribe(()=>{this.updateSize(),t.unsubscribe()})}}getScale(t,n){let a=this._showBorders?2*i.BORDER_WIDTH:0,s=this.pdfViewerContainer.nativeElement.clientWidth-a,r=this.pdfViewerContainer.nativeElement.clientHeight-a;if(r===0||n===0||s===0||t===0)return 1;let o=1;switch(this._zoomScale){case"page-fit":o=Math.min(r/n,s/t);break;case"page-height":o=r/n;break;default:o=s/t;break}return this._zoom*o/i.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){Ds()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){Ds()||this.ngZone.runOutsideAngular(()=>{pe(window,"resize").pipe(pl(100),ul(()=>this._canAutoResize&&!!this._pdf),fe(this.destroy$)).subscribe(()=>{this.updateSize()})})}static \u0275fac=function(n){return new(n||i)(de(ft),de(ye))};static \u0275cmp=We({type:i,selectors:[["pdf-viewer"]],viewQuery:function(n,a){if(n&1&&Gi(q6,5),n&2){let s;Xi(s=Zi())&&(a.pdfViewerContainer=s.first)}},inputs:{src:"src",cMapsUrl:[0,"c-maps-url","cMapsUrl"],page:"page",renderText:[0,"render-text","renderText"],renderTextMode:[0,"render-text-mode","renderTextMode"],originalSize:[0,"original-size","originalSize"],showAll:[0,"show-all","showAll"],stickToPage:[0,"stick-to-page","stickToPage"],zoom:"zoom",zoomScale:[0,"zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:[0,"external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:[0,"fit-to-page","fitToPage"],showBorders:[0,"show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},standalone:!1,features:[Hi],decls:3,vars:0,consts:[["pdfViewerContainer",""],[1,"ng2-pdf-viewer-container"],[1,"pdfViewer"]],template:function(n,a){n&1&&(_(0,"div",1,0),W(2,"div",2),P())},styles:[`.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none;transform-origin:0 0}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .canvasWrapper canvas{width:100%}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}`]})}return i})(),gm=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=pn({type:i});static \u0275inj=zt({})}return i})();var G6=["*"],wn=class i{constructor(e){this.elementRef=e}text="";position="bottom";isVisible=!1;currentPosition="bottom";show(){this.currentPosition=this.position,this.isVisible=!0,setTimeout(()=>{this.updatePosition()},0)}hide(){this.isVisible=!1}updatePosition(){if(!this.isVisible)return;let e=this.elementRef.nativeElement.getBoundingClientRect(),t=window.innerHeight,n=window.innerWidth;this.position==="bottom"&&t-e.bottom<60&&(this.currentPosition="top")}static \u0275fac=function(t){return new(t||i)(de(ft))};static \u0275cmp=We({type:i,selectors:[["app-tooltip"]],inputs:{text:"text",position:"position"},ngContentSelectors:G6,decls:5,vars:19,consts:[[1,"tooltip-container",3,"mouseenter","mouseleave"],[1,"tooltip-box"],[1,"tooltip-arrow"]],template:function(t,n){t&1&&(ei(),fn(0,"div",0),go("mouseenter",function(){return n.show()})("mouseleave",function(){return n.hide()}),ti(1),fn(2,"div",1),ke(3),$i(4,"div",2),Jn()()),t&2&&(ge(2),Ki("visible",n.isVisible)("position-top",n.currentPosition==="top")("position-bottom",n.currentPosition==="bottom")("position-left",n.currentPosition==="left")("position-right",n.currentPosition==="right")("position-top-left",n.currentPosition==="top-left")("position-top-right",n.currentPosition==="top-right")("position-bottom-left",n.currentPosition==="bottom-left")("position-bottom-right",n.currentPosition==="bottom-right"),ge(),ni(" ",n.text," "))},dependencies:[yn],styles:[`.tooltip-container{position:relative;display:inline-flex;justify-content:center;align-items:center}.tooltip-box{position:absolute;opacity:0;visibility:hidden;transform:scale(.95);transition:opacity .2s cubic-bezier(.4,0,.2,1),visibility .2s,transform .2s cubic-bezier(.4,0,.2,1);z-index:2000;padding:.5rem 1rem;border-radius:8px;font-size:.875rem;font-weight:500;white-space:nowrap;pointer-events:none;background:var(--bg-color);color:var(--text-color);border:1px solid var(--border-color);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}:host-context(.dark-theme) .tooltip-box{box-shadow:0 0 15px #ffffff0d,0 10px 15px -3px #00000080}.tooltip-box.visible{opacity:1;visibility:visible;transform:scale(1)}.tooltip-arrow{position:absolute;width:10px;height:10px;background:inherit;border:inherit;border-left-color:transparent;border-top-color:transparent;transform:rotate(45deg);z-index:-1}.tooltip-arrow:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:inherit;z-index:-1}.tooltip-box.position-top{bottom:100%;left:50%;transform:translate(-50%) translateY(-8px) scale(.95);margin-bottom:8px}.tooltip-box.visible.position-top{transform:translate(-50%) translateY(0) scale(1)}.tooltip-box.position-top .tooltip-arrow{bottom:-6px;left:50%;transform:translate(-50%) rotate(45deg)}.tooltip-box.position-bottom{top:100%;left:50%;transform:translate(-50%) translateY(8px) scale(.95);margin-top:8px}.tooltip-box.visible.position-bottom{transform:translate(-50%) translateY(0) scale(1)}.tooltip-box.position-bottom .tooltip-arrow{top:-6px;left:50%;transform:translate(-50%) rotate(225deg)}.tooltip-box.position-left{right:100%;top:50%;transform:translateY(-50%) translate(-8px) scale(.95);margin-right:8px}.tooltip-box.visible.position-left{transform:translateY(-50%) translate(0) scale(1)}.tooltip-box.position-left .tooltip-arrow{right:-6px;top:50%;transform:translateY(-50%) rotate(315deg)}.tooltip-box.position-right{left:100%;top:50%;transform:translateY(-50%) translate(8px) scale(.95);margin-left:8px}.tooltip-box.visible.position-right{transform:translateY(-50%) translate(0) scale(1)}.tooltip-box.position-right .tooltip-arrow{left:-6px;top:50%;transform:translateY(-50%) rotate(135deg)}.tooltip-box.position-top-left{bottom:100%;right:50%;transform:translate(20px) translateY(-8px) scale(.95);margin-bottom:8px}.tooltip-box.visible.position-top-left{transform:translate(20px) translateY(0) scale(1)}.tooltip-box.position-top-left .tooltip-arrow{bottom:-6px;right:20px;transform:rotate(45deg)}.tooltip-box.position-top-right{bottom:100%;left:50%;transform:translate(-20px) translateY(-8px) scale(.95);margin-bottom:8px}.tooltip-box.visible.position-top-right{transform:translate(-20px) translateY(0) scale(1)}.tooltip-box.position-top-right .tooltip-arrow{bottom:-6px;left:20px;transform:rotate(45deg)}.tooltip-box.position-bottom-left{top:100%;right:50%;transform:translate(20px) translateY(8px) scale(.95);margin-top:8px}.tooltip-box.visible.position-bottom-left{transform:translate(20px) translateY(0) scale(1)}.tooltip-box.position-bottom-left .tooltip-arrow{top:-6px;right:20px;transform:rotate(225deg)}.tooltip-box.position-bottom-right{top:100%;left:50%;transform:translate(-20px) translateY(8px) scale(.95);margin-top:8px}.tooltip-box.visible.position-bottom-right{transform:translate(-20px) translateY(0) scale(1)}.tooltip-box.position-bottom-right .tooltip-arrow{top:-6px;left:20px;transform:rotate(225deg)}
`],encapsulation:2})};var bn=class i{THEME_KEY="user-theme-preference";themeSubject;theme$;constructor(){let e=this.getInitialTheme();this.themeSubject=new Sn(e),this.theme$=this.themeSubject.asObservable()}getInitialTheme(){let e=localStorage.getItem(this.THEME_KEY);return e||this.getSystemTheme()}getSystemTheme(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}initTheme(){let e=this.themeSubject.value;this.applyTheme(e),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{if(!localStorage.getItem(this.THEME_KEY)){let n=t.matches?"dark":"light";this.setTheme(n)}})}toggleTheme(){let e=this.themeSubject.value==="light"?"dark":"light";this.setTheme(e),localStorage.setItem(this.THEME_KEY,e)}getTheme(){return this.themeSubject.value}setTheme(e){this.themeSubject.next(e),this.applyTheme(e)}applyTheme(e){let t=document.body;t.classList.remove("light-theme","dark-theme"),t.classList.add(`${e}-theme`)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=le({token:i,factory:i.\u0275fac,providedIn:"root"})};var Uc=class i{constructor(e){this.themeService=e}close=new Te;pdfSrc="./assets/resume.pdf";zoom=1;themeSubscription;ngOnInit(){this.themeSubscription=this.themeService.theme$.subscribe(e=>{this.pdfSrc=e==="dark"?"./assets/resume-dark.pdf":"./assets/resume.pdf"})}ngOnDestroy(){this.themeSubscription&&this.themeSubscription.unsubscribe()}closeViewer(){this.close.emit()}downloadResume(){let e=document.createElement("a");e.href=this.pdfSrc,e.download="Ashish_Bhatt_Resume.pdf",e.click()}zoomIn(){this.zoom+=.1}zoomOut(){this.zoom>.5&&(this.zoom-=.1)}static \u0275fac=function(t){return new(t||i)(de(bn))};static \u0275cmp=We({type:i,selectors:[["app-resume-viewer"]],outputs:{close:"close"},decls:19,vars:5,consts:[[1,"resume-overlay",3,"click"],[1,"resume-container",3,"click"],[1,"resume-toolbar"],[1,"zoom-controls"],["text","Zoom Out","position","bottom-right"],[3,"click"],["text","Zoom In","position","bottom-left"],[1,"action-controls"],[1,"btn","download-btn",3,"click"],[1,"btn","close-btn",3,"click"],[1,"pdf-wrapper"],[2,"display","block","width","100%","height","100%",3,"src","render-text","original-size","zoom"]],template:function(t,n){t&1&&(_(0,"div",0),ne("click",function(){return n.closeViewer()}),_(1,"div",1),ne("click",function(s){return s.stopPropagation()}),_(2,"div",2)(3,"div",3)(4,"app-tooltip",4)(5,"button",5),ne("click",function(){return n.zoomOut()}),ke(6,"-"),P()(),_(7,"span"),ke(8),P(),_(9,"app-tooltip",6)(10,"button",5),ne("click",function(){return n.zoomIn()}),ke(11,"+"),P()()(),_(12,"div",7)(13,"button",8),ne("click",function(){return n.downloadResume()}),ke(14,"Download"),P(),_(15,"button",9),ne("click",function(){return n.closeViewer()}),ke(16,"Close"),P()()(),_(17,"div",10),W(18,"pdf-viewer",11),P()()()),t&2&&(ge(8),ni("",(n.zoom*100).toFixed(0),"%"),ge(10),Ne("src",n.pdfSrc)("render-text",!0)("original-size",!1)("zoom",n.zoom))},dependencies:[yn,gm,fm,wn],styles:[".resume-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000d9;z-index:1000;display:flex;justify-content:center;align-items:center;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.resume-container[_ngcontent-%COMP%]{width:90%;max-width:1000px;height:90%;background-color:var(--bg-color);color:var(--text-color);border-radius:8px;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 10px 25px #00000080;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.resume-toolbar[_ngcontent-%COMP%]{padding:1rem;background-color:var(--bg-color);border-bottom:1px solid var(--border-color);display:flex;justify-content:space-between;align-items:center}.zoom-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.zoom-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;border:1px solid var(--border-color);background:var(--bg-color);color:var(--text-color);border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:700}.zoom-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--border-color)}.action-controls[_ngcontent-%COMP%]{display:flex;gap:1rem}.btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .2s}.download-btn[_ngcontent-%COMP%]{background-color:#76b3d1;color:#fff}.download-btn[_ngcontent-%COMP%]:hover{background-color:#5a9bbd}.close-btn[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.close-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}.pdf-wrapper[_ngcontent-%COMP%]{flex:1;overflow:auto;background-color:var(--border-color);position:relative}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@media(max-width:768px){.resume-container[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:0}.resume-toolbar[_ngcontent-%COMP%]{padding:.5rem;justify-content:flex-end}.zoom-controls[_ngcontent-%COMP%]{display:none}}"]})};var X6=["*"];var ym=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]];var mm=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]];var km=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]];var vm=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]];var Mm=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]];var wm=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]];var Ts={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},Ip=new K("LucideIcons",{factory:()=>new Ps({})}),Ps=class{constructor(e){this.icons=e}getIcon(e){return this.hasIcon(e)?this.icons[e]:null}hasIcon(e){return typeof this.icons=="object"&&e in this.icons}},Z6=(()=>{class i{constructor(){this.color=Ts.stroke,this.size=Ts.width,this.strokeWidth=Ts["stroke-width"],this.absoluteStrokeWidth=!1}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=le({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),K6=i=>{for(let e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};function Y6(i,e=3){return parseFloat(i.toFixed(e)).toString(10)}var bm=(()=>{class i{constructor(t,n,a,s,r){this.elem=t,this.renderer=n,this.changeDetector=a,this.iconProviders=s,this.iconConfig=r,this.absoluteStrokeWidth=!1,this.defaultSize=Ts.height}get size(){return this._size??this.iconConfig.size}set size(t){t?this._size=this.parseNumber(t):delete this._size}get strokeWidth(){return this._strokeWidth??this.iconConfig.strokeWidth}set strokeWidth(t){t?this._strokeWidth=this.parseNumber(t):delete this._strokeWidth}ngOnChanges(t){if(t.name||t.img||t.color||t.size||t.absoluteStrokeWidth||t.strokeWidth||t.class){this.color=this.color??this.iconConfig.color,this.size=this.parseNumber(this.size??this.iconConfig.size),this.strokeWidth=this.parseNumber(this.strokeWidth??this.iconConfig.strokeWidth),this.absoluteStrokeWidth=this.absoluteStrokeWidth??this.iconConfig.absoluteStrokeWidth;let n=this.img??this.name,a=this.getRestAttributes();if(K6(a)||this.renderer.setAttribute(this.elem.nativeElement,"aria-hidden","true"),typeof n=="string"){let s=this.getIcon(this.toPascalCase(n));if(s)this.replaceElement(s);else throw new Error(`The "${n}" icon has not been provided by any available icon providers.`)}else if(Array.isArray(n))this.replaceElement(n);else throw new Error("No icon name or image has been provided.")}this.changeDetector.markForCheck()}replaceElement(t){let n=this.elem.nativeElement.childNodes,a=re(D({},Ts),{width:this.size,height:this.size,stroke:this.color??this.iconConfig.color,"stroke-width":this.absoluteStrokeWidth?Y6(this.strokeWidth/(this.size/this.defaultSize)):this.strokeWidth.toString(10)}),s=this.createElement(["svg",a,t]);s.classList.add("lucide"),typeof this.name=="string"&&s.classList.add(`lucide-${this.name.replace("_","-")}`),this.class&&s.classList.add(...this.class.split(/ /).map(r=>r.trim()).filter(r=>r.length>0));for(let r of n)this.renderer.removeChild(this.elem.nativeElement,r);this.renderer.appendChild(this.elem.nativeElement,s)}getRestAttributes(){let t=this.elem.nativeElement.attributes;return Object.fromEntries(Array.from(t).map(a=>[a.name,a.value]))}toPascalCase(t){return t.replace(/(\w)([a-z0-9]*)(_|-|\s*)/g,(n,a,s)=>a.toUpperCase()+s.toLowerCase())}parseNumber(t){if(typeof t=="string"){let n=parseInt(t,10);if(isNaN(n))throw new Error(`${t} is not numeric.`);return n}return t}getIcon(t){for(let n of Array.isArray(this.iconProviders)?this.iconProviders:[this.iconProviders])if(n.hasIcon(t))return n.getIcon(t);return null}createElement([t,n,a=[]]){let s=this.renderer.createElement(t,"http://www.w3.org/2000/svg");return Object.keys(n).forEach(r=>{let o=typeof n[r]=="string"?n[r]:n[r].toString(10);this.renderer.setAttribute(s,r,o)}),a.length&&a.forEach(r=>{let o=this.createElement(r);this.renderer.appendChild(s,o)}),s}}return i.\u0275fac=function(t){return new(t||i)(de(ft),de(zi),de(_h),de(Ip),de(Z6))},i.\u0275cmp=We({type:i,selectors:[["lucide-angular"],["lucide-icon"],["i-lucide"],["span-lucide"]],inputs:{class:"class",name:"name",img:"img",color:"color",absoluteStrokeWidth:"absoluteStrokeWidth",size:"size",strokeWidth:"strokeWidth"},standalone:!1,features:[Hi],ngContentSelectors:X6,decls:1,vars:0,template:function(t,n){t&1&&(ei(),ti(0))},encapsulation:2}),i})(),Ap=class{constructor(e){this.icons=e}},Q6=i=>new Ps(i??{}),Cm=(()=>{class i{static pick(t){return{ngModule:i,providers:[{provide:Ip,multi:!0,useValue:new Ps(t)},{provide:Ip,multi:!0,useFactory:Q6,deps:[[new Jd,Ap]]}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=pn({type:i}),i.\u0275inj=zt({imports:[[]]}),i})();var Wc=class i{constructor(e){this.themeService=e;this.themeService.theme$.subscribe(t=>{this.currentTheme=t})}Home=mm;User=wm;Briefcase=ym;Mail=km;Sun=Mm;Moon=vm;currentTheme="light";isMobile=!1;ngOnInit(){this.checkScreenSize()}onResize(e){this.checkScreenSize()}checkScreenSize(){this.isMobile=window.innerWidth<=768}onPortfolioClick(){window.scrollTo({top:0,behavior:"smooth"})}toggleTheme(){this.themeService.toggleTheme()}static \u0275fac=function(t){return new(t||i)(de(bn))};static \u0275cmp=We({type:i,selectors:[["app-navbar"]],hostBindings:function(t,n){t&1&&ne("resize",function(s){return n.onResize(s)},sh)},decls:46,vars:9,consts:[[1,"navbar"],[1,"nav-left"],["href","#home",1,"logo","portfolio-link",3,"click"],[1,"nav-center"],["href","#home"],["text","Home","position","bottom"],[3,"img"],["href","#about"],["text","About","position","bottom"],["href","#projects"],["text","Projects","position","bottom"],["href","#contact"],["text","Contact","position","bottom"],[1,"nav-right"],["href","https://www.facebook.com/fallenaspen","target","_blank"],["text","Facebook","position","bottom"],["icon","logos:facebook"],["href","https://www.linkedin.com/in/thatashishbhatt/","target","_blank"],["text","LinkedIn","position","bottom"],["icon","skill-icons:linkedin"],["href","https://github.com/zzzastro","target","_blank"],["text","GitHub","position","bottom"],["icon","skill-icons:github-dark"],[3,"text","position"],[1,"theme-toggle",3,"click"],["xmlns","http://www.w3.org/2000/svg","aria-hidden","true","width","1em","height","1em","fill","currentColor","viewBox","0 0 32 32",1,"theme-toggle__around"],["id","theme-toggle__around__cutout"],["d","M0 0h32v32H0z"],["clip-path","url(#theme-toggle__around__cutout)"],["cx","16","cy","16","r","8.2"],["cx","16","cy","16","r","8.2",1,"theme-toggle__cutout"],["cx","16","cy","3.3","r","2.3"],["cx","27","cy","9.7","r","2.3"],["cx","27","cy","22.3","r","2.3"],["cx","16","cy","28.7","r","2.3"],["cx","5","cy","22.3","r","2.3"],["cx","5","cy","9.7","r","2.3"]],template:function(t,n){t&1&&(_(0,"nav",0)(1,"div",1)(2,"a",2),ne("click",function(){return n.onPortfolioClick()}),ke(3,"Portfolio"),P()(),_(4,"ul",3)(5,"li")(6,"a",4)(7,"app-tooltip",5),W(8,"lucide-icon",6),P()()(),_(9,"li")(10,"a",7)(11,"app-tooltip",8),W(12,"lucide-icon",6),P()()(),_(13,"li")(14,"a",9)(15,"app-tooltip",10),W(16,"lucide-icon",6),P()()(),_(17,"li")(18,"a",11)(19,"app-tooltip",12),W(20,"lucide-icon",6),P()()()(),_(21,"div",13)(22,"a",14)(23,"app-tooltip",15),W(24,"iconify-icon",16),P()(),_(25,"a",17)(26,"app-tooltip",18),W(27,"iconify-icon",19),P()(),_(28,"a",20)(29,"app-tooltip",21),W(30,"iconify-icon",22),P()(),_(31,"app-tooltip",23)(32,"button",24),ne("click",function(){return n.toggleTheme()}),Er(),_(33,"svg",25)(34,"clipPath",26),W(35,"path",27),P(),_(36,"g",28),W(37,"circle",29)(38,"circle",30),_(39,"g"),W(40,"circle",31)(41,"circle",32)(42,"circle",33)(43,"circle",34)(44,"circle",35)(45,"circle",36),P()()()()()()()),t&2&&(ge(8),Ne("img",n.Home),ge(4),Ne("img",n.User),ge(4),Ne("img",n.Briefcase),ge(4),Ne("img",n.Mail),ge(11),Ne("text",n.currentTheme==="light"?"Toggle Dark":"Toggle Light")("position",n.isMobile?"left":"bottom"),ge(),Wi("aria-label",n.currentTheme==="light"?"Toggle Dark":"Toggle Light"),ge(),Ki("theme-toggle--dark",n.currentTheme==="dark"))},dependencies:[Cm,bm,wn],styles:[`.nav-left .logo.portfolio-link:hover{transform:scale(1.2);filter:brightness(1.2)}.nav-left .logo.portfolio-link:hover{transform:scale(1.05)}.navbar{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem;background:#ffffff1a;backdrop-filter:blur(10px) saturate(180%);-webkit-backdrop-filter:blur(10px) saturate(180%);border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 32px #0000001a;color:#fff;position:fixed;top:0;z-index:100;width:90%;left:50%;transform:translate(-50%);top:.5rem;border-radius:2rem;box-sizing:border-box}.light-theme .navbar{background:#ffffffd9;border:1px solid rgba(0,0,0,.15);box-shadow:0 4px 30px #00000026}.light-theme .navbar .nav-center li a,.light-theme .navbar .logo,.light-theme .navbar .theme-toggle,.light-theme .navbar lucide-icon,.light-theme .navbar svg{color:#0f172a!important;stroke:#0f172a!important;fill:none}.light-theme .navbar .nav-center li a:hover,.light-theme .navbar .nav-center li a:hover lucide-icon,.light-theme .navbar .nav-center li a:hover svg{color:#f59e0b!important;stroke:#f59e0b!important}@media(min-width:769px){.navbar{width:85%;padding:1rem;margin-top:.3rem}}.nav-left .logo.portfolio-link{font-size:1.2rem;font-weight:700;text-decoration:none;background:linear-gradient(to right,#ad1400,#383838,#ad1400);background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent;animation:red-black 4s linear infinite;display:inline-block;position:relative;transition:all .3s ease}@keyframes red-black{0%{background-position:0% 50%}to{background-position:200% 50%}}.nav-left .logo.portfolio-link:hover{transform:scale(1.05);filter:brightness(1.2)}.nav-center{list-style:none;display:flex;gap:2.5rem;margin:0;padding:0}.nav-center li a{text-decoration:none;color:#fff;font-size:1rem;font-weight:400;transition:color .3s;padding:.5rem}.nav-right a img,.nav-right a iconify-icon{width:24px;height:24px;font-size:24px;margin-left:.8rem;transition:transform .3s;display:inline-block}.nav-right img:hover,.nav-right iconify-icon:hover{transform:scale(1.2)}.theme-toggle{background:none;border:none;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;font-size:24px;transition:transform .3s ease;color:#fff;padding:0;margin-left:.8rem}.light-theme .theme-toggle{color:#222f4d!important}.theme-toggle:hover{transform:scale(1.1)}.theme-toggle__around{transition:transform .5s cubic-bezier(.5,1.25,.75,1.25);transform-origin:center}@media(max-width:768px){.theme-toggle__around{transform:translate(.5px,3px)}}.theme-toggle__around g>g{transition:transform .5s cubic-bezier(.5,1.25,.75,1.25),opacity .5s cubic-bezier(.5,1.25,.75,1.25);transform-origin:center}.theme-toggle__around clipPath circle{transition:transform .5s cubic-bezier(.5,1.25,.75,1.25);transform-origin:center}.theme-toggle--dark{transform:rotate(-40deg)}.theme-toggle--dark g>g{transform:scale(0);opacity:0}.theme-toggle--dark clipPath circle{transform:translate(10px,-6px)}.theme-toggle__cutout{fill:#222f4d}.light-theme .theme-toggle__cutout{fill:#ffffffd9}.theme-toggle--dark .theme-toggle__cutout{transform:translateY(-6px)}.theme-toggle--dark{transform:rotate(-40deg) scale(1.5)}.nav-center li a:hover{color:#f39c12}@media(max-width:768px){.navbar{width:3rem;height:3rem;padding:0;margin-top:.25rem;align-items:center;justify-content:center;right:1rem;left:auto;transform:none;background:#222f4d;box-shadow:none;border:none;border-radius:50%}.nav-left,.nav-center,.nav-right a{display:none}.nav-right{display:flex;align-items:center;gap:0}.theme-toggle{margin-left:0}}
`],encapsulation:2})};var eC=["canvasRef"],tC=["containerRef"],nC=["*"],$c=class i{constructor(e){this.ngZone=e}canvasRef;containerRef;quantity=100;staticity=50;ease=50;color="#ffffff";particleSize=.4;vx=0;vy=0;context=null;circles=[];mousePosition={x:0,y:0};mouse={x:0,y:0};canvasSize={w:0,h:0};dpr=typeof window<"u"?window.devicePixelRatio:1;animationFrameId=null;ngOnInit(){this.setupMouseListeners()}ngAfterViewInit(){this.context=this.canvasRef.nativeElement.getContext("2d"),this.initCanvas(),this.ngZone.runOutsideAngular(()=>{this.animate()}),window.addEventListener("resize",()=>this.initCanvas())}ngOnDestroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),window.removeEventListener("resize",()=>this.initCanvas())}setupMouseListeners(){window.addEventListener("mousemove",e=>{this.handleMouseMove(e)})}handleMouseMove(e){let t=this.canvasRef.nativeElement.getBoundingClientRect(),n=e.clientX-t.left-this.canvasSize.w/2,a=e.clientY-t.top-this.canvasSize.h/2;n<this.canvasSize.w/2&&n>-this.canvasSize.w/2&&a<this.canvasSize.h/2&&a>-this.canvasSize.h/2&&(this.mouse.x=n,this.mouse.y=a)}initCanvas(){this.resizeCanvas(),this.drawParticles()}resizeCanvas(){let e=this.containerRef.nativeElement,t=this.canvasRef.nativeElement;this.circles=[],this.canvasSize.w=e.offsetWidth,this.canvasSize.h=e.offsetHeight,t.width=this.canvasSize.w*this.dpr,t.height=this.canvasSize.h*this.dpr,t.style.width=`${this.canvasSize.w}px`,t.style.height=`${this.canvasSize.h}px`,this.context?.scale(this.dpr,this.dpr)}hexToRgb(e){e=e.replace("#",""),e.length===3&&(e=e.split("").map(n=>n+n).join(""));let t=parseInt(e,16);return[t>>16&255,t>>8&255,t&255]}circleParams(){return{x:Math.floor(Math.random()*this.canvasSize.w),y:Math.floor(Math.random()*this.canvasSize.h),translateX:0,translateY:0,size:Math.floor(Math.random()*2)+this.particleSize,alpha:0,targetAlpha:parseFloat((Math.random()*.6+.1).toFixed(1)),dx:(Math.random()-.5)*.1,dy:(Math.random()-.5)*.1,magnetism:.1+Math.random()*4}}drawCircle(e,t=!1){if(!this.context)return;let n=this.hexToRgb(this.color),{x:a,y:s,translateX:r,translateY:o,size:c,alpha:l}=e;this.context.translate(r,o),this.context.beginPath(),this.context.arc(a,s,c,0,2*Math.PI),this.context.fillStyle=`rgba(${n.join(", ")}, ${l})`,this.context.fill(),this.context.setTransform(this.dpr,0,0,this.dpr,0,0),t||this.circles.push(e)}remapValue(e,t,n,a,s){let r=(e-t)*(s-a)/(n-t)+a;return r>0?r:0}drawParticles(){this.context?.clearRect(0,0,this.canvasSize.w,this.canvasSize.h);for(let e=0;e<this.quantity;e++){let t=this.circleParams();this.drawCircle(t)}}animate=()=>{this.context?.clearRect(0,0,this.canvasSize.w,this.canvasSize.h),this.circles.forEach((e,t)=>{let a=[e.x+e.translateX-e.size,this.canvasSize.w-e.x-e.translateX-e.size,e.y+e.translateY-e.size,this.canvasSize.h-e.y-e.translateY-e.size].reduce((r,o)=>Math.min(r,o)),s=parseFloat(this.remapValue(a,0,20,0,1).toFixed(2));if(s>1?(e.alpha+=.02,e.alpha>e.targetAlpha&&(e.alpha=e.targetAlpha)):e.alpha=e.targetAlpha*s,e.x+=e.dx+this.vx,e.y+=e.dy+this.vy,e.translateX+=(this.mouse.x/(this.staticity/e.magnetism)-e.translateX)/this.ease,e.translateY+=(this.mouse.y/(this.staticity/e.magnetism)-e.translateY)/this.ease,this.drawCircle(e,!0),e.x<-e.size||e.x>this.canvasSize.w+e.size||e.y<-e.size||e.y>this.canvasSize.h+e.size){this.circles.splice(t,1);let r=this.circleParams();this.drawCircle(r)}}),this.animationFrameId=requestAnimationFrame(this.animate)};static \u0275fac=function(t){return new(t||i)(de(ye))};static \u0275cmp=We({type:i,selectors:[["app-particles-background"]],viewQuery:function(t,n){if(t&1&&Gi(eC,5)(tC,5),t&2){let a;Xi(a=Zi())&&(n.canvasRef=a.first),Xi(a=Zi())&&(n.containerRef=a.first)}},inputs:{quantity:"quantity",staticity:"staticity",ease:"ease",color:"color",particleSize:"particleSize",vx:"vx",vy:"vy"},ngContentSelectors:nC,decls:5,vars:0,consts:[["containerRef",""],["canvasRef",""],[1,"particles-container"]],template:function(t,n){t&1&&(ei(),fn(0,"div",2,0),$i(2,"canvas",null,1),ti(4),Jn())},encapsulation:2})};function iC(i,e){if(i&1){let t=ja();_(0,"video",70),ne("error",function(a){Ei(t);let s=gn(2);return Li(s.handleMediaError(a))}),W(1,"img",71),P()}if(i&2){let t=gn().$implicit;Ne("src",t.media.src,Bi)("muted",!0),ge(),Ne("src","assets/fallback-image.png",Bi)}}function aC(i,e){if(i&1){let t=ja();_(0,"img",72),ne("error",function(a){Ei(t);let s=gn(2);return Li(s.handleMediaError(a))}),P()}if(i&2){let t=gn().$implicit;Ne("src",t.media.src,Bi)("alt",t.title)}}function sC(i,e){if(i&1&&(_(0,"a",68),ke(1," View Project "),P()),i&2){let t=gn().$implicit;Ne("href",t.link,Bi)}}function rC(i,e){i&1&&(_(0,"a",69),ke(1,"View Unavailable"),P()),i&2&&Wi("disabled",!0)}function oC(i,e){if(i&1&&(_(0,"div",48)(1,"div",64),po(2,iC,2,3,"video",65)(3,aC,1,2,"img",66),P(),_(4,"h3"),ke(5),P(),_(6,"p",67),ke(7),P(),po(8,sC,2,1,"a",68)(9,rC,2,1,"a",69),P()),i&2){let t=e.$implicit;ge(2),fo(t.media.type==="video"?2:3),ge(3),Va(t.title),ge(2),Va(t.description),ge(),fo(t.link?8:9)}}function cC(i,e){if(i&1){let t=ja();_(0,"app-resume-viewer",73),ne("close",function(){Ei(t);let a=gn();return Li(a.closeResume())}),P()}}var Gc=class i{constructor(e,t){this.renderer=e;this.themeService=t}title="portfolio-self";projects=[{title:"CiteCat",description:"Django-based web app to detect content similarity using Pythons PyTorch library.",media:{type:"video",src:"assets/projects/project1.mp4"},link:""},{title:"Noteapp",description:"A modern, feature-rich note-taking application built with Django & Tailwind.",media:{type:"video",src:"assets/projects/noteapp_project.mp4"},link:"https://github.com/zzzastro/Noteapp"},{title:"Storefront",description:"A ecommerce project with a shopping cart, product listing, and checkout functionality.",media:{type:"video",src:"assets/projects/project3.mp4"},link:""},{title:"PDF Annotator",description:"Tool that provides users with annotation capabilities to PDF documents.",media:{type:"image",src:"assets/projects/project.jpg"},link:""},{title:"Personal Portfolio",description:"A personal portfolio project to showcase my information, skills, and projects.",media:{type:"image",src:"assets/projects/portfolio-project.png"},link:"https://github.com/zzzastro/github-portfolio"}];showResume=!1;navLinkUnlisteners=[];animationQueues=new Map;currentlyAnimating=null;ngOnInit(){if(this.themeService.initTheme(),ry(["skill-icons:python-dark","skill-icons:django","skill-icons:angular-dark","skill-icons:typescript","skill-icons:docker","skill-icons:figma-dark","skill-icons:git","skill-icons:react-dark","skill-icons:astro","skill-icons:nestjs-dark","skill-icons:tailwindcss-dark","logos:facebook","skill-icons:linkedin","skill-icons:github-dark","skill-icons:gmail-dark"]),window.location.hash){let e=window.location.href.split("#")[0];window.history.replaceState({},document.title,e),window.scrollTo(0,0)}}ngAfterViewInit(){setTimeout(()=>{window.location.hash||window.scrollTo(0,0)},100),document.querySelectorAll('a[href^="#"]').forEach(t=>{if(t.classList.contains("portfolio-link"))return;let n=this.renderer.listen(t,"click",a=>{a.preventDefault();let s=t.getAttribute("href");if(s==="#"||s===""){window.scrollTo({top:0,behavior:"smooth"});return}if(s){let r=document.querySelector(s);if(r){if(this.currentlyAnimating&&this.currentlyAnimating!==s){this.animationQueues.clear();let c=document.querySelector(this.currentlyAnimating);c&&c.classList.remove("bounce-animation")}let o=this.animationQueues.get(s)||0;o<5&&(this.animationQueues.set(s,o+1),this.currentlyAnimating!==s&&this.playBounceAnimationQueue(s,r)),r.scrollIntoView({behavior:"smooth",block:"start"})}}});this.navLinkUnlisteners.push(n)}),setTimeout(()=>{window.dispatchEvent(new Event("resize"))},200)}ngOnDestroy(){this.navLinkUnlisteners.forEach(e=>e())}playBounceAnimationQueue(e,t){let n=this.animationQueues.get(e)||0;n>0?(this.currentlyAnimating=e,t.classList.remove("bounce-animation"),t.offsetWidth,t.classList.add("bounce-animation"),this.animationQueues.set(e,n-1),setTimeout(()=>{t.classList.remove("bounce-animation"),(this.animationQueues.get(e)||0)>0?this.playBounceAnimationQueue(e,t):(this.currentlyAnimating=null,this.animationQueues.delete(e))},1100)):(this.currentlyAnimating=null,this.animationQueues.delete(e))}contactEmail(){window.open(`https://mail.google.com/mail/?view=cm&fs=1&to=ashish.bhatt.app@gmail.com&su=${encodeURIComponent("Regarding Your Portfolio")}&body=${encodeURIComponent(`Hi Ashish,

I came across your portfolio and would like to connect properly.`)}`,"_blank")}openResume(){this.showResume=!0,document.body.style.overflow="hidden"}closeResume(){this.showResume=!1,document.body.style.overflow="auto"}handleMediaError(e){let t=e.target;if(t instanceof HTMLImageElement)t.src="assets/fallback-image.png";else if(t instanceof HTMLVideoElement){t.setAttribute("poster","assets/fallback-image.png"),t.style.display="none";let n=document.createElement("img");n.src="assets/fallback-image.png",n.alt="Video not available",n.classList.add("fallback-media"),t.parentElement?.appendChild(n)}}static \u0275fac=function(t){return new(t||i)(de(zi),de(bn))};static \u0275cmp=We({type:i,selectors:[["app-root"]],decls:78,vars:4,consts:[[1,"main-container"],[1,"particles-backdrop",3,"quantity","ease","color"],[1,"content-wrapper"],["id","home",1,"home-section"],[1,"home-container"],[1,"home-image"],["src","./assets/profile3.png","alt","My Picture",1,"round-image"],[1,"home-description"],[1,"home-buttons"],[1,"btn","download-btn",2,"cursor","pointer",3,"click"],["href","#contact",1,"btn","contact-btn",2,"cursor","pointer"],["id","about",1,"about-section"],[1,"tech-icons"],["href","https://www.python.org/about/","target","_blank",2,"cursor","pointer",3,"click"],["text","Python"],["icon","skill-icons:python-dark"],["href","https://www.djangoproject.com","target","_blank",2,"cursor","pointer",3,"click"],["text","Django"],["icon","skill-icons:django"],["href","https://nestjs.com/","target","_blank",2,"cursor","pointer",3,"click"],["text","NestJS"],["icon","skill-icons:nestjs-dark"],["href","https://www.typescriptlang.org","target","_blank",2,"cursor","pointer",3,"click"],["text","TypeScript"],["icon","skill-icons:typescript"],["href","https://angular.dev/overview","target","_blank",2,"cursor","pointer",3,"click"],["text","Angular"],["icon","skill-icons:angular-dark"],["href","https://react.dev/","target","_blank",2,"cursor","pointer",3,"click"],["text","React"],["icon","skill-icons:react-dark"],["href","https://astro.build/","target","_blank",2,"cursor","pointer",3,"click"],["text","Astro"],["icon","skill-icons:astro"],["href","https://tailwindcss.com/","target","_blank",2,"cursor","pointer",3,"click"],["text","Tailwind CSS"],["icon","skill-icons:tailwindcss-dark"],["href","https://docs.docker.com/get-started/docker-overview/","target","_blank",2,"cursor","pointer",3,"click"],["text","Docker"],["icon","skill-icons:docker"],["href","https://git-scm.com/doc","target","_blank",2,"cursor","pointer",3,"click"],["text","Git"],["icon","skill-icons:git"],["href","https://www.figma.com/","target","_blank",2,"cursor","pointer",3,"click"],["text","Figma"],["icon","skill-icons:figma-dark"],["id","projects",1,"projects-section"],[1,"projects-grid"],[1,"project-card"],["id","contact",1,"contact-section"],[1,"contact-icons"],["href","https://www.facebook.com/fallenaspen","target","_blank"],["text","Facebook"],["icon","logos:facebook"],["href","https://linkedin.com/in/thatashishbhatt","target","_blank"],["text","LinkedIn"],["icon","skill-icons:linkedin"],["href","https://github.com/zzzastro","target","_blank"],["text","GitHub"],["icon","skill-icons:github-dark"],[1,"email-link",2,"cursor","pointer",3,"click"],["text","Send Mail"],["icon","skill-icons:gmail-dark"],[3,"close",4,"ngIf"],[1,"project-image"],["controls","","defaultMuted","","poster","./assets/play_vid.png",3,"src","muted"],[3,"src","alt"],[1,"project-description"],["target","_blank",1,"project-btn",3,"href"],[1,"project-btn","disabled"],["controls","","defaultMuted","","poster","./assets/play_vid.png",3,"error","src","muted"],["alt","Video failed",1,"fallback-image",3,"src"],[3,"error","src","alt"],[3,"close"]],template:function(t,n){t&1&&(_(0,"div",0),W(1,"app-particles-background",1),_(2,"div",2),W(3,"app-navbar"),_(4,"section",3)(5,"div",4)(6,"div",5),W(7,"img",6),P(),_(8,"div",7)(9,"h1"),ke(10,"Hi, I'm Ashish Bhatt"),P(),_(11,"p"),ke(12," I'm a web developer who enjoys building things that feel smooth, fast, and easy to use. I love turning ideas into clean, functional things and constantly improving the way I work. I'm always learning, experimenting, and trying to create things I\u2019m genuinely proud of. "),P(),_(13,"div",8)(14,"button",9),ne("click",function(){return n.openResume()}),ke(15,"View Resume"),P(),_(16,"a",10),ke(17,"Contact Me"),P()()()()(),_(18,"section",11)(19,"h2"),ke(20,"Tech Stack"),P(),_(21,"div",12)(22,"a",13),ne("click",function(s){return s.preventDefault()}),_(23,"app-tooltip",14),W(24,"iconify-icon",15),P()(),_(25,"a",16),ne("click",function(s){return s.preventDefault()}),_(26,"app-tooltip",17),W(27,"iconify-icon",18),P()(),_(28,"a",19),ne("click",function(s){return s.preventDefault()}),_(29,"app-tooltip",20),W(30,"iconify-icon",21),P()(),_(31,"a",22),ne("click",function(s){return s.preventDefault()}),_(32,"app-tooltip",23),W(33,"iconify-icon",24),P()(),_(34,"a",25),ne("click",function(s){return s.preventDefault()}),_(35,"app-tooltip",26),W(36,"iconify-icon",27),P()(),_(37,"a",28),ne("click",function(s){return s.preventDefault()}),_(38,"app-tooltip",29),W(39,"iconify-icon",30),P()(),_(40,"a",31),ne("click",function(s){return s.preventDefault()}),_(41,"app-tooltip",32),W(42,"iconify-icon",33),P()(),_(43,"a",34),ne("click",function(s){return s.preventDefault()}),_(44,"app-tooltip",35),W(45,"iconify-icon",36),P()(),_(46,"a",37),ne("click",function(s){return s.preventDefault()}),_(47,"app-tooltip",38),W(48,"iconify-icon",39),P()(),_(49,"a",40),ne("click",function(s){return s.preventDefault()}),_(50,"app-tooltip",41),W(51,"iconify-icon",42),P()(),_(52,"a",43),ne("click",function(s){return s.preventDefault()}),_(53,"app-tooltip",44),W(54,"iconify-icon",45),P()()()(),_(55,"section",46)(56,"h2"),ke(57,"Projects"),P(),_(58,"div",47),Sh(59,oC,10,4,"div",48,Ah),P()(),_(61,"section",49)(62,"h2"),ke(63,"Contact Me"),P(),_(64,"div",50)(65,"a",51)(66,"app-tooltip",52),W(67,"iconify-icon",53),P()(),_(68,"a",54)(69,"app-tooltip",55),W(70,"iconify-icon",56),P()(),_(71,"a",57)(72,"app-tooltip",58),W(73,"iconify-icon",59),P()(),_(74,"a",60),ne("click",function(){return n.contactEmail()}),_(75,"app-tooltip",61),W(76,"iconify-icon",62),P()()()()(),ho(77,cC,1,0,"app-resume-viewer",63),P()),t&2&&(ge(),Ne("quantity",400)("ease",80)("color","#9E1DCD"),ge(58),Eh(n.projects),ge(18),Ne("ngIf",n.showResume))},dependencies:[Wc,$c,yn,Th,Uc,wn],styles:["body[_ngcontent-%COMP%]{margin:0;padding-top:3.5rem;font-family:JetBrains Mono,monospace}[_nghost-%COMP%]{display:block;min-height:100vh;position:relative}.main-container[_ngcontent-%COMP%]{position:relative;min-height:100vh;width:100%}.particles-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:-1}.content-wrapper[_ngcontent-%COMP%]{position:relative;z-index:1}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-15px)}60%{transform:translateY(-7px)}}.bounce-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 1.1s ease}section[_ngcontent-%COMP%]{padding:4rem 2rem;text-align:center;background-color:transparent;scroll-margin-top:6rem}.home-section[_ngcontent-%COMP%]{padding-top:100px}.home-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:2rem;background-color:transparent}.home-image[_ngcontent-%COMP%]{width:300px;height:300px;border-radius:50%;background:#fff;display:flex;align-items:center;justify-content:center;overflow:hidden;-webkit-backface-visibility:hidden;mask-image:radial-gradient(circle,white 98%,transparent 100%);-webkit-mask-image:radial-gradient(circle,white 98%,transparent 100%);backface-visibility:hidden;-webkit-transform:translateZ(0);transform:translateZ(0);box-shadow:0 0 1px #0000}.home-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.home-description[_ngcontent-%COMP%]{max-width:500px;text-align:left}.home-description[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem;line-height:1.2}.home-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem}.home-buttons[_ngcontent-%COMP%]{margin-top:1rem;display:flex;flex-wrap:wrap;gap:1rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;text-decoration:none;color:#fff;background-color:#76b3d1;border-radius:.5rem;transition:background-color .3s;display:inline-block;text-align:center;font-size:1rem}.btn[_ngcontent-%COMP%]:hover{background-color:#577e91}.tech-icons[_ngcontent-%COMP%]{padding-top:.7rem;display:flex;flex-wrap:wrap;justify-content:center;gap:3rem;max-width:calc(360px + 9rem);margin:0 auto;isolation:isolate}.tech-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{backface-visibility:hidden;display:inline-block}.tech-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .tech-icons[_ngcontent-%COMP%]   iconify-icon[_ngcontent-%COMP%]{width:80px;height:80px;font-size:80px;flex:0 0 80px;border:none;padding:0;background-color:transparent!important;display:inline-block;transition:transform .3s ease-in-out}.tech-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover, .tech-icons[_ngcontent-%COMP%]   iconify-icon[_ngcontent-%COMP%]:hover{transform:scale(1.2);animation:_ngcontent-%COMP%_vibrate .7s infinite ease-in-out}@keyframes _ngcontent-%COMP%_vibrate{0%{transform:translate(0)}25%{transform:translate(-3px)}50%{transform:translate(3px)}75%{transform:translate(-3px)}to{transform:translate(0)}}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}.projects-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 1rem}.project-card[_ngcontent-%COMP%]{width:280px;border:1px solid #ddd;border-radius:8px;padding:1rem;text-align:left;transition:box-shadow .3s;height:400px;display:flex;flex-direction:column;flex:0 0 280px}.project-image[_ngcontent-%COMP%]{width:100%;height:60%;background-color:#fff;border:2px solid #ece7e7;overflow:hidden;position:relative;border-radius:4px;margin-bottom:1rem}.project-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .project-image[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .fallback-media[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);max-width:100%;max-height:100%}.project-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:.1rem}.project-description[_ngcontent-%COMP%]{font-size:.86rem;margin-top:.1rem;line-height:1.5;height:6rem;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;margin-bottom:1rem}.project-btn[_ngcontent-%COMP%]{display:block;width:100%;background-color:#87ceeb;text-align:center;padding:.75rem;border:none;border-radius:4px;transition:background-color .3s;margin-top:auto;text-decoration:none;color:#fff}.project-btn[_ngcontent-%COMP%]:hover{background-color:#76b3d1}.projects-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:2rem;margin-top:2rem}.contact-icons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2rem;margin-top:2rem}.contact-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .contact-icons[_ngcontent-%COMP%]   iconify-icon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:40px;transition:transform .3s;display:inline-block}.contact-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover, .contact-icons[_ngcontent-%COMP%]   iconify-icon[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}.disabled[_ngcontent-%COMP%]:hover{background-color:inherit;color:inherit}video[_ngcontent-%COMP%]::-webkit-media-controls-panel{background:linear-gradient(#000000b3,#000000b3)!important;background-image:none!important;opacity:1!important}video[_ngcontent-%COMP%]::-webkit-media-controls-enclosure{background:transparent!important;background-image:none!important}video[_ngcontent-%COMP%]::-webkit-media-controls-play-button, video[_ngcontent-%COMP%]::-webkit-media-controls-mute-button, video[_ngcontent-%COMP%]::-webkit-media-controls-fullscreen-button, video[_ngcontent-%COMP%]::-webkit-media-controls-toggle-closed-captions-button, video[_ngcontent-%COMP%]::-webkit-media-controls-overflow-menu-button{filter:invert(1)!important}video[_ngcontent-%COMP%]::-webkit-media-controls-current-time-display, video[_ngcontent-%COMP%]::-webkit-media-controls-time-remaining-display{color:#000!important;text-shadow:none!important}video[_ngcontent-%COMP%]::-webkit-media-controls-timeline::-webkit-slider-thumb{background:#000!important}video[_ngcontent-%COMP%]::-webkit-media-controls-volume-slider::-webkit-slider-thumb{background:#000!important}@media(max-width:480px){.home-buttons[_ngcontent-%COMP%]{flex-direction:column;width:100%}.home-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;margin-right:0}}@media(max-width:768px){.home-section[_ngcontent-%COMP%]{padding-top:2rem}}"]})};Vh(Gc,Ag).catch(i=>console.error(i));
